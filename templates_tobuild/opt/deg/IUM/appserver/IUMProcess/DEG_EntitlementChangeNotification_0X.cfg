[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01]

ClassName=com.hp.siu.adminagent.procmgr.ContextServerProcess
Description=DEG Entitlement Change Notification Interface
JDBCConnectionPoolService=PoolService
@Include(pattern="**")
@Include(pattern="**#*", merge=true)
MBeanServerConnection=service:jmx:rmi://10.6.4.228/jndi/rmi://10.6.4.228:55544/jmxconnector
Link=/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize
SNMESchemaLoader=SnmeLoader
StartClassName=com.hp.siu.sessionserver.SessionServer

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService] 

ClassName=com.hp.usage.jdbc.poolservice.JDBCConnectionPoolService
ConnectionPools=DEG_DSN_TT_Rem_Pool1
ConnectionPools=DEG_DSN_TT_Rem_Pool2
ConnectionPools=NRB_DSN_TT_Rem_Pool1



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/CommonConnectionPolicies] 

ClassName=com.hp.usage.jdbc.poolservice.client.ConnectionPolicies
Policies=Policy1
Policies=Policy2


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/CommonConnectionPolicies/Policy1]


ClassName=com.hp.usage.jdbc.poolservice.client.SimpleConnectionPolicy
Pools=DEG_DSN_TT_Rem_Pool1
Pools=DEG_DSN_TT_Rem_Pool2




[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/CommonConnectionPolicies/Policy2]

ClassName=com.hp.usage.jdbc.poolservice.client.RoundRobinConnectionPolicy
Pools=NRB_DSN_TT_Rem_Pool1



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/DEG_DSN_TT_Rem_Pool1] 

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${DEG_CLIENT_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
InitialPoolSize=100
MaxPoolSize=200
MinPoolSize=100
Password=${PASSWD_DEG_DSN}
RetryCount=1
RetryInterval=300
User=${USER_DEG_DSN}

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/DEG_DSN_TT_Rem_Pool2] 

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${DEG_CLIENT2_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
InitialPoolSize=100
MaxPoolSize=200
MinPoolSize=100
Password=${PASSWD_DEG_DSN}
RetryCount=1
RetryInterval=300
User=${USER_DEG_DSN}


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/PoolService/NRB_DSN_TT_Rem_Pool1] 

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${NRB_CLIENT_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
InitialPoolSize=${NRB_CON_INITIAL_POOL_SIZE}
MaxPoolSize=${NRB_CON_MAX_POOL_SIZE}
Password=${PASSWD_NRB_DSN}
RetryCount=1
RetryInterval=300
User=${USER_NRB_DSN}

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors] 

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=100.NotificationSOAPConnector
ConnectorNames=200.APNSNMERPCClientConnector
ConnectorNames=100.GetSubscriberDetailsSOAPClientConnector


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/100.NotificationSOAPConnector] 

AcceptCount=${ENT_HTTP_ACCEPT_COUNT}
ClassName=com.hp.siu.plugins.tomcat.HttpConnector
Context=EntitlementChangeNotification
Managed=${MANAGED_SETUP}
MaxProcessors=${ENT_HTTP_CON_MAX_PROCESSORS}
MaxSpareProcessors=${ENT_HTTP_CON_MIN_PROCESSORS}
MinProcessors=${ENT_HTTP_CON_MIN_PROCESSORS}
Port=${ENT_SOAP_SERVER_PORT}
UseContextIdentifierOnly=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/100.NotificationSOAPConnector/EntitlementChangeNotification] 

ClassName=com.hp.usage.soap.SOAPContextProvider
ContextIdentifier=EntitlementChangeNotification
DefaultRuleChain=002.DefaultUnsupportedOperationRuleChain
FaultCodeField=DEG_EntSOAPFaultCodeString
FaultStringField=DEG_EntSOAPFaultMessageString
NMENamespace=EntitlementChangeNotification
ServiceMap=EntitlementChangeNotification,001.EntitlementChangeNotificationRuleChain
WSDLFile=${ENT_STORE_WSDL_FILE}

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/200.APNSNMERPCClientConnector] 

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientAdapter
Connection=PrimaryServer
Description=NMERPCClientAdapter is a connector to a remote session server that provides the ability to invoke rule chains in the remote session server and pass an NME.
Name=APNSNMERPCClientAdapter
Routers=Router1
MessageTypes=APNSRequestMessage

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/200.APNSNMERPCClientConnector/Router1]
ClassName=com.hp.usage.framework.connector.router.StaticRouter
Description=StaticRouter identifies destinations that a message can be sent to.
Destinations=${APNS_INTERFACE_IP}:10000

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/200.APNSNMERPCClientConnector/PrimaryServer]
 
ClassName=com.hp.usage.nme.rpc.client.NMERPCClientConnection
Description=NMERPCClientConnection creates a connection to a remote session server.
MaxPendingRequests=512
#MessageType=APNSRequestMessage
#PeerAddress=16.19.139.130:10000
ReconnectDelay=${ENT_APNS_RECONNECT_DELAY}
ResponseTimeout=${ENT_APNS_TIMEOUT}
MaxAllowedRequestTimeouts=${ENT_APNS_ALLOWED_TIMEOUTS}

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/200.APNSNMERPCClientConnector/APNSRequestMessage] 

ClassName=com.hp.usage.nme.rpc.codec.NMERPCMessageType
Description=NMERPCMessageType defines the NME attributes to send to a remote session server and the rule chain in the remote session server to invoke.
RequestAttributes=CUST_APN_IN_MDNLong
RequestAttributes=CUST_APN_IN_IMSIString
RequestAttributes=CUST_APN_IN_TopicString
RequestAttributes=CUST_APN_IN_TriggerTypeString
RequestAttributes=CUST_APN_IN_UniqueIdString
RequestAttributes=CUST_APN_IN_TokenString
RequestAttributes=CUST_APN_IN_PushNotificationStatus
ResponseAttributes=CUST_APN_OUT_APNSSentStatusString
RuleChain=CUSTRC_Apple_APNS_SendNotification

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Connectors/200.APNSNMERPCClientConnector/Transport]

ClassName=com.hp.usage.transport.tcp.TCPTransport



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService] 

ClassName=com.hp.siu.serverutils.RefDataServiceManager
QueryNames=DEG_MONITORINGID_GENERATOR
QueryNames=DEG_MONITORING_SESSIONS_ActiveSessions

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR] 

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MSESSIONTRANSID,DEG_MSESSIONTRANSID
CommonPolicyID=Policy2
QueryString=SELECT DEG_MONITORINGID_GENERATOR.NEXTVAL AS DEG_MSESSIONTRANSID FROM DUAL
ResultAttribute=DEG_NrbMatchFoundInteger
ResultIndexAttribute=DEG_NrbIndexInteger


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR/FinalRule]

AdornOps=copy DEG_NrbMatchFoundInteger DEG_NrbMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR/InitialRule] //

AdornOps=set DEG_NrbMatchFoundInteger 0
AdornOps=set DEG_NrbIndexInteger 0
AdornOps=set DEG_MSESSIONTRANSID 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORINGID_GENERATOR.NEXTVAL"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORINGID_GENERATOR/ResultRowRule]

AdornOps=set DEG_NrbMatchFoundInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions] 

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
CommonPolicyID=Policy2
QueryString=SELECT %FIELDS FROM DEG_MONITORING_SESSIONS WHERE DEG_MSESSIONTYPE in ('MDN','IMSI') AND DEG_MSESSIONSTATUS='AE' AND DEG_MSESSIONKEY=%DEG_MSESSIONKEY
ResultAttribute=DEG_NrbMatchFoundInteger
ResultIndexAttribute=DEG_NrbIndexInteger


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/FinalRule]

AdornOps=copy DEG_NrbMatchFoundInteger DEG_NrbMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/InitialRule]

AdornOps=set DEG_NrbMatchFoundInteger 0
AdornOps=set DEG_MSESSIONID ""
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.PopulateMonitoringSessionIdsList


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/ResultRowRule/100.Set_MatchFound]

AdornOps=set DEG_NrbMatchFoundInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ReferenceDataService/DEG_MONITORING_SESSIONS_ActiveSessions/ResultRowRule/200.PopulateMonitoringSessionIdsList]

ClassName=AddToListAttributeRule
Delimiters=,
InputAttribute=DEG_MSESSIONID
ListAttribute=DEG_NrbMonitoringSessionIdList


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains] 

ClassName=RuleChainManager
MaxPoolSize=${ENT_RULECHAIN_MAX_POOL_SIZE}
MinPoolSize=${ENT_RULECHAIN_MIN_POOL_SIZE}
RuleChainNames=001.EntitlementChangeNotificationRuleChain
RuleChainNames=002.DefaultUnsupportedOperationRuleChain
RuleChainNames=003.SessionStoreDefaultErrorRuleChain
RuleChainNames=004.SessionStoreKeyNotExistsRuleChain
RuleChainNames=005.GenerateAuditAndNRBEventsRuleChain
RuleChainNames=006.DumpMonitoringTransactionsRuleChain
RuleChainNames=007.EntitlementChangeNotificationStartAuditRuleChain
RuleChainNames=008.EntitlementChangeNotificationEndAuditRuleChain
RuleChainNames=009.SendAPNSNotificationRuleChain
RuleChainNames=200T.SendNotificationTokensSoapRequestRuleChain
RuleChainNames=010.CheckNotificationSOAPRuleChain



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=000.Initialize
RuleNames=100.ExtractInputParameter
RuleNames=110.LogRequestRecieved
RuleNames=200.ValidateInputParameters
RuleNames=300.LookUpTokensTable
RuleNames=500.CheckNotificationSentStatus



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/000.Initialize] 

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0000
AdornOps=set DEG_EntReturnMessageString "Successful"
AdornOps=set DEG_EntPushTokenSecondLookUpString ${CHECK_SECOND_PUSH_TOKEN_TABLE}
AdornOps=set DEG_EntSendAPNSNotificationInteger 0
AdornOps=set DEG_EntAPNSErrorFlagInteger 0
AdornOps=setsystime DEG_EntStartTimestampLong


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/100.ExtractInputParameter] 

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=EntitlementChangeNotification:Body
StructuredNMEToNMEMap=EntitlementChangeNotification.IMSI.CData,DEG_EntIMSIString
StructuredNMEToNMEMap=EntitlementChangeNotification.FeatureCode.CData,DEG_EntFeatureCodeString
StructuredNMEToNMEMap=EntitlementChangeNotification.AccountStatus.CData,DEG_EntAccountStatusString
StructuredNMEToNMEMap=EntitlementChangeNotification.Timestamp.CData,DEG_EntTimestampRequestString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/110.LogRequestRecieved]

ClassName=LogNMERule
LogLevel=INFO
Message=Entitlement Change Notification Request Received
Attributes=DEG_EntIMSIString
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntAccountStatusString
Attributes=DEG_EntTimestampRequestString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters] 

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_EntIMSIString
FalseRuleChain=000.SetErrorValues
FalseRuleChain=100.LogError
TrueRuleChain=000.ValidateAccountStatus
TrueRuleChain=100.ValidateFeatureCodeValues

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.SetErrorValues]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0101
AdornOps=set DEG_EntReturnMessageString "Invalid IMSI format"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.LogError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=IMSI should be of 15 characters
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntAccountStatusString,=,""
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogError
FalseRuleChain=000.ValidateAccountStatusValues


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0102
AdornOps=set DEG_EntReturnMessageString "AccountStatus is mandatory"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/100.LogError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Account Status is mandatory
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/000.ValidateAccountStatusValues]

ClassName=com.hp.siu.collector.rules.StringTokenizerRule
Delimiter=,
SourceAttribute=DEG_EntAccountStatusString
TokenAttribute=DEG_EntAccountStatusTmpString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/000.ValidateAccountStatusValues/IterationRule]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntAccountStatusTmpString,within,[ENABLED,DISABLED,SUSPENDED,PROVISIONED]
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogError

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/000.ValidateAccountStatusValues/IterationRule/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0103
AdornOps=set DEG_EntReturnMessageString "Account Status must have values ENABLED/DISABLED/SUSPENDED,PROVISIONED"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/000.ValidateAccountStatus/000.ValidateAccountStatusValues/IterationRule/100.LogError]


ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Account Status must have values ENABLED/DISABLED/SUSPENDED/PROVISIONED
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntFeatureCodeString,!=,""
Conditions=DEG_EntReturnCodeInteger,=,0000
Operations=and
#TrueRuleChain=LogTrue
TrueRuleChain=000.IterateFeatureCodeValues
#FalseRuleChain=LogFalse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/LogTrue]

ClassName=LogNMERule
LogLevel=INFO
Message=TrueRule
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntReturnCodeInteger

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/LogFalse]

ClassName=LogNMERule
LogLevel=INFO
Message=TrueRule
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntReturnCodeInteger

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues]

ClassName=com.hp.siu.collector.rules.StringTokenizerRule
Delimiter=,
SourceAttribute=DEG_EntFeatureCodeString
TokenAttribute=DEG_EntFeatureCodeTmpString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntFeatureCodeTmpString,!within,[VLTE,VWIFI,MULTISIM]
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogError
FalseRuleChain=000.AddToList


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0104
AdornOps=set DEG_EntReturnMessageString "Unsupported FeatureCode"
AdornOps=set DEG_EntFeatureCodeList null
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/100.LogError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unsupported FeatureCode
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList]

ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.SetEntitlementName
TrueRuleChain=100.AddToList

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList/000.SetEntitlementName]

ClassName=SwitchConditionRule
Conditions=DEG_EntFeatureCodeTmpString,=,VLTE
Conditions=DEG_EntFeatureCodeTmpString,=,VWIFI
Conditions=DEG_EntFeatureCodeTmpString,=,MULTISIM

TrueRuleChain=SetVoLTE
TrueRuleChain=SetVoWiFi
TrueRuleChain=SetMulti-SIM

SetVoLTE=000.SetVoLTE
SetVoWiFi=000.SetVoWiFi
SetMulti-SIM=000.SetMulti-SIM


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList/000.SetEntitlementName/000.SetVoLTE]

ClassName=AdornmentRule
AdornOps=set DEG_EntFeatureCodeTmpString "VoLTE"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList/000.SetEntitlementName/000.SetVoWiFi]

ClassName=AdornmentRule
AdornOps=set DEG_EntFeatureCodeTmpString "VoWiFi"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList/000.SetEntitlementName/000.SetMulti-SIM]

ClassName=AdornmentRule
AdornOps=set DEG_EntFeatureCodeTmpString "Multi-SIM"


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/200.ValidateInputParameters/100.ValidateFeatureCodeValues/000.IterateFeatureCodeValues/IterationRule/000.AddToList/100.AddToList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
ListAttribute=DEG_EntFeatureCodeList
InputAttribute=DEG_EntFeatureCodeTmpString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable] 

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitTokensTableLookUp
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/000.InitTokensTableLookUp] 

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_EntIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=004.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus]


ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse
FalseRuleChain=000.CheckIfKeyExists

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Db Error:Unable to LookUp in DEG_TOKENS table
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntSessionStoreKeyExistsFlagInteger,=,0
#TrueRuleChain=000.SetErrorResponse
#TrueRuleChain=100.LogErrorResponse
TrueRuleChain=000.IterateFeatureCodeList
FalseRuleChain=100.GetActiveMonitoringSessions
FalseRuleChain=000.IterateFeatureCodeList

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0106
AdornOps=set DEG_EntReturnMessageString "Unknown Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unknown Subscriber!!
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions]

ClassName=RuleChain
RuleNames=GetActiveMonitoringSessionsByMDN
RuleNames=GetActiveMonitoringSessionsByIMSI
RuleNames=GetActiveMonitoringSessionsByUniqueID
RuleNames=InvokeStartAudit

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByMDN]

ClassName=RuleChain
RuleNames=100.Initialize
RuleNames=200.Query

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByMDN/100.Initialize]

AdornOps=copy DEG_MDN DEG_MSESSIONKEY
ClassName=AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByMDN/200.Query]

ClassName=RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByIMSI]


ClassName=RuleChain
RuleNames=100.Initialize
RuleNames=200.Query

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByIMSI/100.Initialize]

AdornOps=copy DEG_IMSI DEG_MSESSIONKEY
ClassName=AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByIMSI/200.Query]

ClassName=RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByUniqueID]

ClassName=RuleChain
RuleNames=100.Initialize
RuleNames=200.Query

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByUniqueID/100.Initialize]

AdornOps=copy DEG_UNIQUE_ID DEG_MSESSIONKEY
ClassName=AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/GetActiveMonitoringSessionsByUniqueID/200.Query]

ClassName=RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/100.GetActiveMonitoringSessions/InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=007.EntitlementChangeNotificationStartAuditRuleChain
UseRuleChainManagerPool=false

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_EntFeatureCodeList
TmpAttributeName=DEG_EntFeatureCodeTmpString
RuleChain=ListIterationRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule]


ClassName=SwitchConditionRule
Conditions=DEG_EntFeatureCodeTmpString,=,VoLTE
Conditions=DEG_EntFeatureCodeTmpString,=,VoWiFi
Conditions=DEG_EntFeatureCodeTmpString,=,Multi-SIM

TrueRuleChain=ProcessVoLTE
TrueRuleChain=ProcessVoWiFi
TrueRuleChain=ProcessMulti-SIM

ProcessVoLTE=000.ProcessVoLTE
ProcessVoWiFi=000.ProcessVoWiFi
ProcessMulti-SIM=000.ProcessMulti-SIM

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE]

ClassName=ConditionalRule
Conditions=DEG_PUSH_TOKEN,!=,""
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=010.InitTempTokensTableLookup
FalseRuleChain=100.ExecuteTableLookUp
FalseRuleChain=200.CheckLookUpStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/010.InitTempTokensTableLookup] 

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_EntFeatureCodeTmpString DEG_TOPIC
AdornOps=copy DEG_EntIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TEMP_TOKENS"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_TEMP_TOKEN,DEG_TEMP_TOKEN
MapAttributes=DEG_TOPIC,DEG_TOPIC
NotExistsErrorRuleChain=004.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TEMP_TOKENS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus]


ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse
FalseRuleChain=010.Checkauxtable

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Db Error:Unable to LookUp in DEG_TEMP_TOKENS table
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable]

ClassName=ConditionalRule
Conditions=DEG_TEMP_TOKEN,!=,""
Conditions=DEG_TOPIC,=,"VoLTE"
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=010.QueryPGW
#FalseRuleChain=020.DummyList
#FalseRuleChain=025.AddToList
FalseRuleChain=030.CallNotificiationRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/020.DummyList]

ClassName=AdornmentRule
AdornOps=set DEG_ListVoltepruebaString "VoLTE:Tokenvolteprueba"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/025.AddToList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
ListAttribute=DEG_EntNotificationTokensList
InputAttribute=DEG_ListVoltepruebaString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/030.CallNotificiationRule]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=010.CheckNotificationSOAPRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/010.QueryPGW]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200T.SendNotificationTokensSoapRequestRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "Entitlements"
AdornOps=set CUST_APN_IN_TriggerTypeString "entitlements-changed"
AdornOps=copy DEG_PUSH_TOKEN DEG_DEG_EntVoLTEAPNSTokenString
AdornOps=copy DEG_DEG_EntVoLTEAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "Entitlements"
AdornOps=set CUST_APN_IN_TriggerTypeString "entitlements-changed"
AdornOps=copy DEG_TEMP_TOKEN DEG_DEG_EntVoLTEAPNSTokenString
AdornOps=copy DEG_DEG_EntVoLTEAPNSTokenString CUST_APN_IN_TokenString
AdornOps=setifnull DEG_MDN "+34"
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=setifnull DEG_UNIQUE_ID "00"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoLTE/200.CheckLookUpStatus/010.Checkauxtable/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi]

ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushTokenLookUp
TrueRuleChain=100.LookUpPushToken
TrueRuleChain=200.CheckPushTokenLookUpStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/000.InitPushTokenLookUp]


ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_ENTITLEMENT_NAME "VoWiFi"
AdornOps=setifnull DEG_UNIQUE_ID "00"
AdornOps=setifnull DEG_MDN "+34"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntIMSIString DEG_IMSI
#AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_DEVICE_DATA"



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/100.LookUpPushToken]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_APNS_TOKEN,DEG_APNS_TOKEN
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
#NotExistsErrorRuleChain=004.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntSessionStoreKeyExistsFlagInteger,=,0
#Conditions=DEG_EntSessionStoreErrorFlagInteger,!=,0
Operations=or
TrueRuleChain=000.SetErrorResponse
FalseRuleChain=000.CheckAPNSTokenStatus


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 01115
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_APNS_TOKEN,!=,""
Conditions=DEG_PUSH_NOTIFICATION_STATUS,=,6100
Operations=and
FalseRuleChain=010.CheckifCoreV1case
TrueRuleChain=000.CopyPushToken
TrueRuleChain=100.SendAPNSNotification

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case]

ClassName=ConditionalRule
Conditions=DEG_PUSH_TOKEN,!=,""
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=000.InitTempTokensTableLookup
FalseRuleChain=100.ExecuteTableLookUp
FalseRuleChain=010.Checkauxtable

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/000.InitTempTokensTableLookup]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_EntFeatureCodeTmpString DEG_TOPIC
AdornOps=copy DEG_EntIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TEMP_TOKENS"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case//100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_TEMP_TOKEN,DEG_TEMP_TOKEN
MapAttributes=DEG_TOPIC,DEG_TOPIC
NotExistsErrorRuleChain=004.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TEMP_TOKENS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable]

ClassName=ConditionalRule
Conditions=DEG_TEMP_TOKEN,!=,""
Conditions=DEG_TOPIC,=,"VoWiFi"
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=010.QueryPGW
#FalseRuleChain=020.DummyList
#FalseRuleChain=025.AddToList
FalseRuleChain=030.CallNotificiationRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/020.DummyList]

ClassName=AdornmentRule
AdornOps=set DEG_ListVowifipruebaString "VoWiFi:Tokenvowifiprueba"

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/025.AddToList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
ListAttribute=DEG_EntNotificationTokensList
InputAttribute=DEG_ListVowifipruebaString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/030.CallNotificiationRule]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=010.CheckNotificationSOAPRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/010.QueryPGW]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200T.SendNotificationTokensSoapRequestRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "VoWiFi"
AdornOps=set CUST_APN_IN_TriggerTypeString "provisioning-changed"
AdornOps=copy DEG_PUSH_TOKEN DEG_DEG_EntVoWifiAPNSTokenString
AdornOps=copy DEG_DEG_EntVoWifiAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/000.CopyPushToken]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "VoWiFi"
AdornOps=set CUST_APN_IN_TriggerTypeString "provisioning-changed"
AdornOps=copy DEG_APNS_TOKEN DEG_DEG_EntVoWifiAPNSTokenString
AdornOps=copy DEG_DEG_EntVoWifiAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "VoWiFi"
AdornOps=set CUST_APN_IN_TriggerTypeString "provisioning-changed"
AdornOps=copy DEG_TEMP_TOKEN DEG_DEG_EntVoWifiAPNSTokenString
AdornOps=copy DEG_DEG_EntVoWifiAPNSTokenString CUST_APN_IN_TokenString
AdornOps=setifnull DEG_MDN "+34"
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=setifnull DEG_UNIQUE_ID "00"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessVoWiFi/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/010.CheckifCoreV1case/010.Checkauxtable/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM]


ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
Conditions=DEG_EntAccountStatusTmpString,=,PROVISIONED
Operations=and
TrueRuleChain=010.Multi-SIMsignup
FalseRuleChain=020.EntitlementChanged

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup]

ClassName=RuleChain
RuleNames=000.InitPushTokenLookUp
RuleNames=100.LookUpPushToken
RuleNames=200.CheckPushTokenLookUpStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/000.InitPushTokenLookUp]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_ENTITLEMENT_NAME "Multi-SIM"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_DEVICE_DATA"



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/100.LookUpPushToken]


ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_APNS_TOKEN,DEG_APNS_TOKEN
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
NotExistsErrorRuleChain=004.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_EntSessionStoreKeyExistsFlagInteger,=,0
Conditions=DEG_EntSessionStoreErrorFlagInteger,!=,0
Operations=or
TrueRuleChain=000.SetErrorResponse
FalseRuleChain=000.CheckAPNSTokenStatus


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_APNS_TOKEN,!=,""
Conditions=DEG_PUSH_NOTIFICATION_STATUS,=,6100
Operations=and
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogError
TrueRuleChain=000.CopyPushToken
TrueRuleChain=100.InvokeAPNSInterface


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0107
AdornOps=set DEG_EntReturnMessageString "Push Notification not enabled For Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/100.LogError]


ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Push Notification not enabled!!
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/000.CopyPushToken]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "Multi-SIM"
AdornOps=set CUST_APN_IN_TriggerTypeString "multi-sim signup-changed"
AdornOps=copy DEG_APNS_TOKEN DEG_DEG_EntMultiSIMAPNSTokenString
AdornOps=copy DEG_DEG_EntMultiSIMAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/010.Multi-SIMsignup/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/100.InvokeAPNSInterface]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/020.EntitlementChanged]

ClassName=ConditionalRule
Conditions=DEG_PUSH_TOKEN,!=,""
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/020.EntitlementChanged/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0107
AdornOps=set DEG_EntReturnMessageString "Push Notification not enabled For Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/020.EntitlementChanged/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Push Notification not enabled!!
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/020.EntitlementChanged/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "Entitlements"
AdornOps=set CUST_APN_IN_TriggerTypeString "entitlements-changed"
AdornOps=copy DEG_PUSH_TOKEN DEG_DEG_EntMultiSIMAPNSTokenString
AdornOps=copy DEG_DEG_EntMultiSIMAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/300.LookUpTokensTable/200.CheckLookUpStatus/000.CheckIfKeyExists/000.IterateFeatureCodeList/ListIterationRule/000.ProcessMulti-SIM/020.EntitlementChanged/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus]

ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
Conditions=DEG_EntAPNSErrorFlagInteger,=,0
Operations=and
TrueRuleChain=000.SetEndTimestamp
TrueRuleChain=000.LogSuccessResponse
TrueRuleChain=100.CreateResponse
TrueRuleChain=200.InvokeEndAudit
FalseRuleChain=000.LogFailureResponse
FalseRuleChain=100.CreateResponse
FalseRuleChain=200.InvokeEndAudit

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus/000.SetEndTimestamp]

ClassName=AdornmentRule
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus/000.LogSuccessResponse]

ClassName=LogNMERule
LogLevel=INFO
Message=Entitlement Changed Notification Successfully Sent
Attributes=DEG_EntIMSIString
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntAccountStatusString
Attributes=DEG_EntReturnCodeInteger

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus/000.LogFailureResponse]

ClassName=LogNMERule
LogLevel=INFO
Message=Error In Sending Entitlement Changed Push Notification
Attributes=DEG_EntIMSIString
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntAccountStatusString
Attributes=DEG_EntReturnCodeInteger


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus/100.CreateResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_EntIMSIString,EntitlementChangeNotificationResponse.IMSI.CData
NMEToStructuredNMEMap=DEG_EntReturnCodeInteger,EntitlementChangeNotificationResponse.ReturnCode.CData
NMEToStructuredNMEMap=DEG_EntTimestampString,EntitlementChangeNotificationResponse.Timestamp.CData
SNMEType=EntitlementChangeNotification:Body

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/001.EntitlementChangeNotificationRuleChain/500.CheckNotificationSentStatus/200.InvokeEndAudit]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=008.EntitlementChangeNotificationEndAuditRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/002.DefaultUnsupportedOperationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=000.SetErrorResponse
RuleNames=100.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/002.DefaultUnsupportedOperationRuleChain/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0100
AdornOps=set DEG_EntReturnMessageString "Unsupported Operation"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/002.DefaultUnsupportedOperationRuleChain/100.LogErrorResponse]

Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unsupported operation received for Entitlement Notification.Please check the SOAP XML for incorrect request.

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/003.SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/003.SessionStoreDefaultErrorRuleChain/100.SetLookupErrorFlag]

AdornOps=set DEG_EntSessionStoreErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/003.SessionStoreDefaultErrorRuleChain/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/004.SessionStoreKeyNotExistsRuleChain]

ClassName=RuleChain
RuleNames=000.ClearFalag

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/004.SessionStoreKeyNotExistsRuleChain/000.ClearFalag]

AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/005.GenerateAuditAndNRBEventsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DumpAuditRecord
RuleNames=200.DumpMonitoringTransactions


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/005.GenerateAuditAndNRBEventsRuleChain/100.DumpAuditRecord]

ClassName=com.hp.siu.sessionserver.rules.NMEStoreRule
NMEStore=AuditNmeStore


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/005.GenerateAuditAndNRBEventsRuleChain/200.DumpMonitoringTransactions]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEG_NrbMonitoringSessionIdList
RequestAttributes=DEG_AuditProcessingNodeString
RequestAttributes=DEG_AuditTimestampLong
RequestAttributes=DEG_AuditInterfaceString
RequestAttributes=DEG_AuditInOutString
RequestAttributes=DEG_AuditResultCodeString
RequestAttributes=DEG_AuditMdnString
RequestAttributes=DEG_AuditIMSIString
RequestAttributes=DEG_AuditTransactionTypeString
RequestAttributes=DEG_AuditSourceDestinationString
RequestAttributes=DEG_AuditNRBMessageString
RequestAttributes=DEG_AuditMessageString
RuleChain=006.DumpMonitoringTransactionsRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DumpMonitoringTransactions

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions]

ClassName=com.hp.siu.collector.rules.ConditionalRule
TrueRuleChain=100.DumpMonitoringTransactions


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/Condition]

ClassName=com.hp.usage.script.rules.ExpressionCondition
Expression=DEG_NrbMonitoringSessionIdList != null

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions]


ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_NrbMonitoringSessionIdList
RuleChain=100.InsertMonitoringTransactionToDb
TmpAttributeName=DEG_NrbMonitoringSessionIdString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORINGID_GENERATOR

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.GenerateTransactionId
RuleNames=110.PopulateMonitoringTransactionAttributes
RuleNames=120.InitInsert2Db
RuleNames=200.Insert2Db
RuleNames=300.CheckCreateStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/100.GenerateTransactionId]

AdornOps=setsystime DEG_Tmp1Long
AdornOps=copy DEG_Tmp1Long DEG_Tmp1String
AdornOps=+ DEG_Tmp1String DEG_MSESSIONTRANSID DEG_MSESSIONTRANSID
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/110.PopulateMonitoringTransactionAttributes]

AdornOps=copy DEG_AuditProcessingNodeString DEG_MSESSIONPROCID
AdornOps=copy DEG_AuditTimestampLong DEG_MSESSIONTIMESTAMP
AdornOps=copy DEG_AuditInterfaceString DEG_MSESSIONINTERFACE
AdornOps=copy DEG_AuditInOutString DEG_MSESSIONINOUT
AdornOps=copy DEG_AuditResultCodeString DEG_MSESSIONRESULTCODE
AdornOps=copy DEG_AuditMdnString DEG_MSESSIONMDN
AdornOps=copy DEG_AuditIMSIString DEG_MSESSIONIMSI
AdornOps=copy DEG_AuditTransactionTypeString DEG_MSESSIONTRANSACTIONTYPE
AdornOps=copy DEG_AuditSourceDestinationString DEG_MSESSIONSOURCEDESTINATION
AdornOps=copy DEG_AuditNRBMessageString DEG_MSESSIONMESSAGE
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/120.InitInsert2Db]

AdornOps=set DEG_EntSessionStoreErrorFlagInteger 0
AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_NrbMonitoringSessionIdString DEG_MSESSIONID
AdornOps=set log_DB_Operation "CREATE"
AdornOps=set log_Table_Name "DEG_MONITORING_TRANSACTIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/200.Insert2Db]


ClassName=com.hp.siu.sessionserver.rules.CreateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
SessionStore=DEG_MONITORING_TRANSACTIONS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/300.CheckCreateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=100.ErrorLog

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/006.DumpMonitoringTransactionsRuleChain/100.DumpMonitoringTransactions/100.DumpMonitoringTransactions/100.InsertMonitoringTransactionToDb/MatchRule/300.CheckCreateStatus/100.ErrorLog]

Attributes=DEG_MSESSIONID
Attributes=DEG_MSESSIONTRANSID
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_MSESSIONTIMESTAMP
Attributes=DEG_MSESSIONINTERFACE
Attributes=DEG_MSESSIONINOUT
Attributes=DEG_MSESSIONRESULTCODE
Attributes=DEG_MSESSIONMDN
Attributes=DEG_MSESSIONIMSI
Attributes=DEG_MSESSIONTRANSACTIONTYPE
Attributes=DEG_MSESSIONSOURCEDESTINATION
Attributes=DEG_MSESSIONMESSAGE
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to create entry in DEG_MONITORING_TRANSACTIONS session store
NullAlso=true
UseProperty=true


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
RuleNames=200.GenerateAuditAndNRBEvents

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString 0
AdornOps=setifnull DEG_MDN 0
AdornOps=setifnull DEG_EntIMSIString ""
AdornOps=setifnull DEG_UNIQUE_ID ""
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=copy DEG_EntIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "EntitlementChangeNotification"
AdornOps=set DEG_AuditSourceDestinationString "NSERVER"
AdornOps=set DEG_AuditSourceDestinationVersionString "NA"
AdornOps=set DEG_AuditDurationString 0
Attributes=set DEG_AuditDeviceTypeString ""
AdornOps=copy DEG_UNIQUE_ID DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
ClassName=AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "NSERVER TO DEG  -> Received Entitlement change notification request "
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

ClassName=com.hp.siu.collector.rules.AdornmentRule

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntIMSIString DEG_AuditMessageString

AdornOps=set DEG_Tmp1String "FeatureCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntFeatureCodeString DEG_AuditMessageString

AdornOps=set DEG_Tmp1String "AccountStatus="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntAccountStatusString DEG_AuditMessageString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Received Entitlement Change Notification"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/007.EntitlementChangeNotificationStartAuditRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=005.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
RuleNames=200.GenerateAuditAndNRBEvents

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=101.PopulateReturnCode
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_EntDurationLong
AdornOps=- DEG_EntDurationLong DEG_EntStartTimestampLong DEG_AuditDurationString
AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=copy DEG_AuditTimestampLong DEG_EntTimestampString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=setifnull DEG_MDN 0
AdornOps=setifnull DEG_EntIMSIString ""
AdornOps=setifnull DEG_UNIQUE_ID ""
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=copy DEG_EntIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "EntitlementChangeNotification"
AdornOps=set DEG_AuditSourceDestinationString "NSERVER"
AdornOps=set DEG_AuditSourceDestinationVersionString "NA"
Attributes=set DEG_AuditDeviceTypeString ""
AdornOps=copy DEG_UNIQUE_ID DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
ClassName=AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode]

ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode/TrueRule]

ClassName=AdornmentRule
AdornOps=set DEG_AuditResultCodeString 1

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode/FalseRule]

ClassName=AdornmentRule
AdornOps=copy DEG_EntReturnCodeInteger DEG_AuditResultCodeString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO NSERVER  -> Sending Response to Entitlement Server "
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

ClassName=com.hp.siu.collector.rules.AdornmentRule

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntIMSIString DEG_AuditMessageString

AdornOps=set DEG_Tmp1String "FeatureCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntFeatureCodeString DEG_AuditMessageString

AdornOps=set DEG_Tmp1String "AccountStatus="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntAccountStatusString DEG_AuditMessageString

AdornOps=set DEG_Tmp1String "ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntReturnCodeInteger DEG_AuditMessageString


AdornOps=set DEG_Tmp1String "ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_EntReturnMessageString DEG_AuditMessageString



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=copy DEG_EntReturnMessageString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/008.EntitlementChangeNotificationEndAuditRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=005.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain]

ClassName=RuleChain
RuleNames=000.LogAPNSInterfaceInvoke
RuleNames=100.InvokeAPNSInterface
RuleNames=200.CheckNotificationSentStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus]

ClassName=ConditionalRule
Conditions=DEG_EntReturnCodeInteger,=,0000
Conditions=CUST_APN_OUT_APNSSentStatusString,=,"Successful APNS connection"
Operations=and
TrueRuleChain=000.LogSuccessResponse
FalseRuleChain=000.LogFailureResponse
FalseRuleChain=100.SetErrorFlag


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/000.LogSuccessResponse]

ClassName=LogNMERule
LogLevel=INFO
Message=Entitlement Changed Notification Successfully Sent
Attributes=DEG_EntIMSIString
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntAccountStatusString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=DEG_DEG_EntVoWifiAPNSTokenString
Attributes=DEG_DEG_EntMultiSIMAPNSTokenString
Attributes=DEG_DEG_EntVolteAPNSTokenString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/000.LogFailureResponse]

ClassName=LogNMERule
LogLevel=INFO
Message=Error In Sending Entitlement Changed Push Notification
Attributes=DEG_EntIMSIString
Attributes=DEG_EntFeatureCodeString
Attributes=DEG_EntAccountStatusString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=DEG_DEG_EntVoWifiAPNSTokenString
Attributes=DEG_DEG_EntMultiSIMAPNSTokenString
Attributes=DEG_DEG_EntVolteAPNSTokenString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/100.SetErrorFlag]

ClassName=AdornmentRule
AdornOps=set DEG_EntAPNSErrorFlagInteger 1

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/000.LogAPNSInterfaceInvoke]


Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=INFO
Message=Sending request to APNS Interface::

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientRule
CommunicationErrorRuleChain=CommunicationErrorRuleChain
Description= NMERPCClientRule invokes a RuleChain in a remote session server and passes an NME to the remote session server.
NMERPCClientAdapter=APNSNMERPCClientAdapter
NoConnectionErrorRuleChain=NoConnectionErrorRuleChain
Router=Router1
MessageType=APNSRequestMessage
TimeoutRuleChain=TimeoutRuleChain
#PrimaryServer=PrimaryServer,APNSRequestMessage
#UsePrimaryOnReconnect=True

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain/100.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=TimeOut for the APNS Connection::

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain/100.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=Communication Error with APNS Interface::

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain/100.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0105
AdornOps=set DEG_EntReturnMessageString "Internal Server Error"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/009.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=No Connection Error for APNS Interface::

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain]

ClassName=RuleChain
RuleNames=001D.LogValuesList
RuleNames=001B.ValidateList


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001D.LogValuesList]

Attributes=DEG_EntNotificationTokensList
Attributes=DEG_TOPIC
Attributes=DEG_TEMP_TOKEN
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Check values--------------------


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList]

ClassName=ConditionalRule
Conditions=DEG_EntNotificationTokensList,=,"null"
TrueRuleChain=003.SetErrorResponse
TrueRuleChain=004.LogErrorResponse
FalseRuleChain=001A.ListIterationRule

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/003.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0106
AdornOps=set DEG_EntReturnMessageString "Unknown Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/004.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unknown Subscriber
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_EntNotificationTokensList
TmpAttributeName=DEG_EntNotificationTokensTmpString
RuleChain=001B.Splitdata
RuleChain=001C.Insert2Db
RuleChain=001D.LogValues
RuleChain=001H.ProcessTopic
#RuleChain=001E.SeeTopicVolte
#RuleChain=001F.SeeTopicVowifi

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001B.Splitdata]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
SourceAttribute=DEG_EntNotificationTokensTmpString
Operation=split
DestinationAttribute=DEG_TOPIC
DestinationAttribute=DEG_TEMP_TOKEN
RegExPattern=^(.*):(.*)$

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001C.Insert2Db]

ClassName=com.hp.siu.sessionserver.rules.CreateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=003.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
SessionStore=DEG_TEMP_TOKENS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001D.LogValues]

Attributes=DEG_EntNotificationTokensTmpString
Attributes=DEG_TOPIC
Attributes=DEG_TEMP_TOKEN
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntFeatureCodeTmpString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Check values*******************

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic]

ClassName=ConditionalRule
Conditions=DEG_TOPIC,=,"VoLTE"
Conditions=DEG_EntFeatureCodeTmpString,=,"VoLTE"
TrueRuleChain=001E.SeeTopicVolte
FalseRuleChain=001F.SeeTopicVowifi

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte]

ClassName=ConditionalRule
Conditions=DEG_TOPIC,=,"VoLTE"
Conditions=DEG_EntFeatureCodeTmpString,=,"VoLTE"
Conditions=DEG_EntNotificationTokensTmpString,!=," "
TrueRuleChain=002A.SendtoAPNSVoLTE
FalseRuleChain=003.SetErrorResponse
FalseRuleChain=004.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/003.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0120
AdornOps=set DEG_EntReturnMessageString "Unsupported Feature Code"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/004.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unsupported Feature Code
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi]

ClassName=ConditionalRule
Conditions=DEG_TOPIC,=,"VoWiFi"
Conditions=DEG_EntFeatureCodeTmpString,=,"VoWiFi"
Conditions=DEG_EntNotificationTokensTmpString,!=," "
TrueRuleChain=002C.SendtoAPNSVoWiFi
#FalseRuleChain=003.SetErrorResponse
#FalseRuleChain=004.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/003.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0114
AdornOps=set DEG_EntReturnMessageString "Unsupported Feature Code"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/004.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unsupported Feature Code
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/002A.SendtoAPNSVoLTE]

ClassName=ConditionalRule
Conditions=DEG_TEMP_TOKEN,!=,""
Conditions=DEG_TOPIC,=,"VoLTE"
Conditions=DEG_EntReturnCodeInteger,=,0000
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/002A.SendtoAPNSVoLTE/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0106
AdornOps=set DEG_EntReturnMessageString "Unknown Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/002A.SendtoAPNSVoLTE/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unknown Subscriber
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/002A.SendtoAPNSVoLTE/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "Entitlements"
AdornOps=set CUST_APN_IN_TriggerTypeString "entitlements-changed"
AdornOps=copy DEG_TEMP_TOKEN DEG_DEG_EntVoLTEAPNSTokenString
AdornOps=copy DEG_DEG_EntVoLTEAPNSTokenString CUST_APN_IN_TokenString
AdornOps=setifnull DEG_MDN "+34"
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=setifnull DEG_UNIQUE_ID "00"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001E.SeeTopicVolte/002A.SendtoAPNSVoLTE/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/002C.SendtoAPNSVoWiFi]

ClassName=ConditionalRule
Conditions=DEG_TEMP_TOKEN,!=,""
Conditions=DEG_TOPIC,=,"VoWiFi"
TrueRuleChain=000.InitPushNotification
TrueRuleChain=100.SendAPNSNotification
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogErrorResponse

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/002C.SendtoAPNSVoWiFi/000.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_EntReturnCodeInteger 0106
AdornOps=set DEG_EntReturnMessageString "Unknown Subscriber"
AdornOps=setsystime DEG_EntEndTimestampLong
AdornOps=copy DEG_EntEndTimestampLong DEG_EntTimestampString

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/002C.SendtoAPNSVoWiFi/100.LogErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Message=Unknown Subscriber
Attributes=DEG_EntReturnCodeInteger
Attributes=DEG_EntReturnMessageString
LogLevel=INFO

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/002C.SendtoAPNSVoWiFi/000.InitPushNotification]

ClassName=AdornmentRule
AdornOps=set CUST_APN_IN_TopicString "VoWiFi"
AdornOps=set CUST_APN_IN_TriggerTypeString "provisioning-changed"
AdornOps=copy DEG_TEMP_TOKEN DEG_DEG_EntVoWifiAPNSTokenString
AdornOps=copy DEG_DEG_EntVoWifiAPNSTokenString CUST_APN_IN_TokenString
AdornOps=setifnull DEG_MDN "+34"
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=setifnull DEG_UNIQUE_ID "00"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/RuleChains/010.CheckNotificationSOAPRuleChain/001B.ValidateList/001A.ListIterationRule/001H.ProcessTopic/001F.SeeTopicVowifi/002C.SendtoAPNSVoWiFi/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=009.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SessionStores]

ClassName=com.hp.siu.sessionserver.SessionStoreManager
SessionStoreNames=DEG_MONITORING_TRANSACTIONS_SessionStore
SessionStoreNames=DEG_DEVICE_DATA_SessionStore
SessionStoreNames=DEG_TOKENS_SessionStore
SessionStoreNames=DEG_TEMP_TOKENS_SessionStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SessionStores/DEG_MONITORING_TRANSACTIONS_SessionStore]

Attributes=DEG_MSESSIONID,key
Attributes=DEG_MSESSIONTRANSID,key
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_MSESSIONTIMESTAMP
Attributes=DEG_MSESSIONINTERFACE
Attributes=DEG_MSESSIONINOUT
Attributes=DEG_MSESSIONRESULTCODE
Attributes=DEG_MSESSIONMDN
Attributes=DEG_MSESSIONIMSI
Attributes=DEG_MSESSIONTRANSACTIONTYPE
Attributes=DEG_MSESSIONSOURCEDESTINATION
Attributes=DEG_MSESSIONMESSAGE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy2
DatabaseId=DEG_MONITORING_TRANSACTIONS
DbSchema=${DBSCHEMA_NRB}
MaxDatabaseConnections=${PROV_MAX_DBCONN_MONI_TRANS}
SQLTypeMap=DEG_MSESSIONID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTRANSID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONPROCID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTIMESTAMP,BIGINT
SQLTypeMap=DEG_MSESSIONINTERFACE,VARCHAR(10)
SQLTypeMap=DEG_MSESSIONINOUT,VARCHAR(3)
SQLTypeMap=DEG_MSESSIONRESULTCODE,VARCHAR(15)
SQLTypeMap=DEG_MSESSIONMDN,BIGINT
SQLTypeMap=DEG_MSESSIONIMSI,VARCHAR(64)
SQLTypeMap=DEG_MSESSIONTRANSACTIONTYPE,VARCHAR(50)
SQLTypeMap=DEG_MSESSIONSOURCEDESTINATION,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONMESSAGE,VARCHAR(512)

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SessionStores/DEG_DEVICE_DATA_SessionStore]

Attributes=DEG_UNIQUE_ID,key
Attributes=DEG_ENTITLEMENT_NAME,key
Attributes=DEG_IMSI
Attributes=DEG_APNS_TOKEN
Attributes=DEG_OLD_APNS_TOKEN
Attributes=DEG_PROVISIONING_STATUS
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_SERVICE_MGMT_POSTDATA
Attributes=DEG_DISPLAY_NAME
Attributes=DEG_ADDRESS_STATUS
Attributes=DEG_TC_STATUS
Attributes=DEG_ADDR_UPDATE_POSTDATA
Attributes=DEG_ADDR_REFID
Attributes=DEG_ADDR_REFID_EXP_DATE
Attributes=DEG_LASTUPDATE
Attributes=DEG_SIP_USERNAME
Attributes=TT_AUTOTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_DEVICE_DATA
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_DEVICE_DATA}
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_ENTITLEMENT_NAME,VARCHAR(32)
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_APNS_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_OLD_APNS_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_PROVISIONING_STATUS,INTEGER
SQLTypeMap=DEG_PUSH_NOTIFICATION_STATUS,INTEGER
SQLTypeMap=DEG_SERVICE_MGMT_POSTDATA,VARCHAR(256)
SQLTypeMap=DEG_DISPLAY_NAME,VARCHAR(128)
SQLTypeMap=DEG_ADDRESS_STATUS,INTEGER
SQLTypeMap=DEG_TC_STATUS,INTEGER
SQLTypeMap=DEG_ADDR_UPDATE_POSTDATA,VARCHAR(2048)
SQLTypeMap=DEG_ADDR_REFID,VARCHAR(64)
SQLTypeMap=DEG_ADDR_REFID_EXP_DATE,DATE
SQLTypeMap=DEG_LASTUPDATE,DATE
SQLTypeMap=DEG_SIP_USERNAME,VARCHAR(256)
SQLTypeMap=TT_AUTOTIMESTAMP,BINARY

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SessionStores/DEG_TEMP_TOKENS_SessionStore]
Attributes=DEG_IMSI,key
Attributes=DEG_TOPIC,key
Attributes=DEG_TEMP_TOKEN
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_TEMP_TOKENS
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_DEVICE_DATA}
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_TOPIC,VARCHAR(64)
SQLTypeMap=DEG_TEMP_TOKEN,VARCHAR(64)

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SessionStores/DEG_TOKENS_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_MDN
Attributes=DEG_UNIQUE_ID
Attributes=DEG_SUBSTOKEN
Attributes=DEG_PUSH_TOKEN
Attributes=DEG_TOKENSTATUS
Attributes=DEG_AUTHENTICATION_TYPE
Attributes=DEG_AUTHENTICATION_SUBTYPE
Attributes=DEG_APP_TOKEN_FLAG
Attributes=DEG_AUTH_COUNT
Attributes=DEG_BLACKLIST_FLAG
Attributes=DEG_FULLAUTHTIMESTAMP
Attributes=DEG_EVENTTIMESTAMP
Attributes=TT_AUTOTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_TOKENS
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_TOKENS}
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_MDN,BIGINT
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_SUBSTOKEN,CHAR(28)
SQLTypeMap=DEG_PUSH_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_TOKENSTATUS,CHAR(2)
SQLTypeMap=DEG_AUTHENTICATION_TYPE,CHAR(4)
SQLTypeMap=DEG_AUTHENTICATION_SUBTYPE,VARCHAR(32)
SQLTypeMap=DEG_APP_TOKEN_FLAG,TINYINT
SQLTypeMap=DEG_AUTH_COUNT,TINYINT
SQLTypeMap=DEG_BLACKLIST_FLAG,TINYINT
SQLTypeMap=DEG_FULLAUTHTIMESTAMP,BIGINT
SQLTypeMap=DEG_EVENTTIMESTAMP,BIGINT
SQLTypeMap=TT_AUTOTIMESTAMP,BINARY(8)

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/NMEStores]

ClassName=NMEStoreManager
NMEStoreNames=AuditNmeStore

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/NMEStores/AuditNmeStore]

ClassName=AsynchNMEStore
NMEBatchSize=100
QueueSize=10000

[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/NMEStores/AuditNmeStore/PersistentStore]

Attributes=DEG_AuditFormatIdString
Attributes=DEG_AuditTimestampLong
Attributes=DEG_AuditProcessingNodeString
Attributes=DEG_AuditInterfaceString
Attributes=DEG_AuditInOutString
Attributes=DEG_AuditResultCodeString
Attributes=DEG_AuditMdnString
Attributes=DEG_AuditIMSIString
Attributes=DEG_AuditTransactionTypeString
Attributes=DEG_AuditSourceDestinationString
Attributes=DEG_AuditSourceDestinationVersionString
Attributes=DEG_AuditDurationString
Attributes=DEG_AuditChannelIdString
Attributes=DEG_AuditChannelNameString
Attributes=DEG_AuditASPServiceIdString
Attributes=DEG_AuditASPServiceNameString
Attributes=DEG_AuditASPIdString
Attributes=DEG_AuditASPNameString
Attributes=DEG_AuditNRBMessageString
Attributes=DEG_AuditMessageString
Attributes=DEG_AuditSessionIdString
Attributes=DEG_AuditDeviceTypeString
Attributes=DEG_AuditEntitlementNameString
Attributes=DEG_AuditUniqueIDString
ClassName=FilePersistentStore
DataDir=${ENT_AUDIT_DATA_DIR}
FileNameTemplate=${ENT_AUDIT_BINARY_FILE_NAME}
FileNameTZ=UTC
GenerateEmptyFiles=false


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/NMEStores/AuditNmeStore/PersistentStore/FlushPolicy]

ClassName=ClockTimeSessionServerFlushPolicy
ClockInterval=10s
MaxNMEs=100000



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Logging]

ClassName=com.hp.siu.serverutils.SvrLogManager
COMPRESS=true
FILECOUNT=50
HandlerNames=LogHandler
Loggers=org.jsmpp,INFO,false
LOGLINELIMIT=500000


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Logging/LogHandler]

ClassName=com.hp.siu.serverutils.LogClassLoader
FILECOUNT=-1
FormatterClass=com.hp.siu.utils.LegacyLogFormatter
HandlerClass=com.hp.usage.logging.RollingLogFileHandler
LogFile=${IUM_LOG_DIR}/Alarming_${ENT_INTERFACE_PROCESS_NAME}.log
LogFileRollPolicyClass=TimestampLogFileRollPolicy
LoggerNames=com.hp
LogLevel=WARNING
LOGLINELIMIT=50000
TIMESTAMPSUFFIX='.'yyyyMMddHHmmss


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/ManagementService]

ClassName=com.hp.usage.management.ManagementService



[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SnmeLoader]

ClassName=com.hp.usage.nme.schemaloader.NMESchemaLoader
Schema=SnmeSchemaLink


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/SnmeLoader/SnmeSchemaLink]

Link=/SNMESchema


[/deployment/<%SIU_INSTANCE%>/DEG_EntitlementChangeNotification_01/Properties]

JVMOPTS=%DEFAULTS%
JVMOPTS=${ENT_MIN_HEAP_SIZE}
JVMOPTS=${ENT_MAX_HEAP_SIZE}
JVMOPTS=-Duser.timezone=${TIMEZONE}
JVMOPTS=-XX:+DisableExplicitGC
JVMOPTS=-XX:+UseParNewGC
JVMOPTS=-verbose:gc
JVMOPTS=-XX:+PrintGCDetails
JVMOPTS=-XX:+PrintGCTimeStamps
JVMOPTS=-Xloggc:%VARROOT%/DEG_GcLogs/DEG_EntitlementChangeNotificationInterface_gc.log
JVMOPTS=-XX:+UseConcMarkSweepGC
JVMOPTS=-XX:+UseFastAccessorMethods
JVMOPTS=-XX:+ScavengeBeforeFullGC
JVMOPTS=-XX:SurvivorRatio=1
JVMPROPERTIES=%DEFAULTS%
JVMPROPERTIES=LogRequestInOutLevel1=true
JVMPROPERTIES=LogRequestFlowLevel1=true
JVMPROPERTIES=LogRequestIssueLevel1=true
PROCESSARGS=-l 4
STARTUPMODE=${STARTUPMODE_AUTO}



