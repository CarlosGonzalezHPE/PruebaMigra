

[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>]

ClassName=com.hp.siu.adminagent.procmgr.ContextServerProcess
Description=DEG eSIM Provisioning Interface
JDBCConnectionPoolService=PoolService

@Include(pattern="**")
@Include(pattern="**#*", merge=true)
SNMESchemaLoader=SnmeLoader
StartClassName=com.hp.siu.sessionserver.SessionServer


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors]

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=100.eSIMProvisioningConnector
ConnectorNames=200.APNSNMERPCClientConnector


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/100.eSIMProvisioningConnector]

AcceptCount=${ESIM_HTTP_ACCEPT_COUNT}
ClassName=com.hp.siu.plugins.tomcat.HttpConnector
Context=eSIMProvisioning
Managed=${MANAGED_SETUP}
MaxProcessors=${ESIM_HTTP_CON_MAX_PROCESSORS}
MaxSpareProcessors=${ESIM_HTTP_CON_MIN_PROCESSORS}
MinProcessors=${ESIM_HTTP_CON_MIN_PROCESSORS}
Port=${ESIM_HTTP_PORT}
UseContextIdentifierOnly=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/100.eSIMProvisioningConnector/eSIMProvisioning]

ClassName=com.hp.usage.soap.SOAPContextProvider
ContextIdentifier=eSIMProvisioning
DefaultRuleChain=003.DefaultUnsupportedOperationRuleChain
FaultCodeField=DEG_eSIMProvFaultCodeString
FaultStringField=DEG_eSIMProvFaultMessageString
NMENamespace=eSIMProvisioning
OperationIdField=DEG_eSIMProvOperationIdNMEString
ServiceMap=eSIMCreate,110.eSIMCreateRuleChain
ServiceMap=eSIMActivate,120.eSIMActivateRuleChain
ServiceMap=eSIMUpdateStatus,130.eSIMUpdateStatusRuleChain
ServiceMap=eSIMChangeImsi,140.eSIMChangeImsiRuleChain
ServiceMap=eSIMChangeSecondaryImsi,150.eSIMChangeSecondaryImsiRuleChain
ServiceMap=eSIMDelete,160.eSIMDeleteRuleChain
WSDLFile=${ESIM_STORE_WSDL_FILE}


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/200.APNSNMERPCClientConnector]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientAdapter
Connection=PrimaryServer
Description=NMERPCClientAdapter is a connector to a remote session server that provides the ability to invoke rule chains in the remote session server and pass an NME.
MessageTypes=APNSRequestMessage
Name=APNSNMERPCClientAdapter
Routers=Router1


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/200.APNSNMERPCClientConnector/APNSRequestMessage]

ClassName=com.hp.usage.nme.rpc.codec.NMERPCMessageType
Description=NMERPCMessageType defines the NME attributes to send to a remote session server and the rule chain in the remote session server to invoke.
RequestAttributes=CUST_APN_IN_MDNLong
RequestAttributes=CUST_APN_IN_IMSIString
RequestAttributes=CUST_APN_IN_TopicString
RequestAttributes=CUST_APN_IN_TriggerTypeString
RequestAttributes=CUST_APN_IN_UniqueIdString
RequestAttributes=CUST_APN_IN_TokenString
RequestAttributes=CUST_APN_IN_PushNotificationStatus
ResponseAttributes=CUST_APN_OUT_APNSSentStatusString
RuleChain=CUSTRC_Apple_APNS_SendNotification


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/200.APNSNMERPCClientConnector/PrimaryServer]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientConnection
Description=NMERPCClientConnection creates a connection to a remote session server.
MaxAllowedRequestTimeouts=${ESIM_APNS_ALLOWED_TIMEOUTS}
MaxPendingRequests=512
ReconnectDelay=${ESIM_APNS_RECONNECT_DELAY}
ResponseTimeout=${ESIM_APNS_TIMEOUT}


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/200.APNSNMERPCClientConnector/Router1]

ClassName=com.hp.usage.framework.connector.router.StaticRouter
Description=StaticRouter identifies destinations that a message can be sent to.
Destinations=${APNS_INTERFACE_IP}:10000


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Connectors/200.APNSNMERPCClientConnector/Transport]

ClassName=com.hp.usage.transport.tcp.TCPTransport


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Logging]

ClassName=com.hp.siu.serverutils.SvrLogManager
COMPRESS=true
FILECOUNT=50
HandlerNames=LogHandler
LOGLINELIMIT=500000
Loggers=org.jsmpp,INFO,false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Logging/LogHandler]

ClassName=com.hp.siu.serverutils.LogClassLoader
FILECOUNT=-1
FormatterClass=com.hp.siu.utils.LegacyLogFormatter
HandlerClass=com.hp.usage.logging.RollingLogFileHandler
LOGLINELIMIT=50000
LogFile=/var/opt/<%SIU_INSTANCE%>/log/Alarming_<%PROCESS%>.log
LogFileRollPolicyClass=TimestampLogFileRollPolicy
LoggerNames=com.hp
LogLevel=WARNING
TIMESTAMPSUFFIX='.'yyyyMMddHHmmss


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/ManagementService]

ClassName=com.hp.usage.management.ManagementService


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/NMEStores]

ClassName=NMEStoreManager
NMEStoreNames=AuditNmeStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/NMEStores/AuditNmeStore]

ClassName=AsynchNMEStore
NMEBatchSize=100
QueueSize=10000


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/NMEStores/AuditNmeStore/PersistentStore]

Attributes=DEG_AuditFormatIdString
Attributes=DEG_AuditTimestampLong
Attributes=DEG_AuditProcessingNodeString
Attributes=DEG_AuditInterfaceString
Attributes=DEG_AuditInOutString
Attributes=DEG_AuditResultCodeString
Attributes=DEG_AuditMdnString
Attributes=DEG_AuditIMSIString
Attributes=DEG_AuditTransactionTypeString
Attributes=DEG_AuditSourceDestinationString
Attributes=DEG_AuditSourceDestinationVersionString
Attributes=DEG_AuditDurationString
Attributes=DEG_AuditChannelIdString
Attributes=DEG_AuditChannelNameString
Attributes=DEG_AuditASPServiceIdString
Attributes=DEG_AuditASPServiceNameString
Attributes=DEG_AuditASPIdString
Attributes=DEG_AuditASPNameString
Attributes=DEG_AuditNRBMessageString
Attributes=DEG_AuditMessageString
Attributes=DEG_AuditSessionIdString
Attributes=DEG_AuditDeviceTypeString
Attributes=DEG_AuditEntitlementNameString
Attributes=DEG_AuditUniqueIDString
ClassName=FilePersistentStore
DataDir=${ESIM_AUDIT_DATA_DIR}
FileNameTemplate=${ESIM_AUDIT_BINARY_FILE_NAME}
FileNameTZ=UTC
GenerateEmptyFiles=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/NMEStores/AuditNmeStore/PersistentStore/FlushPolicy]

ClassName=ClockTimeSessionServerFlushPolicy
ClockInterval=10s
MaxNMEs=100000


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/PoolService]

ClassName=com.hp.usage.jdbc.poolservice.JDBCConnectionPoolService
ConnectionPools=DEG_DSN_TT_eSIM_Pool1


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/PoolService/CommonConnectionPolicies]

ClassName=com.hp.usage.jdbc.poolservice.client.ConnectionPolicies
Policies=Policy1


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/PoolService/CommonConnectionPolicies/Policy1]

ClassName=com.hp.usage.jdbc.poolservice.client.SimpleConnectionPolicy
Pools=DEG_DSN_TT_eSIM_Pool1


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/PoolService/DEG_DSN_TT_eSIM_Pool1]

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${DEG_CLIENT_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
InitialPoolSize=100
MaxPoolSize=200
MinPoolSize=100
Password=${PASSWD_DEG_DSN}
RetryCount=1
RetryInterval=300
User=${USER_DEG_DSN}


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/Properties]

JVMOPTS=%DEFAULTS%
JVMOPTS=-Xms256m
JVMOPTS=-Xmx256m
JVMOPTS=-Duser.timezone=UTC
JVMOPTS=-XX:+DisableExplicitGC
JVMOPTS=-XX:+UseParNewGC
JVMOPTS=-verbose:gc
JVMOPTS=-XX:+PrintGCDetails
JVMOPTS=-XX:+PrintGCTimeStamps
JVMOPTS=-Xloggc:%VARROOT%/DEG_GcLogs/DEG_eSIMProvisioningInterface_gc.log
JVMOPTS=-XX:+UseConcMarkSweepGC
JVMOPTS=-XX:+UseFastAccessorMethods
JVMOPTS=-XX:+ScavengeBeforeFullGC
JVMOPTS=-XX:SurvivorRatio=1
JVMPROPERTIES=%DEFAULTS%
JVMPROPERTIES=LogRequestInOutLevel1=true
JVMPROPERTIES=LogRequestFlowLevel1=true
JVMPROPERTIES=LogRequestIssueLevel1=true
PROCESSARGS=-l 4
STARTUPMODE=Automatic


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains]

ClassName=RuleChainManager
MaxPoolSize=${ESIM_RULECHAIN_MAX_POOL_SIZE}
MinPoolSize=${ESIM_RULECHAIN_MIN_POOL_SIZE}
RuleChainNames=000.SessionStoreDefaultErrorRuleChain
RuleChainNames=001.SessionStoreNotExistsRuleChain
RuleChainNames=002.SessionStoreDuplicateRuleChain
RuleChainNames=003.DefaultUnsupportedOperationRuleChain
RuleChainNames=004.SessionStoreCreateRuleChain
RuleChainNames=005.SessionStoreDefaultErrorDeviceDataRuleChain
RuleChainNames=006.SessionStoreKeyNotExistsDeviceDataRuleChain
RuleChainNames=007.GenerateAuditAndNRBEventsRuleChain
#RuleChainNames=008.DumpMonitoringTransactionsRuleChain
RuleChainNames=009.eSIMProvisioningStartAuditRuleChain
RuleChainNames=010.eSIMProvisioningEndAuditRuleChain
RuleChainNames=110.eSIMCreateRuleChain
RuleChainNames=120.eSIMActivateRuleChain
RuleChainNames=130.eSIMUpdateStatusRuleChain
RuleChainNames=140.eSIMChangeImsiRuleChain
RuleChainNames=150.eSIMChangeSecondaryImsiRuleChain
RuleChainNames=160.eSIMDeleteRuleChain
RuleChainNames=200.InitializeESIMRuleChain
RuleChainNames=220.ManageESIMCreateRuleChain
RuleChainNames=230.ManageESIMActivateRuleChain
RuleChainNames=240.ManageESIMDeleteRuleChain
RuleChainNames=250.SendResponseRuleChain
RuleChainNames=260.ExecuteESIMRuleChain
RuleChainNames=270.ManageESIMUpdateStatusRuleChain
RuleChainNames=280.ManageESIMChangeImsiRuleChain
RuleChainNames=290.ManageESIMChangeSecondaryImsiRuleChain
RuleChainNames=300.ExecuteEIMSIDeleteRuleChain
RuleChainNames=310.ExecuteEIMSIUpdateStatusActiveRuleChain
RuleChainNames=320.ExecuteEIMSIUpdateStatusInActiveRuleChain
RuleChainNames=400.PushNotificationToAPNSRuleChain
RuleChainNames=500.SendAPNSNotificationRuleChain


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/000.SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/000.SessionStoreDefaultErrorRuleChain/100.SetLookupErrorFlag]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 1
AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/000.SessionStoreDefaultErrorRuleChain/200.LogAlarming]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/001.SessionStoreNotExistsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set2CeroDuplicateKeyFlag


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/001.SessionStoreNotExistsRuleChain/100.Set2CeroDuplicateKeyFlag]

AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/002.SessionStoreDuplicateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set2OneDuplicateKeyFlag


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/002.SessionStoreDuplicateRuleChain/100.Set2OneDuplicateKeyFlag]

AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/003.DefaultUnsupportedOperationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetError
RuleNames=200.Logger
RuleNames=300.LogAlarming


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/003.DefaultUnsupportedOperationRuleChain/100.SetError]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 1
AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/003.DefaultUnsupportedOperationRuleChain/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Unsupported operation received in provisioning. Check the SOAP XML request sent to DEG for provisioning.


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/003.DefaultUnsupportedOperationRuleChain/300.LogAlarming]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/004.SessionStoreCreateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateSession.Log
RuleNames=100.CreateSession


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/004.SessionStoreCreateRuleChain/100.CreateSession]

ClassName=com.hp.siu.sessionserver.rules.CreateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
DuplicateErrorRuleChain=002.SessionStoreDuplicateRuleChain
LogInvalidSession=false
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/004.SessionStoreCreateRuleChain/100.CreateSession.Log]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG3
Message=100.CreateSession.Log


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/005.SessionStoreDefaultErrorDeviceDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/005.SessionStoreDefaultErrorDeviceDataRuleChain/100.SetLookupErrorFlag]

AdornOps=set DEG_EntSessionStoreErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/005.SessionStoreDefaultErrorDeviceDataRuleChain/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/006.SessionStoreKeyNotExistsDeviceDataRuleChain]

ClassName=RuleChain
RuleNames=000.ClearFalag


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/006.SessionStoreKeyNotExistsDeviceDataRuleChain/000.ClearFalag]

AdornOps=set DEG_EntSessionStoreKeyExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/007.GenerateAuditAndNRBEventsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DumpAuditRecord


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/007.GenerateAuditAndNRBEventsRuleChain/100.DumpAuditRecord]

ClassName=com.hp.siu.sessionserver.rules.NMEStoreRule
NMEStore=AuditNmeStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
RuleNames=200.GenerateAuditAndNRBEvents


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString 0
AdornOps=setifnull DEG_MDN 0
AdornOps=setifnull DEG_eSIMProvIMSIString ""
AdornOps=setifnull DEG_eSIMProvEIMSIString ""
AdornOps=setifnull DEG_UNIQUE_ID ""
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=copy DEG_eSIMProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "eSIMProvisioning"
AdornOps=set DEG_AuditSourceDestinationString "NSERVER"
AdornOps=set DEG_AuditSourceDestinationVersionString "NA"
AdornOps=set DEG_AuditDurationString 0
AdornOps=copy DEG_UNIQUE_ID DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
Attributes=set DEG_AuditDeviceTypeString ""
Attributes=set DEG_AuditNRBMessageString ""
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "PERSA TO DEG  -> Received eSIM Provisioning notification request "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

100_AuditCreate=100.AuditCreate
200_AuditActivate=200.AuditActivate
300_AuditUpdateStatus=300.AuditUpdateStatus
400_AuditChangeImsi=400.AuditChangeImsi
500_AuditChangeSecondaryImsi=500.AuditChangeSecondaryImsi
600_AuditDelete=600.AuditDelete
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMCreate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMActivate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMUpdateStatus"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeSecondaryImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMDelete"
TrueRuleChain=100_AuditCreate
TrueRuleChain=200_AuditActivate
TrueRuleChain=300_AuditUpdateStatus
TrueRuleChain=400_AuditChangeImsi
TrueRuleChain=500_AuditChangeSecondaryImsi
TrueRuleChain=600_AuditDelete


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/100.AuditCreate]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", EID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/200.AuditActivate]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", EID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/300.AuditUpdateStatus]

AdornOps=set DEG_Tmp1String "eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", Status="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvStatusString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/400.AuditChangeImsi]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", newIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvNewIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/500.AuditChangeSecondaryImsi]

AdornOps=set DEG_Tmp1String "eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", newSecondaryIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvNewSecondaryIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/600.AuditDelete]

AdornOps=set DEG_Tmp1String "eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Received eSIM Provisioning Notification - "
AdornOps=+ DEG_AuditNRBMessageString DEG_eSIMProvOperationIdString DEG_AuditNRBMessageString
#AdornOps=+ DEG_AuditNRBMessageString DEG_eSIMProvOperationIdString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/009.eSIMProvisioningStartAuditRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=007.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
#RuleNames=200.GenerateAuditAndNRBEvents


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=101.PopulateReturnCode
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_EntDurationLong
AdornOps=- DEG_EntDurationLong DEG_eSMProvStartTimestampLong DEG_AuditDurationString
AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=copy DEG_AuditTimestampLong DEG_EntTimestampString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=setifnull DEG_MDN 0
AdornOps=setifnull DEG_eSIMProvIMSIString ""
AdornOps=setifnull DEG_eSIMProvEIMSIString ""
AdornOps=setifnull DEG_UNIQUE_ID ""
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=copy DEG_eSIMProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "eSIMProvisioning"
AdornOps=set DEG_AuditSourceDestinationString "NSERVER"
AdornOps=set DEG_AuditSourceDestinationVersionString "NA"
AdornOps=copy DEG_UNIQUE_ID DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
Attributes=set DEG_AuditDeviceTypeString ""
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode]

ClassName=ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode/FalseRule]

AdornOps=copy DEG_eSIMProvReturnCodeString DEG_AuditResultCodeString
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/101.PopulateReturnCode/TrueRule]

AdornOps=set DEG_AuditResultCodeString 1
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO PERSA  -> Sending Response to PERSA Server "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

100_AuditCreate=100.AuditCreate
200_AuditActivate=200.AuditActivate
300_AuditUpdateStatus=300.AuditUpdateStatus
400_AuditChangeImsi=400.AuditChangeImsi
500_AuditChangeSecondaryImsi=500.AuditChangeSecondaryImsi
600_AuditDelete=600.AuditDelete
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMCreate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMActivate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMUpdateStatus"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeSecondaryImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMDelete"
TrueRuleChain=100_AuditCreate
TrueRuleChain=200_AuditActivate
TrueRuleChain=300_AuditUpdateStatus
TrueRuleChain=400_AuditChangeImsi
TrueRuleChain=500_AuditChangeSecondaryImsi
TrueRuleChain=600_AuditDelete


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/100.AuditCreate]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", EID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/200.AuditActivate]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", EID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/300.AuditUpdateStatus]

AdornOps=set DEG_Tmp1String "eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", Status="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvStatusString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/400.AuditChangeImsi]

AdornOps=set DEG_Tmp1String "IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", newIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/500.AuditChangeSecondaryImsi]

AdornOps=set DEG_Tmp1String "eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString ,DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", newSecondaryIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvNewSecondaryIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", eICCID="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes/600.AuditDelete]

AdornOps=set DEG_Tmp1String ", eIMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvEIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ReturnCode="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvReturnCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", ResponseMessage="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_eSIMProvErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=copy DEG_eSIMProvErrorMessageString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/010.eSIMProvisioningEndAuditRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=007.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=350.LookUpTokens
RuleNames=400.Execute
RuleNames=450.TriggerToAPNS
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMCreate.IMSI.CData,DEG_eSIMProvIMSIString
StructuredNMEToNMEMap=eSIMCreate.EID.CData,DEG_eSIMProvEIDString
StructuredNMEToNMEMap=eSIMCreate.eICCID.CData,DEG_eSIMProvEICCIDString
StructuredNMEToNMEMap=eSIMCreate.eIMSI.CData,DEG_eSIMProvEIMSIString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with IMSI (%s), EID (%s), EICCID (%s), EIMSI (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvEIDString
InputFields=DEG_eSIMProvEICCIDString
InputFields=DEG_eSIMProvEIMSIString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=000.CheckMandatoryLog
RuleNames=100.CheckMandatoryIMSI
RuleNames=150.CheckFormatIMSI
RuleNames=200.CheckMandatoryEID
RuleNames=300.CheckMandatoryEICCID
RuleNames=400.CheckMandatoryEIMSI
RuleNames=450.CheckFormatEIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/000.CheckMandatoryLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG3
Message=000.CheckMandatoryLog:


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/100.CheckMandatoryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvIMSIString,=,""
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/100.CheckMandatoryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/100.CheckMandatoryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/150.CheckFormatIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/150.CheckFormatIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/150.CheckFormatIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/200.CheckMandatoryEID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/200.CheckMandatoryEID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0104"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid EID "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/200.CheckMandatoryEID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/300.CheckMandatoryEICCID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEICCIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/300.CheckMandatoryEICCID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0110"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eICCID"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/300.CheckMandatoryEICCID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/400.CheckMandatoryEIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/400.CheckMandatoryEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/400.CheckMandatoryEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/450.CheckFormatEIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvEIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/450.CheckFormatEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/300.Validate/450.CheckFormatEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid eIMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=000.InitTokensTableLookUp
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/000.InitTokensTableLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckIfKeyExists
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Db Error:Unable to LookUp in DEG_TOKENS table


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
FalseRuleChain=200.InvokeStartAudit
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unknown Subscriber!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/200.InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=009.eSIMProvisioningStartAuditRuleChain
UseRuleChainManagerPool=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/450.TriggerToAPNS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=400.PushNotificationToAPNSRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/110.eSIMCreateRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=350.LookUpTokens
RuleNames=400.Execute
RuleNames=450.TriggerToAPNS
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMActivate.IMSI.CData,DEG_eSIMProvIMSIString
StructuredNMEToNMEMap=eSIMActivate.EID.CData,DEG_eSIMProvEIDString
StructuredNMEToNMEMap=eSIMActivate.eIMSI.CData,DEG_eSIMProvEIMSIString
StructuredNMEToNMEMap=eSIMActivate.eICCID.CData,DEG_eSIMProvEICCIDString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with IMSI (%s), EID (%s), EICCID (%s), EIMSI (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvEIDString
InputFields=DEG_eSIMProvEICCIDString
InputFields=DEG_eSIMProvEIMSIString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=000.CheckMandatoryLog
RuleNames=100.CheckMandatoryIMSI
RuleNames=150.CheckFormatIMSI
RuleNames=200.CheckMandatoryEID
RuleNames=300.CheckMandatoryEIMSI
RuleNames=400.CheckFormatEIMSI
RuleNames=500.CheckMandatoryEICCID


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/000.CheckMandatoryLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG3
Message=000.CheckMandatoryLog:


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/100.CheckMandatoryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvIMSIString,=,""
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/100.CheckMandatoryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/100.CheckMandatoryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/150.CheckFormatIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/150.CheckFormatIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/150.CheckFormatIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/200.CheckMandatoryEID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/200.CheckMandatoryEID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0104"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid EID "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/200.CheckMandatoryEID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/300.CheckMandatoryEIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/300.CheckMandatoryEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/300.CheckMandatoryEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/400.CheckFormatEIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvEIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/400.CheckFormatEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/400.CheckFormatEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid eIMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/500.CheckMandatoryEICCID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEICCIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/500.CheckMandatoryEICCID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0110"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eICCID"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/300.Validate/500.CheckMandatoryEICCID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=000.InitTokensTableLookUp
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/000.InitTokensTableLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckIfKeyExists
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Db Error:Unable to LookUp in DEG_TOKENS table


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
FalseRuleChain=200.InvokeStartAudit
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unknown Subscriber!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/200.InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=009.eSIMProvisioningStartAuditRuleChain
UseRuleChainManagerPool=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/450.TriggerToAPNS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=400.PushNotificationToAPNSRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/120.eSIMActivateRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=350.LookUpTokens
RuleNames=400.Execute
RuleNames=450.TriggerToAPNS
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMUpdateStatus.eIMSI.CData,DEG_eSIMProvEIMSIString
StructuredNMEToNMEMap=eSIMUpdateStatus.Status.CData,DEG_eSIMProvStatusString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with EIMSI (%s), STATUS (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_eSIMProvStatusString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=100.CheckMandatoryEIMSI
RuleNames=150.CheckFormatEIMSI
RuleNames=200.CheckMandatoryStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/100.CheckMandatoryEIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/100.CheckMandatoryEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/100.CheckMandatoryEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/150.CheckFormatEIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvEIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/150.CheckFormatEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/150.CheckFormatEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid EIMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/200.CheckMandatoryStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.CheckStatusActiveInactive


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/200.CheckMandatoryStatus/100.CheckStatusActiveInactive]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvStatusString,=,"Active"
Conditions=DEG_eSIMProvStatusString,=,"Inactive"
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operations=or


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/200.CheckMandatoryStatus/100.CheckStatusActiveInactive/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0102"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid STATUS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/300.Validate/200.CheckMandatoryStatus/100.CheckStatusActiveInactive/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=STATUS must be ACTIVE/INACTIVE:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=000.InitTokensTableLookUp
#TrueRuleChain=005.LookUPIMSIbyEIMSI
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/000.InitTokensTableLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvEIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/005.LookUPIMSIbyEIMSI]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckIfKeyExists
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Db Error:Unable to LookUp in DEG_TOKENS table


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
FalseRuleChain=200.InvokeStartAudit
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unknown Subscriber!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/200.InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=009.eSIMProvisioningStartAuditRuleChain
UseRuleChainManagerPool=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/450.TriggerToAPNS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=400.PushNotificationToAPNSRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/130.eSIMUpdateStatusRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=350.LookUpTokens
RuleNames=400.Execute
RuleNames=450.TriggerToAPNS
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMChangeImsi.IMSI.CData,DEG_eSIMProvIMSIString
StructuredNMEToNMEMap=eSIMChangeImsi.newIMSI.CData,DEG_eSIMProvNewIMSIString
StructuredNMEToNMEMap=eSIMChangeImsi.ICCID.CData,DEG_eSIMProvICCIDString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with IMSI (%s), newIMSI (%s), ICCID (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvNewIMSIString
InputFields=DEG_eSIMProvICCIDString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=000.CheckFormatIMSI
RuleNames=050.CheckFormatNewIMSI
RuleNames=100.CheckMandatoryIMSI
RuleNames=200.CheckMandatoryNewIMSI
RuleNames=300.CheckMandatoryICCID
RuleNames=400.CheckExistIMSI
#RuleNames=500.CheckExistNewIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/000.CheckFormatIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/000.CheckFormatIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/000.CheckFormatIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/050.CheckFormatNewIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvNewIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/050.CheckFormatNewIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/050.CheckFormatNewIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid New IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/100.CheckMandatoryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/100.CheckMandatoryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/100.CheckMandatoryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/200.CheckMandatoryNewIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvNewIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/200.CheckMandatoryNewIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/200.CheckMandatoryNewIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/300.CheckMandatoryICCID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvICCIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/300.CheckMandatoryICCID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0105"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid ICCID"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/300.CheckMandatoryICCID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.SetValues
TrueRuleChain=200.CheckExistIMSI
TrueRuleChain=300.CheckIfExistIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/100.SetValues]

AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/200.CheckExistIMSI]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_IMSI,=,%DEG_IMSI
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
TrueRuleChain=100.CheckIfExistNewImsi


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi]

ClassName=RuleChain
RuleNames=100.SetValuesNewIMSI
RuleNames=200.SearchNewIMSI
RuleNames=300.CheckNewIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/100.SetValuesNewIMSI]

AdornOps=copy DEG_eSIMProvNewIMSIString DEG_IMSI
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/200.SearchNewIMSI]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_IMSI,=,%DEG_IMSI
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/300.CheckNewIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
FalseRuleChain=300.DoNothing
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/300.CheckNewIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/300.CheckNewIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Imsi and New IMSI does not exist:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/300.Validate/400.CheckExistIMSI/300.CheckIfExistIMSI/100.CheckIfExistNewImsi/300.CheckNewIMSI/300.DoNothing]

AdornOps=set DEG_eSIMProvReturnCodeString "0000"
AdornOps=set DEG_eSIMProvErrorMessageString "DONOTHING"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=000.InitTokensTableLookUp
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/000.InitTokensTableLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
#AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=copy DEG_eSIMProvNewIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckIfKeyExists
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Db Error:Unable to LookUp in DEG_TOKENS table


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
FalseRuleChain=200.InvokeStartAudit
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unknown Subscriber!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/200.InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=009.eSIMProvisioningStartAuditRuleChain
UseRuleChainManagerPool=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/450.TriggerToAPNS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=400.PushNotificationToAPNSRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/140.eSIMChangeImsiRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=400.Execute
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMChangeSecondaryImsi.SecondaryIMSI.CData,DEG_eSIMProvEIMSIString
StructuredNMEToNMEMap=eSIMChangeSecondaryImsi.newSecondaryIMSI.CData,DEG_eSIMProvNewSecondaryIMSIString
StructuredNMEToNMEMap=eSIMChangeSecondaryImsi.SecondaryICCID.CData,DEG_eSIMProvEICCIDString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with eIMSI (%s), newSecondaryIMSI (%s), eICCID (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_eSIMProvNewSecondaryIMSIString
InputFields=DEG_eSIMProvEICCIDString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=000.CheckFormatSecondaryIMSI
RuleNames=050.CheckFormatNewSecondaryIMSI
RuleNames=100.CheckMandatorySecondaryIMSI
RuleNames=200.CheckMandatoryNewSecondaryIMSI
RuleNames=300.CheckMandatorySecondaryICCID
RuleNames=400.CheckExistSecondaryIMSI
#RuleNames=500.CheckExistNewIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/000.CheckFormatSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvEIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/000.CheckFormatSecondaryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/000.CheckFormatSecondaryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid secondary IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/050.CheckFormatNewSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvNewSecondaryIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/050.CheckFormatNewSecondaryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/050.CheckFormatNewSecondaryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid New secondary IMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/100.CheckMandatorySecondaryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/100.CheckMandatorySecondaryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/100.CheckMandatorySecondaryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid secondary IMSI attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/200.CheckMandatoryNewSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvNewSecondaryIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/200.CheckMandatoryNewSecondaryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/200.CheckMandatoryNewSecondaryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid new secondary IMSI attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/300.CheckMandatorySecondaryICCID]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEICCIDString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/300.CheckMandatorySecondaryICCID/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0105"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid secondary ICCID"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/300.CheckMandatorySecondaryICCID/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid secondary ICCID attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.SetValues
TrueRuleChain=200.CheckExistSecondaryIMSI
TrueRuleChain=300.CheckIfExistSecondaryIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/100.SetValues]

AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/200.CheckExistSecondaryIMSI]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
TrueRuleChain=100.CheckIfExistNewSecondaryImsi


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi]

ClassName=RuleChain
RuleNames=100.SetValuesNewSecondaryIMSI
RuleNames=200.SearchNewSecondaryIMSI
RuleNames=300.CheckNewSecondaryIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/100.SetValuesNewSecondaryIMSI]

AdornOps=copy DEG_eSIMProvNewSecondaryIMSIString DEG_eIMSI
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/200.SearchNewSecondaryIMSI]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/300.CheckNewSecondaryIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
FalseRuleChain=300.DoNothing
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/300.CheckNewSecondaryIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/300.CheckNewSecondaryIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Secondary Imsi and New IMSI do not exist:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/300.Validate/400.CheckExistSecondaryIMSI/300.CheckIfExistSecondaryIMSI/100.CheckIfExistNewSecondaryImsi/300.CheckNewSecondaryIMSI/300.DoNothing]

AdornOps=set DEG_eSIMProvReturnCodeString "0000"
AdornOps=set DEG_eSIMProvErrorMessageString "DONOTHING"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/150.eSIMChangeSecondaryImsiRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.ParseRequest
RuleNames=250.Logger
RuleNames=300.Validate
RuleNames=350.LookUpTokens
RuleNames=400.Execute
RuleNames=450.TriggerToAPNS
RuleNames=500.SendResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/100.Initialize]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.InitializeESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/200.ParseRequest]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=eSIMProvisioning:Body
StructuredNMEToNMEMap=eSIMDelete.eIMSI.CData,DEG_eSIMProvEIMSIString
StructuredNMEToNMEMap=DEG_eSIMProvOperationIdNMEString,DEG_eSIMProvOperationIdString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/250.Logger]

ClassName=FormattedPrintRule
FormatString=Received %s Request with EIMSI (%s)
InputFields=DEG_eSIMProvOperationIdString
InputFields=DEG_eSIMProvEIMSIString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate]

ClassName=RuleChain
RuleNames=100.CheckMandatoryEIMSI
RuleNames=150.CheckFormatEIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/100.CheckMandatoryEIMSI]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvEIMSIString,=,""
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Operations=and
TrueRuleChain=100.SetError
TrueRuleChain=200.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/100.CheckMandatoryEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/100.CheckMandatoryEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Mandatory eSIM attribute:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/150.CheckFormatEIMSI]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
FalseRuleChain=100.SetError
FalseRuleChain=200.Logger
Operation=match
RegExPattern=^\d{15}$
SourceAttribute=DEG_eSIMProvEIMSIString


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/150.CheckFormatEIMSI/100.SetError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0103"
AdornOps=set DEG_eSIMProvErrorMessageString "Invalid eIMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/300.Validate/150.CheckFormatEIMSI/200.Logger]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Invalid EIMSI format:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=000.InitTokensTableLookUp
TrueRuleChain=100.ExecuteTableLookUp
TrueRuleChain=200.CheckLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/000.InitTokensTableLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvEIMSIString DEG_IMSI
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/100.ExecuteTableLookUp]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_PUSH_TOKEN,DEG_PUSH_TOKEN
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckIfKeyExists
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Db Error:Unable to LookUp in DEG_TOKENS table


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
FalseRuleChain=200.InvokeStartAudit
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=100.LogErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/100.LogErrorResponse]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Unknown Subscriber!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/350.LookUpTokens/200.CheckLookUpStatus/200.CheckIfKeyExists/200.InvokeStartAudit]

ClassName=LocalRuleChainInvoker
RuleChain=009.eSIMProvisioningStartAuditRuleChain
UseRuleChainManagerPool=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/400.Execute]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=260.ExecuteESIMRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/450.TriggerToAPNS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=400.PushNotificationToAPNSRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/160.eSIMDeleteRuleChain/500.SendResponse]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=250.SendResponseRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/200.InitializeESIMRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=Initialize


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/200.InitializeESIMRuleChain/Initialize]

AdornOps=set DEG_eSIMProvAPNSErrorFlagInteger 0
AdornOps=set DEG_eSIMProvReturnCodeString "0000"
AdornOps=set DEG_eSIMProvOperationIdString ""
AdornOps=set DEG_eSIMProvIMSIString ""
AdornOps=set DEG_eSIMProvNewIMSIString ""
AdornOps=set DEG_eSIMProvEIDString ""
AdornOps=set DEG_eSIMProvEICCIDString ""
AdornOps=set DEG_eSIMProvICCIDString ""
AdornOps=set DEG_eSIMProvErrorCodeString ""
AdornOps=set DEG_eSIMProvErrorMessageString ""
AdornOps=set DEG_IMSI ""
AdornOps=set DEG_EID ""
AdornOps=set DEG_EICCID ""
AdornOps=set DEG_M_STATUS ""
AdornOps=setsystime DEG_eSMProvStartTimestampLong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.CheckExistImsiAndEImsi
RuleNames=300.CheckCreateSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "CREATE"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
AdornOps=copy DEG_eSIMProvEIDString DEG_EID
AdornOps=copy DEG_eSIMProvEICCIDString DEG_eICCID
AdornOps=set DEG_M_STATUS "In-Progress"
AdornOps=setsystime DEG_MS_SIGNUP_STARTTIME
AdornOps=setsystime DEG_LASTUPDATE
#AdornOps=set DEG_ICCID ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/200.CheckExistImsiAndEImsi]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_IMSI,=,%DEG_IMSI
QueryConditions=DEG_EID,=,%DEG_EID
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
QueryConditions=DEG_eICCID,=,%DEG_eICCID
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/300.CheckCreateSession]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
TrueRuleChain=100.CreateSession


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/300.CheckCreateSession/100.CreateSession]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_eICCID,DEG_eICCID
MapAttributes=DEG_eIMSI,DEG_eIMSI
MapAttributes=DEG_M_STATUS,DEG_M_STATUS
MapAttributes=DEG_LASTUPDATE,DEG_LASTUPDATE
NotExistsErrorRuleChain=004.SessionStoreCreateRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/400.CheckStatus]

100_DBError=100.SetCreateError
100_DBError=110.LogCreateError
200_DuplicateKey=200.SetDuplicateEntryError
200_DuplicateKey=210.LogDuplicateEntryError
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,1
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_DuplicateKey


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/400.CheckStatus/100.SetCreateError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/400.CheckStatus/110.LogCreateError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to add record to DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/400.CheckStatus/200.SetDuplicateEntryError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0101"
AdornOps=set DEG_eSIMProvErrorMessageString "eSIM already exists in DEG_DEVICE_ICCIDS table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/400.CheckStatus/210.LogDuplicateEntryError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=eSIM already exists in DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"1000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/220.ManageESIMCreateRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Created/Updated Request with IMSI (%s), EID (%s), eICCID (%s), eIMSI (%s), STATUS (%s)
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvEIDString
InputFields=DEG_eSIMProvEICCIDString
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_M_STATUS
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=300.UpdateSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=copy DEG_eSIMProvEIDString DEG_EID
AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
AdornOps=copy DEG_eSIMProvEICCIDString DEG_eICCID
AdornOps=set DEG_eSIMProvSessionStoreCounterInteger 0
AdornOps=set DEG_M_STATUS "Active"
AdornOps=setsystime DEG_LASTUPDATE
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/300.UpdateSession]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_eIMSI,DEG_eIMSI
MapAttributes=DEG_eICCID,DEG_eICCID
MapAttributes=DEG_M_STATUS,DEG_M_STATUS
MapAttributes=DEG_LASTUPDATE,DEG_LASTUPDATE
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/400.CheckStatus]

100_DBError=100.SetDBError
100_DBError=110.LogDBError
200_SubscriberDoesNotExist=200.SetSubscriberDoesNotExistError
200_SubscriberDoesNotExist=210.LogSubscriberDoesNotExistError
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_SubscriberDoesNotExist


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/400.CheckStatus/100.SetDBError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/400.CheckStatus/110.LogDBError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to update DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/400.CheckStatus/200.SetSubscriberDoesNotExistError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/400.CheckStatus/210.LogSubscriberDoesNotExistError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=eSIM does not exist in DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/230.ManageESIMActivateRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Updated Request with IMSI (%s), EID (%s), eIMSI (%s), STATUS (%s)
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvEIDString
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_M_STATUS
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=300.DeleteSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "DELETE"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/300.DeleteSession]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
RuleChain=300.ExecuteEIMSIDeleteRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/400.CheckStatus]

100_DBError=100.SetDBError
100_DBError=110.LogDBError
200_SubscriberDoesNotExist=200.SetSubscriberDoesNotExist
200_SubscriberDoesNotExist=210.LogSubscriberDoesNotExist
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_SubscriberDoesNotExist


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/400.CheckStatus/100.SetDBError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/400.CheckStatus/110.LogDBError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to delete record from DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/400.CheckStatus/200.SetSubscriberDoesNotExist]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/400.CheckStatus/210.LogSubscriberDoesNotExist]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=eSIM does not exist in DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/240.ManageESIMDeleteRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Deleted eSIM with eIMSI (%s)
InputFields=DEG_eIMSI
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CheckOperation
RuleNames=200.InvokeEndAudit


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation]

100_ManageCreateResponse=100.ManageCreateResponse
200_ManageActivateResponse=200.ManageActivateResponse
300_ManageUpdateStatusResponse=300.ManageUpdateStatusResponse
400_ManageChangeImsiResponse=400.ManageChangeImsiResponse
500_ManageChangeSecondaryImsiResponse=500.ManageChangeSecondaryImsiResponse
600_ManageDeleteResponse=600.ManageDeleteResponse
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMCreate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMActivate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMUpdateStatus"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeSecondaryImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMDelete"
TrueRuleChain=100_ManageCreateResponse
TrueRuleChain=200_ManageActivateResponse
TrueRuleChain=300_ManageUpdateStatusResponse
TrueRuleChain=400_ManageChangeImsiResponse
TrueRuleChain=500_ManageChangeSecondaryImsiResponse
TrueRuleChain=600_ManageDeleteResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/100.ManageCreateResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/100.ManageCreateResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMCreateResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMCreateResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMCreateResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/100.ManageCreateResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMCreateResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/200.ManageActivateResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/200.ManageActivateResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMActivateResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMActivateResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMActivateResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/200.ManageActivateResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMActivateResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/300.ManageUpdateStatusResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/300.ManageUpdateStatusResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMUpdateStatusResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMUpdateStatusResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMUpdateStatusResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/300.ManageUpdateStatusResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMUpdateStatusResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/400.ManageChangeImsiResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/400.ManageChangeImsiResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMChangeImsiResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMChangeImsiResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMChangeImsiResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/400.ManageChangeImsiResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMChangeImsiResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/500.ManageChangeSecondaryImsiResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/500.ManageChangeSecondaryImsiResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMChangeImsiResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMChangeImsiResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMChangeImsiResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/500.ManageChangeSecondaryImsiResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMChangeImsiResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/600.ManageDeleteResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=DEG_eSIMProvAPNSErrorFlagInteger,=,0
FalseRuleChain=100.SendError
Operations=and
TrueRuleChain=200.SendSuccess


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/600.ManageDeleteResponse/100.SendError]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMDeleteResponse.Response.ReturnCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorCodeString,eSIMDeleteResponse.Response.ErrorCode.CData
NMEToStructuredNMEMap=DEG_eSIMProvErrorMessageString,eSIMDeleteResponse.Response.Description.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/100.CheckOperation/600.ManageDeleteResponse/200.SendSuccess]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_eSIMProvReturnCodeString,eSIMDeleteResponse.Response.ReturnCode.CData
SNMEType=eSIMProvisioning:Body


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/250.SendResponseRuleChain/200.InvokeEndAudit]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=010.eSIMProvisioningEndAuditRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CheckIfValid


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.CheckOperation


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation]

100_ExecuteESIMCreate=100.ExecuteESIMCreate
200_ExecuteESIMActivate=200.ExecuteESIMActivate
300_ExecuteESIMUpdateStatus=300.ExecuteESIMUpdateStatus
400_ExecuteESIMChangeImsi=400.ExecuteESIMChangeImsi
500_ExecuteESIMChangeSecondaryImsi=500.ExecuteESIMChangeSecondaryImsi
600_ExecuteESIMDelete=600.ExecuteESIMDelete
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMCreate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMActivate"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMUpdateStatus"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMChangeSecondaryImsi"
Conditions=DEG_eSIMProvOperationIdString,=,"eSIMDelete"
TrueRuleChain=100_ExecuteESIMCreate
TrueRuleChain=200_ExecuteESIMActivate
TrueRuleChain=300_ExecuteESIMUpdateStatus
TrueRuleChain=400_ExecuteESIMChangeImsi
TrueRuleChain=500_ExecuteESIMChangeSecondaryImsi
TrueRuleChain=600_ExecuteESIMDelete


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/100.ExecuteESIMCreate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220.ManageESIMCreateRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/200.ExecuteESIMActivate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=230.ManageESIMActivateRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/300.ExecuteESIMUpdateStatus]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=270.ManageESIMUpdateStatusRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/400.ExecuteESIMChangeImsi]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=280.ManageESIMChangeImsiRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/500.ExecuteESIMChangeSecondaryImsi]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=290.ManageESIMChangeSecondaryImsiRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/260.ExecuteESIMRuleChain/100.CheckIfValid/100.CheckOperation/600.ExecuteESIMDelete]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=240.ManageESIMDeleteRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=300.UpdateSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "UPDATE STATUS"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
AdornOps=copy DEG_eSIMProvStatusString DEG_M_STATUS
AdornOps=setsystime DEG_eSIMProvLastUpdateTime
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/300.UpdateSession]

100_UpdateStatusActive=100.UpdateStatusActive
200_UpdateStatusInActive=200.UpdateStatusInActive
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvStatusString,=,"Active"
Conditions=DEG_eSIMProvStatusString,=,"Inactive"
Operations=None
TrueRuleChain=100_UpdateStatusActive
TrueRuleChain=200_UpdateStatusInActive


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/300.UpdateSession/100.UpdateStatusActive]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
RuleChain=310.ExecuteEIMSIUpdateStatusActiveRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/300.UpdateSession/200.UpdateStatusInActive]

ClassName=com.hp.siu.sessionserver.rules.QuerySessionsRule
ContinueAfterErrorFixed=true
CountAttribute=DEG_eSIMProvSessionStoreCounterInteger
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
QueryConditions=DEG_eIMSI,=,%DEG_eIMSI
RuleChain=320.ExecuteEIMSIUpdateStatusInActiveRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/400.CheckStatus]

100_DBError=100.SetDBError
100_DBError=110.LogDBError
200_SubscriberDoesNotExist=200.SetSubscriberDoesNotExist
200_SubscriberDoesNotExist=210.LogSubscriberDoesNotExist
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreCounterInteger,=,0
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_SubscriberDoesNotExist


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/400.CheckStatus/100.SetDBError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/400.CheckStatus/110.LogDBError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to update record from DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/400.CheckStatus/200.SetSubscriberDoesNotExist]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/400.CheckStatus/210.LogSubscriberDoesNotExist]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=eSIM does not exist in DEG_DEVICE_ICCIDS table:
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/270.ManageESIMUpdateStatusRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Update eSIM with eIMSI (%s), STATUS (%s)
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_eSIMProvStatusString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=200.TRAZA
RuleNames=300.UpdateSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvIMSIString DEG_IMSI
AdornOps=copy DEG_eSIMProvICCIDString DEG_ICCID
AdornOps=setsystime DEG_LASTUPDATE
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/200.TRAZA]

Attributes=DEG_eSIMProvNewIMSIString
Attributes=DEG_ICCID
Attributes=DEG_LASTUPDATE
Attributes=DEG_IMSI
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=<<< 200.TRAZA >>>
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/300.UpdateSession]

AutoCommit=true
ClassName=JDBCUpdateRule
ConnectionPoolID=DEG_DSN_TT_eSIM_Pool1
RetryTimeout=5
SQLStatement=UPDATE DEG_DEVICE_ICCIDS SET DEG_IMSI = %DEG_eSIMProvNewIMSIString, DEG_ICCID = %DEG_ICCID, DEG_LASTUPDATE = %DEG_LASTUPDATE  WHERE DEG_IMSI = %DEG_IMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/300.UpdateSession/ErrorRule]

ClassName=RuleChain
RuleNames=100.SetErrorDatabase


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/300.UpdateSession/ErrorRule/100.SetErrorDatabase]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/400.CheckStatus]

100_DBError=100.SetDBError
100_DBError=110.LogDBError
200_SubscriberDoesNotExist=200.SetSubscriberDoesNotExistError
200_SubscriberDoesNotExist=210.LogSubscriberDoesNotExistError
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_SubscriberDoesNotExist


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/400.CheckStatus/100.SetDBError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/400.CheckStatus/110.LogDBError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to update DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/400.CheckStatus/200.SetSubscriberDoesNotExistError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/400.CheckStatus/210.LogSubscriberDoesNotExistError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=eSIM does not exist in DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/280.ManageESIMChangeImsiRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Updated Request with IMSI (%s), NewIMSI (%s), ICCID (%s)
InputFields=DEG_eSIMProvIMSIString
InputFields=DEG_eSIMProvNewIMSIString
InputFields=DEG_eSIMProvICCIDString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Initialize
RuleNames=300.UpdateSession
RuleNames=400.CheckStatus
RuleNames=500.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/100.Initialize]

AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name "DEG_DEVICE_ICCIDS"
AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_eSIMProvEIMSIString DEG_eIMSI
AdornOps=copy DEG_eSIMProvEICCIDString DEG_eICCID
AdornOps=setsystime DEG_LASTUPDATE
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/300.UpdateSession]

AutoCommit=true
ClassName=JDBCUpdateRule
ConnectionPoolID=DEG_DSN_TT_eSIM_Pool1
RetryTimeout=5
SQLStatement=UPDATE DEG_DEVICE_ICCIDS SET DEG_eIMSI = %DEG_eSIMProvNewSecondaryIMSIString, DEG_eICCID = %DEG_eICCID, DEG_LASTUPDATE = %DEG_LASTUPDATE  WHERE DEG_eIMSI = %DEG_eIMSI


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/300.UpdateSession/ErrorRule]

ClassName=RuleChain
RuleNames=100.SetErrorDatabase


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/300.UpdateSession/ErrorRule/100.SetErrorDatabase]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/400.CheckStatus]

100_DBError=100.SetDBError
100_DBError=110.LogDBError
200_SubscriberDoesNotExist=200.SetSubscriberDoesNotExistError
200_SubscriberDoesNotExist=210.LogSubscriberDoesNotExistError
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
Operations=None
TrueRuleChain=100_DBError
TrueRuleChain=200_SubscriberDoesNotExist


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/400.CheckStatus/100.SetDBError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/400.CheckStatus/110.LogDBError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to update DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/400.CheckStatus/200.SetSubscriberDoesNotExistError]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0106"
AdornOps=set DEG_eSIMProvErrorMessageString "Unknown Secondary IMSI"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/400.CheckStatus/210.LogSubscriberDoesNotExistError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Secondary IMSI does not exist in DEG_DEVICE_ICCIDS table
NullAlso=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/500.Logger]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
TrueRuleChain=100.Logger


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/290.ManageESIMChangeSecondaryImsiRuleChain/500.Logger/100.Logger]

ClassName=FormattedPrintRule
FormatString=Successfully Updated Request with eIMSI (%s), NewSecondaryIMSI (%s), eICCID (%s)
InputFields=DEG_eSIMProvEIMSIString
InputFields=DEG_eSIMProvNewSecondaryIMSIString
InputFields=DEG_eSIMProvEICCIDString
LogMessage=true
ResultField=DEG_Tmp1String


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/300.ExecuteEIMSIDeleteRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
#RuleNames=100.SetValuesReset
RuleNames=200.CheckExecuteDelete


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/300.ExecuteEIMSIDeleteRuleChain/100.SetValuesReset]

AdornOps=setsystime DEG_eSIMProvLastUpdateTime
AdornOps=set DEG_eSIMProvEICCIDString ""
AdornOps=set DEG_eSIMProvICCIDString ""
AdornOps=set DEG_eSIMProvStatusString "Reset"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/300.ExecuteEIMSIDeleteRuleChain/200.CheckExecuteDelete]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_M_STATUS,!=,"Reset"
TrueRuleChain=100.DeleteSession


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/300.ExecuteEIMSIDeleteRuleChain/200.CheckExecuteDelete/100.DeleteSession]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/310.ExecuteEIMSIUpdateStatusActiveRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetValuesUpdateStatus
RuleNames=200.ExecuteUpdate


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/310.ExecuteEIMSIUpdateStatusActiveRuleChain/100.SetValuesUpdateStatus]

AdornOps=setsystime DEG_eSIMProvLastUpdateTime
AdornOps=set DEG_eSIMProvStatusString "Active"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/310.ExecuteEIMSIUpdateStatusActiveRuleChain/200.ExecuteUpdate]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_eSIMProvStatusString,DEG_M_STATUS
MapAttributes=DEG_eSIMProvLastUpdateTime,DEG_LASTUPDATE
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/320.ExecuteEIMSIUpdateStatusInActiveRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetValuesUpdateStatus
RuleNames=200.ExecuteUpdate


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/320.ExecuteEIMSIUpdateStatusInActiveRuleChain/100.SetValuesUpdateStatus]

AdornOps=setsystime DEG_eSIMProvLastUpdateTime
AdornOps=set DEG_eSIMProvStatusString "Inactive"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/320.ExecuteEIMSIUpdateStatusInActiveRuleChain/200.ExecuteUpdate]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_eSIMProvStatusString,DEG_M_STATUS
MapAttributes=DEG_eSIMProvLastUpdateTime,DEG_LASTUPDATE
NotExistsErrorRuleChain=001.SessionStoreNotExistsRuleChain
SessionStore=DEG_DEVICE_ICCIDS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CheckSendNotificationToAPNS


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
FalseRuleChain=300.NoPushNotificationLogger
TrueRuleChain=000.InitPushTokenLookUp
TrueRuleChain=100.LookUpPushToken
TrueRuleChain=200.CheckPushTokenLookUpStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/000.InitPushTokenLookUp]

AdornOps=set DEG_eSIMProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_eSIMProvSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_ENTITLEMENT_NAME "Multi-SIM"
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_IMSI DEG_eSIMProvIMSIString
AdornOps=copy DEG_MDN DEG_eSIMProvMDNString
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_DEVICE_DATA"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/100.LookUpPushToken]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=005.SessionStoreDefaultErrorDeviceDataRuleChain
LogInvalidSession=false
MapAttributes=DEG_APNS_TOKEN,DEG_APNS_TOKEN
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
NotExistsErrorRuleChain=006.SessionStoreKeyNotExistsDeviceDataRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_eSIMProvSessionStoreKeyExistsFlagInteger,=,0
Conditions=DEG_eSIMProvSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=000.CheckAPNSTokenStatus
Operations=or
TrueRuleChain=100.SetErrorResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_APNS_TOKEN,!=,""
Conditions=DEG_PUSH_NOTIFICATION_STATUS,=,6100
FalseRuleChain=000.SetErrorResponse
FalseRuleChain=100.LogError
Operations=and
TrueRuleChain=200.CopyPushToken
TrueRuleChain=300.InvokeAPNSInterface


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/000.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0109"
AdornOps=set DEG_eSIMProvErrorMessageString "Push Notification not enabled For Subscriber"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/100.LogError]

Attributes=DEG_eSIMProvReturnCodeString
Attributes=DEG_eSIMProvErrorCodeString
Attributes=DEG_eSIMProvErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Push Notification not enabled!!


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/200.CopyPushToken]

AdornOps=set CUST_APN_IN_TopicString "Multi-SIM"
AdornOps=set CUST_APN_IN_TriggerTypeString "multi-sim signup-changed"
AdornOps=copy DEG_APNS_TOKEN DEG_DEG_EntMultiSIMAPNSTokenString
AdornOps=copy DEG_DEG_EntMultiSIMAPNSTokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_MDN DEG_EntMDNString
AdornOps=copy DEG_EntMDNString CUST_APN_IN_MDNLong
AdornOps=copy DEG_IMSI DEG_EntIMSIString
AdornOps=copy DEG_EntIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_UNIQUE_ID DEG_EntUniqueIdString
AdornOps=copy DEG_EntUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 6100
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS CUST_APN_IN_PushNotificationStatus
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/000.CheckAPNSTokenStatus/300.InvokeAPNSInterface]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=500.SendAPNSNotificationRuleChain
UseRuleChainManagerPool=true


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/200.CheckPushTokenLookUpStatus/100.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0107"
AdornOps=set DEG_eSIMProvErrorMessageString "Internal Server Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/400.PushNotificationToAPNSRuleChain/100.CheckSendNotificationToAPNS/300.NoPushNotificationLogger]

Attributes=DEG_IMSI
Attributes=DEG_ICCID
Attributes=DEG_EID
Attributes=DEG_eIMSI
Attributes=DEG_eICCID
ClassName=LogNMERule
LogLevel=INFO
Message=Push Notification has not sent to APNS:
NullAlso=false


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain]

ClassName=RuleChain
RuleNames=000.LogAPNSInterfaceInvoke
RuleNames=100.InvokeAPNSInterface
RuleNames=200.CheckNotificationSentStatus


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/000.LogAPNSInterfaceInvoke]

Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=INFO
Message=Sending request to APNS Interface::


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientRule
CommunicationErrorRuleChain=CommunicationErrorRuleChain
Description= NMERPCClientRule invokes a RuleChain in a remote session server and passes an NME to the remote session server.
MessageType=APNSRequestMessage
NMERPCClientAdapter=APNSNMERPCClientAdapter
NoConnectionErrorRuleChain=NoConnectionErrorRuleChain
Router=Router1
TimeoutRuleChain=TimeoutRuleChain


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=Communication Error with APNS Interface::


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/CommunicationErrorRuleChain/100.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0108"
AdornOps=set DEG_EntReturnMessageString "DEG APNS interface is down"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=No Connection Error for APNS Interface::


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/NoConnectionErrorRuleChain/100.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0108"
AdornOps=set DEG_EntReturnMessageString "DEG APNS interface is down"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain]

ClassName=RuleChain
RuleNames=100.SetErrorResponse
RuleNames=000.LogError


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain/000.LogError]

Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_PushNotificationStatus
ClassName=LogNMERule
LogLevel=CRITICAL
Message=TimeOut for the APNS Connection::


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/100.InvokeAPNSInterface/TimeoutRuleChain/100.SetErrorResponse]

AdornOps=set DEG_eSIMProvReturnCodeString "0100"
AdornOps=set DEG_eSIMProvErrorCodeString "0108"
AdornOps=set DEG_EntReturnMessageString "DEG APNS interface is down"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus]

ClassName=ConditionalRule
Conditions=DEG_eSIMProvReturnCodeString,=,"0000"
Conditions=CUST_APN_OUT_APNSSentStatusString,=,"Successful APNS connection"
FalseRuleChain=000.LogFailureResponse
FalseRuleChain=100.SetErrorFlag
Operations=and
TrueRuleChain=000.LogSuccessResponse


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/000.LogFailureResponse]

Attributes=DEG_eSIMProvIMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
#Attributes=DEG_DEG_EntVoWifiAPNSTokenString
Attributes=DEG_DEG_EntMultiSIMAPNSTokenString
#Attributes=DEG_DEG_EntVolteAPNSTokenString
ClassName=LogNMERule
LogLevel=INFO
Message=Error In Sending eSIM Push Notification


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/000.LogSuccessResponse]

Attributes=DEG_eSIMProvIMSIString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
#Attributes=DEG_DEG_EntVoWifiAPNSTokenString
Attributes=DEG_DEG_EntMultiSIMAPNSTokenString
#Attributes=DEG_DEG_EntVolteAPNSTokenString
ClassName=LogNMERule
LogLevel=INFO
Message=Entitlement Changed Notification Successfully Sent


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/RuleChains/500.SendAPNSNotificationRuleChain/200.CheckNotificationSentStatus/100.SetErrorFlag]

AdornOps=set DEG_eSIMProvAPNSErrorFlagInteger 1
ClassName=AdornmentRule


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SessionStores]

ClassName=com.hp.siu.sessionserver.SessionStoreManager
SessionStoreNames=DEG_DEVICE_ICCIDS_SessionStore
SessionStoreNames=DEG_DEVICE_DATA_SessionStore
SessionStoreNames=DEG_TOKENS_SessionStore


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SessionStores/DEG_DEVICE_DATA_SessionStore]

Attributes=DEG_UNIQUE_ID,key
Attributes=DEG_ENTITLEMENT_NAME,key
Attributes=DEG_IMSI
Attributes=DEG_APNS_TOKEN
Attributes=DEG_OLD_APNS_TOKEN
Attributes=DEG_PROVISIONING_STATUS
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_SERVICE_MGMT_POSTDATA
Attributes=DEG_DISPLAY_NAME
Attributes=DEG_ADDRESS_STATUS
Attributes=DEG_TC_STATUS
Attributes=DEG_ADDR_UPDATE_POSTDATA
Attributes=DEG_ADDR_REFID
Attributes=DEG_ADDR_REFID_EXP_DATE
Attributes=DEG_LASTUPDATE
Attributes=DEG_SIP_USERNAME
Attributes=TT_AUTOTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_DEVICE_DATA
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_DEVICE_DATA}
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_ENTITLEMENT_NAME,VARCHAR(32)
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_APNS_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_OLD_APNS_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_PROVISIONING_STATUS,INTEGER
SQLTypeMap=DEG_PUSH_NOTIFICATION_STATUS,INTEGER
SQLTypeMap=DEG_SERVICE_MGMT_POSTDATA,VARCHAR(256)
SQLTypeMap=DEG_DISPLAY_NAME,VARCHAR(128)
SQLTypeMap=DEG_ADDRESS_STATUS,INTEGER
SQLTypeMap=DEG_TC_STATUS,INTEGER
SQLTypeMap=DEG_ADDR_UPDATE_POSTDATA,VARCHAR(2048)
SQLTypeMap=DEG_ADDR_REFID,VARCHAR(64)
SQLTypeMap=DEG_ADDR_REFID_EXP_DATE,DATE
SQLTypeMap=DEG_LASTUPDATE,DATE
SQLTypeMap=DEG_SIP_USERNAME,VARCHAR(256)
SQLTypeMap=TT_AUTOTIMESTAMP,BINARY


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SessionStores/DEG_DEVICE_ICCIDS_SessionStore]

Attributes=DEG_IMSI,key
#Attributes=DEG_ICCID
Attributes=DEG_EID,key
Attributes=DEG_eIMSI
Attributes=DEG_eICCID
Attributes=DEG_M_STATUS
Attributes=DEG_MS_SIGNUP_STARTTIME
Attributes=DEG_LASTUPDATE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_DEVICE_ICCIDS
MaxDatabaseConnections=20
SQLTypeMap=DEG_IMSI,VARCHAR(64)
#SQLTypeMap=DEG_ICCID,VARCHAR(32)
SQLTypeMap=DEG_EID,VARCHAR(128)
SQLTypeMap=DEG_eIMSI,VARCHAR(64)
SQLTypeMap=DEG_eICCID,VARCHAR(64)
SQLTypeMap=DEG_M_STATUS,VARCHAR(64)
SQLTypeMap=DEG_MS_SIGNUP_STARTTIME,DATE
SQLTypeMap=DEG_LASTUPDATE,DATE


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SessionStores/DEG_TOKENS_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_MDN
Attributes=DEG_UNIQUE_ID
Attributes=DEG_SUBSTOKEN
Attributes=DEG_PUSH_TOKEN
Attributes=DEG_TOKENSTATUS
Attributes=DEG_AUTHENTICATION_TYPE
Attributes=DEG_AUTHENTICATION_SUBTYPE
Attributes=DEG_APP_TOKEN_FLAG
Attributes=DEG_AUTH_COUNT
Attributes=DEG_BLACKLIST_FLAG
Attributes=DEG_FULLAUTHTIMESTAMP
Attributes=DEG_EVENTTIMESTAMP
Attributes=TT_AUTOTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_TOKENS
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_TOKENS}
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_MDN,BIGINT
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_SUBSTOKEN,CHAR(28)
SQLTypeMap=DEG_PUSH_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_TOKENSTATUS,CHAR(2)
SQLTypeMap=DEG_AUTHENTICATION_TYPE,CHAR(4)
SQLTypeMap=DEG_AUTHENTICATION_SUBTYPE,VARCHAR(32)
SQLTypeMap=DEG_APP_TOKEN_FLAG,TINYINT
SQLTypeMap=DEG_AUTH_COUNT,TINYINT
SQLTypeMap=DEG_BLACKLIST_FLAG,TINYINT
SQLTypeMap=DEG_FULLAUTHTIMESTAMP,BIGINT
SQLTypeMap=DEG_EVENTTIMESTAMP,BIGINT
SQLTypeMap=TT_AUTOTIMESTAMP,BINARY(8)


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SnmeLoader]

ClassName=com.hp.usage.nme.schemaloader.NMESchemaLoader
Schema=SnmeSchemaLink


[/deployment/<%SIU_INSTANCE%>/<%PROCESS%>/SnmeLoader/SnmeSchemaLink]

Link=/SNMESchema
