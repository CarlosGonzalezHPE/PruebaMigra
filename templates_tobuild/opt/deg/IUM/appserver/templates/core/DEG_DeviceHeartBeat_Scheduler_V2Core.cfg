
[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core]


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors]

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=100.DeviceHeartBeatScheduler
ConnectorNames=300.JDBCOperationsConnector

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector]

ClassName=com.hp.usage.jdbc.JDBCClientConnector
OpNameAttribute=DEG_OEMDevJDBCOpNameString
Operations=000.DEG_DEVICE_DATA_DeleteWithIMSI
Operations=010.DEG_IMS_DATA_UpdateWithIMSI
Operations=020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus
Operations=050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI
Operations=060.DEG_TOKENS_UpdateDAI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/000.DEG_DEVICE_DATA_DeleteWithIMSI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=delete from DEG_DEVICE_DATA where DEG_IMSI=%DEG_IMSI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/000.DEG_DEVICE_DATA_DeleteWithIMSI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/000.DEG_DEVICE_DATA_DeleteWithIMSI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/000.DEG_DEVICE_DATA_DeleteWithIMSI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0000"
AdornOps=set DEG_OEMDevErrorMessageString "delete operation failed for DEG_DEVICE_DATA table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/000.DEG_DEVICE_DATA_DeleteWithIMSI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: delete operation failed for DEG_DEVICE_DATA table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/010.DEG_IMS_DATA_UpdateWithIMSI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=update DEG_IMS_DATA set DEG_UNIQUE_ID=null where DEG_IMSI=%DEG_IMSI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/010.DEG_IMS_DATA_UpdateWithIMSI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/010.DEG_IMS_DATA_UpdateWithIMSI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/010.DEG_IMS_DATA_UpdateWithIMSI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0001"
AdornOps=set DEG_OEMDevErrorMessageString "update failed for DEG_IMS_DATA table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/010.DEG_IMS_DATA_UpdateWithIMSI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: update failed for DEG_IMS_DATA table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=update DEG_COMPANION_TOKENS set DEG_UNIQUE_ID=%DEG_UNIQUE_ID,DEG_SERVICETOKEN_STATUS=%DEG_SERVICETOKEN_STATUS where DEG_IMSI=%DEG_IMSI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0002"
AdornOps=set DEG_OEMDevErrorMessageString "update failed for DEG_COMPANION_TOKENS table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: update failed for DEG_COMPANION_TOKENS table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/030.DEG_COMPANION_TOKENS_UpdateWithUniqueIdAndIMSI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=update DEG_COMPANION_TOKENS set DEG_UNIQUE_ID='',DEG_SERVICETOKEN_STATUS=%DEG_SERVICETOKEN_STATUS where DEG_IMSI=%DEG_IMSI and DEG_UNIQUE_ID=%DEG_UNIQUE_ID


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/030.DEG_COMPANION_TOKENS_UpdateWithUniqueIdAndIMSI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/030.DEG_COMPANION_TOKENS_UpdateWithUniqueIdAndIMSI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/030.DEG_COMPANION_TOKENS_UpdateWithUniqueIdAndIMSI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0003"
AdornOps=set DEG_OEMDevErrorMessageString "update failed for DEG_COMPANION_TOKENS table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/030.DEG_COMPANION_TOKENS_UpdateWithUniqueIdAndIMSI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: update failed for DEG_COMPANION_TOKENS table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=delete from DEG_DEVICE_HEARTBEAT where DEG_IMSI=%DEG_IMSI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0004"
AdornOps=set DEG_OEMDevErrorMessageString "failed to delete row from DEG_DEVICE_HEARTBEAT table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: failed to delete row from DEG_DEVICE_HEARTBEAT table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/060.DEG_TOKENS_UpdateDAI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=update DEG_TOKENS set DEG_DAI=%DEG_DAI where DEG_IMSI=%DEG_IMSI


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/060.DEG_TOKENS_UpdateDAI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/060.DEG_TOKENS_UpdateDAI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/060.DEG_TOKENS_UpdateDAI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0005"
AdornOps=set DEG_OEMDevErrorMessageString "update failed for DEG_TOKENS table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/300.JDBCOperationsConnector/060.DEG_TOKENS_UpdateDAI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: update failed for DEG_TOKENS table : 


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/100.DeviceHeartBeatScheduler]

ClassName=com.hp.siu.scheduler.Scheduler
ScheduledJobs=100.MonitorDeviceHeartBeatTable

#QXCM1001544811: TaskLogLevel attribute for all of ScheduledJob is set.
[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/100.DeviceHeartBeatScheduler/100.MonitorDeviceHeartBeatTable]

MaxExecutions=-1
PollIntervalClassName=com.hp.siu.utils.SecondsInterval
QueryInterval=5m
Tasks=1.LookUpHeartBeatTable
TaskLogLevel=DEBUG4

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/Connectors/100.DeviceHeartBeatScheduler/100.MonitorDeviceHeartBeatTable/1.LookUpHeartBeatTable]

ClassName=com.hp.siu.sessionserver.InvokeRuleChainTask
InputNMEAttributes=EndTime,%current_time%
RuleChain=100.LookUpHeartBeatTableRuleChain

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService]

ClassName=com.hp.siu.serverutils.RefDataServiceManager
QueryNames=LookUpforPendingFlag
QueryNames=LookUpforClearFlag
QueryNames=DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement
QueryNames=DEG_TOKENS_ByIMSI

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_IMSI,DEG_IMSI
FieldExtracted=NEXT_HB_TIME_BINT,NEXT_HB_TIME_BINT
FieldExtracted=LAST_SENT_HB_TIME_BINT,LAST_SENT_HB_TIME_BINT
FieldExtracted=PENDING_HB_RESPONSE_FLAG,PENDING_HB_RESPONSE_FLAG
FieldExtracted=FIRST_GETPROV_TIME_BINT,FIRST_GETPROV_TIME_BINT
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS  FROM DEG_DEVICE_HEARTBEAT WHERE PENDING_HB_RESPONSE_FLAG = %PENDING_HB_RESPONSE_FLAG
ResultAttribute=DEG_HBMatchFoundInteger
ResultIndexAttribute=DEG_HBSigIndexInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=200.SetErrorMessage
RuleNames=100.LogAlarming

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_HBErrorMessageString
Attributes=DEG_HBDatabaseErrorFlagInteger
Attributes=DEG_HBSigIndexInteger
Attributes=DEG_HBMatchFoundInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error:

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ErrorRule/200.SetErrorMessage]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HBDatabaseErrorFlagInteger 1
AdornOps=set DEG_HBErrorMessageString "Unable to access DEG_DEVICE_HEARTBEAT table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0006"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HBMatchFoundInteger 0
AdornOps=set DEG_HBDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_DEVICE_HEARTBEAT"
AdornOps=set DEG_HBPendingResponseFlagInteger 1
AdornOps=copy DEG_HBPendingResponseFlagInteger PENDING_HB_RESPONSE_FLAG

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/FinalRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_HBMatchFoundInteger DEG_HBMatchFoundInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitialRule
RuleNames=200.Log
RuleNames=300.CheckClearHBRecords

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/100.InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=setsystime DEG_HBCurrentTimeStampLong
AdornOps=setifnull FIRST_GETPROV_TIME_BINT 0
AdornOps=copy FIRST_GETPROV_TIME_BINT DEG_HBFirstGetProvTimestampLong
AdornOps=copy NEXT_HB_TIME_BINT DEG_NextHBTimestampLong
AdornOps=setifnull LAST_SENT_HB_TIME_BINT 0
AdornOps=copy LAST_SENT_HB_TIME_BINT DEG_LastSentHBTimestampLong
AdornOps=set DEG_DaiHBAckWindowLong ${DEG_DAI_HEARTBEAT_ACK_WINDOW}
AdornOps=+ DEG_LastSentHBTimestampLong DEG_DaiHBAckWindowLong DEG_LastSentHBTimestampLong
AdornOps=copy DEG_IMSI DEG_OEMDevImsiString
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0007"
AdornOps=set DEG_OEMDevMessageString "DeviceHeartBeatScheduler - LookUpforClearFlag"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/200.Log]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Attributes=DEG_OEMDevMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_IMSI
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=FIRST_GETPROV_TIME_BINT
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_NextHBTimestampLong
Attributes=DEG_DaiHBAckWindowLong
Attributes=DEG_LastSentHBTimestampLong
Message=DeviceHeartBeatScheduler - LookUpforClearFlag:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/300.CheckClearHBRecords]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HBCurrentTimeStampLong,>,DEG_LastSentHBTimestampLong

TrueRuleChain=100.CallDiableCreditials
TrueRuleChain=200.CheckDAIDisableFlag

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/300.CheckClearHBRecords/100.CallDiableCreditials]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=DAI_DisableCredentials
ResponseAttributes=DEG_OEMDevDAIDisableFlagInteger
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/300.CheckClearHBRecords/200.CheckDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDAIDisableFlagInteger,=,1

TrueRuleChain=010.SetErrorResponse
TrueRuleChain=100.SetErrorLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/300.CheckClearHBRecords/200.CheckDAIDisableFlag/010.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0008"
AdornOps=set DEG_OEMDevErrorMessageString "DeviceHeartBeatScheduler - No Data in the tables, Credentials cant be disabled"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforClearFlag/ResultRowRule/300.CheckClearHBRecords/200.CheckDAIDisableFlag/100.SetErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_OEMDevDAIDisableFlagInteger
Attributes=DEG_NextHBTimestampLong
Attributes=DEG_DaiHBAckWindowLong
Attributes=DEG_LastSentHBTimestampLong
Message=DeviceHeartBeatScheduler - No Data in the tables, Credentials cant be disabled:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_IMSI,DEG_IMSI
FieldExtracted=NEXT_HB_TIME_BINT,NEXT_HB_TIME_BINT
FieldExtracted=LAST_SENT_HB_TIME_BINT,LAST_SENT_HB_TIME_BINT
FieldExtracted=PENDING_HB_RESPONSE_FLAG,PENDING_HB_RESPONSE_FLAG
FieldExtracted=FIRST_GETPROV_TIME_BINT,FIRST_GETPROV_TIME_BINT
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS  FROM DEG_DEVICE_HEARTBEAT WHERE PENDING_HB_RESPONSE_FLAG = %PENDING_HB_RESPONSE_FLAG
ResultAttribute=DEG_HBMatchFoundInteger
ResultIndexAttribute=DEG_HBSigIndexInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=200.SetErrorMessage
RuleNames=100.LogAlarming

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_HBDatabaseErrorFlagInteger
Attributes=DEG_HBMatchFoundInteger
Attributes=DEG_HBErrorMessageString
Attributes=DEG_HBSigIndexInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error:

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ErrorRule/200.SetErrorMessage]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HBDatabaseErrorFlagInteger 1
AdornOps=set DEG_HBErrorMessageString "Unable to access DEG_DEVICE_HEARTBEAT table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0009"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to access DEG_DEVICE_HEARTBEAT table"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HBMatchFoundInteger 0
AdornOps=set DEG_HBDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_DEVICE_HEARTBEAT"
AdornOps=set DEG_HBPendingResponseFlagInteger 0
AdornOps=copy DEG_HBPendingResponseFlagInteger PENDING_HB_RESPONSE_FLAG

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitialRule
RuleNames=200.Log
RuleNames=300.CheckDueHBRecords

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/100.InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=setsystime DEG_HBCurrentTimeStampLong
AdornOps=setifnull FIRST_GETPROV_TIME_BINT 0
AdornOps=copy FIRST_GETPROV_TIME_BINT DEG_HBFirstGetProvTimestampLong
AdornOps=copy NEXT_HB_TIME_BINT DEG_NextHBTimestampLong
AdornOps=copy DEG_IMSI DEG_OEMDevImsiString
AdornOps=copy DEG_IMSI DEG_CarrIMSIString
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0010"
AdornOps=set DEG_OEMDevMessageString "DeviceHeartBeatScheduler - ExpiredSessions"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/200.Log]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Attributes=DEG_IMSI
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=FIRST_GETPROV_TIME_BINT
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_NextHBTimestampLong
Attributes=DEG_DaiHBAckWindowLong
Attributes=DEG_LastSentHBTimestampLong
Message=DeviceHeartBeatScheduler - ExpiredSessions:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HBCurrentTimeStampLong,>=,DEG_NextHBTimestampLong

TrueRuleChain=100.SendAPNSNotifiaction
TrueRuleChain=200.CalculateNextHBTS
TrueRuleChain=300.UpdateDeviceHBTable
FalseRuleChain=050.SetErrorResponse
FalseRuleChain=100.LogRule1

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/050.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0011"
AdornOps=set DEG_OEMDevMessageString "DeviceHeartBeatScheduler - Sending Notification:Under false RuleChain"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/100.LogRule1]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Attributes=DEG_IMSI
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=FIRST_GETPROV_TIME_BINT
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_NextHBTimestampLong
Message=DeviceHeartBeatScheduler - Sending Notification:Under false RuleChain::::
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/100.SendAPNSNotifiaction]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=300.DEGHBSendingNotificationRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/200.CalculateNextHBTS]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=200.DEGHBCalculateNextHBRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitDeviceHeartBeatUpdate
RuleNames=200.ExecuteDeviceHeartBeatUpdate
RuleNames=210.CheckDeviceHeartBeatUpdateStatus

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/100.InitDeviceHeartBeatUpdate]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set log_DB_Operation UPDATE
AdornOps=set log_Table_Name DEG_DEVICE_HEARTBEAT
AdornOps=set DEG_HeartBeatSessionStoreErrorFlagInteger 0
AdornOps=set DEG_HeartBeatSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_HBPendingResponseFlagInteger 1
AdornOps=copy DEG_HBPendingResponseFlagInteger PENDING_HB_RESPONSE_FLAG
AdornOps=setsystime LAST_SENT_HB_TIME_BINT
AdornOps=copy DEG_NextHBTimestampLong NEXT_HB_TIME_BINT

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/200.ExecuteDeviceHeartBeatUpdate]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.HeartBeatSessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=NEXT_HB_TIME_BINT,NEXT_HB_TIME_BINT
MapAttributes=LAST_SENT_HB_TIME_BINT,LAST_SENT_HB_TIME_BINT
MapAttributes=PENDING_HB_RESPONSE_FLAG,PENDING_HB_RESPONSE_FLAG
NotExistsErrorRuleChain=001.HeartBeatSessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_HEARTBEAT_SessionStore

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HeartBeatSessionStoreErrorFlagInteger,!=,0
FalseRuleChain=200.CheckKeyExists
TrueRuleChain=010.SetErrorResponse
TrueRuleChain=100.ErrorLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus/010.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0012"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to Access DEG_DEVICE_HEARTBEAT Table"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus/100.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Unable to Access DEG_DEVICE_HEARTBEAT Table:

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus/200.CheckKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HeartBeatSessionStoreKeyExistsFlagInteger,=,0

TrueRuleChain=010.SetErrorResponse
TrueRuleChain=100.ErrorLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus/200.CheckKeyExists/010.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0013"
AdornOps=set DEG_OEMDevErrorMessageString "Row not found in  DEG_DEVICE_HEARTBEAT Table:"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/LookUpforPendingFlag/ResultRowRule/300.CheckDueHBRecords/300.UpdateDeviceHBTable/210.CheckDeviceHeartBeatUpdateStatus/200.CheckKeyExists/100.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=WARNING
Message=Row not found in  DEG_DEVICE_HEARTBEAT Table:

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains]

ClassName=com.hp.siu.collector.rules.RuleChainManager
RuleChainNames=100.LookUpHeartBeatTableRuleChain
RuleChainNames=200.DEGHBCalculateNextHBRuleChain
RuleChainNames=300.DEGHBSendingNotificationRuleChain
RuleChainNames=000.SessionStoreDefaultErrorRuleChain
RuleChainNames=001.SessionStoreKeyNotExistsRuleChain
RuleChainNames=000.HeartBeatSessionStoreDefaultErrorRuleChain
RuleChainNames=001.HeartBeatSessionStoreKeyNotExistsRuleChain
RuleChainNames=CUSTRC_Apple_HB_Schedular

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.ClearDuplicateKeyFlag


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain/100.ClearDuplicateKeyFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevSessionStoreKeyExistsFlagInteger 0

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/100.SetLookupErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0014"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/200.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_TOKENS_ByIMSI]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MDN,DEG_MDN
FieldExtracted=DEG_IMSI,DEG_IMSI
FieldExtracted=DEG_UNIQUE_ID,DEG_UNIQUE_ID
FieldExtracted=DEG_SUBSTOKEN,DEG_SUBSTOKEN
FieldExtracted=DEG_TOKENSTATUS,DEG_TOKENSTATUS
FieldExtracted=DEG_EVENTTIMESTAMP,DEG_EVENTTIMESTAMP
CommonPolicyID=Policy1
QueryString=select %FIELDS from DEG_TOKENS WHERE DEG_IMSI=%DEG_IMSI
ResultAttribute=DEG_RowFoundInteger
ResultIndexAttribute=DEG_RowFoundIndexInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_TOKENS_ByIMSI/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetErrorLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_TOKENS_ByIMSI/ErrorRule/100.SetErrorLog]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_TOKENS_ByIMSI/InitialRule]

AdornOps=set DEG_RowFoundInteger 0
AdornOps=set DEG_MDN 0
AdornOps=set DEG_SUBSTOKEN ""
AdornOps=set DEG_TOKENSTATUS ""
AdornOps=set DEG_EVENTTIMESTAMP 0
AdornOps=set DEG_UNIQUE_ID ""
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_UNIQUE_ID,DEG_UNIQUE_ID
FieldExtracted=DEG_ENTITLEMENT_NAME,DEG_ENTITLEMENT_NAME
FieldExtracted=DEG_APNS_TOKEN,DEG_APNS_TOKEN
FieldExtracted=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
FieldExtracted=DEG_IMSI,DEG_IMSI
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS FROM DEG_DEVICE_DATA where DEG_UNIQUE_ID=%DEG_UNIQUE_ID and DEG_ENTITLEMENT_NAME=%DEG_ENTITLEMENT_NAME
ResultAttribute=DEG_RowFoundInteger
ResultIndexAttribute=DEG_RowFoundIndexInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=200.SetErrorFlag

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement/ErrorRule/200.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_RowFoundInteger 0
AdornOps=set DEG_CDevDBErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_DEVICE_DATA"
AdornOps=set DEG_APNS_TOKEN ""
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 0
AdornOps=set DEG_OEMDevProvisioningAPNSTokenList null
AdornOps=set DEG_OEMDevProvisioningEntitlementList null
AdornOps=set DEG_OEMDevProvisioningUniqueIdList null


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement/ResultRowRule]

ClassName=RuleChain
RuleNames=SetPushNotificationAttribute

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/ReferenceDataService/DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement/ResultRowRule/SetPushNotificationAttribute]

ClassName=AdornmentRule
AdornOps=setifnull DEG_APNS_TOKEN ""
AdornOps=copy DEG_APNS_TOKEN DEG_OEMDevAPNSTokenString
AdornOps=copy DEG_ENTITLEMENT_NAME DEG_OEMDevAPNSTopicString
AdornOps=copy DEG_UNIQUE_ID DEG_APNSUniqueIdString

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=005.SetErrorResponse
RuleNames=010.LogNMERule1
RuleNames=100.GetValuesForSendingNotification
RuleNames=110.CheckDAIDisableFlag
RuleNames=115.SetErrorResponse
RuleNames=002.LogNMERule2
RuleNames=200.CallSendAPNSNotification


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/005.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0015"
AdornOps=set DEG_OEMDevMessageString "Processing log inside the 300.DEGHBSendingNotificationRuleChain::before the gettting Input values::"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/010.LogNMERule1]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevImsiString
Attributes=DEG_OEMDevDAIDisableFlagInteger
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=Processing log inside the 300.DEGHBSendingNotificationRuleChain::before the gettting Input values::
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/100.GetValuesForSendingNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEG_OEMDevImsiString
RuleChain=DAI_DisableCredentialsWithHeartbeatRuleChain
ResponseAttributes=DEG_PUSH_NOTIFICATION_STATUS
ResponseAttributes=DEG_OEMDevAPNSTopicString
ResponseAttributes=DEG_OEMDevAPNSTokenString
ResponseAttributes=DEG_OEMDevUniqueIDString
ResponseAttributes=DEG_OEMDevDAIDisableFlagInteger
ResponseAttributes=DEG_MDN
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/110.CheckDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDAIDisableFlagInteger,=,1

TrueRuleChain=050.Response
TrueRuleChain=100.SetErrorResponse

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/110.CheckDAIDisableFlag/050.Response]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0016"
AdornOps=set DEG_OEMDevErrorMessageString "DeviceHeartBeatScheduler - Data not found in the tables , notifications not send to device"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/110.CheckDAIDisableFlag/100.SetErrorResponse]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevImsiString
Attributes=DEG_OEMDevDAIDisableFlagInteger
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=ERROR
Message=DeviceHeartBeatScheduler - Data not found in the tables , notifications not send to device:
NullAlso=true


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/115.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0017"
AdornOps=set DEG_OEMDevMessageString "Processing log inside the 300.DEGHBSendingNotificationRuleChain::after getting the input values"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/002.LogNMERule2]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevImsiString
Attributes=DEG_IMSI
Attributes=DEG_OEMDevPushNotificationStatusString
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_OEMDevAPNSTopicString
Attributes=DEG_OEMDevAPNSTokenString
Attributes=DEG_APNSUniqueIdString
Attributes=DEG_OEMDevUniqueIDString
Attributes=DEG_OEMDevDAIDisableFlagInteger
Attributes=DEG_MDN
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=Processing log inside the 300.DEGHBSendingNotificationRuleChain::after getting the input values::::
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/200.CallSendAPNSNotification]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_PUSH_NOTIFICATION_STATUS,=,6100
TrueRuleChain=000.CopyAPNSParams
TrueRuleChain=100.SendAPNSNotification

FalseRuleChain=001.SetErrorResponse
FalseRuleChain=003.LogNME3s


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/200.CallSendAPNSNotification/000.CopyAPNSParams]

ClassName=AdornmentRule
AdornOps=copy DEG_MDN DEG_CarrMDNLong
AdornOps=copy DEG_OEMDevImsiString DEG_CarrIMSIString
AdornOps=copy DEG_OEMDevAPNSTopicString DEG_APNSTopicString
AdornOps=copy DEG_OEMDevAPNSTokenString APNS_TokenString
AdornOps=set DEG_TriggerTypeString "service-token-invalidated"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/200.CallSendAPNSNotification/100.SendAPNSNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=CUSTRC_Apple_APNS_SendNotification_Init
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/200.CallSendAPNSNotification/001.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0018"
AdornOps=set DEG_OEMDevMessageString "Processing log inside 300.DEGHBSendingNotificationRuleChain::when Provstatus is not 6100"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/300.DEGHBSendingNotificationRuleChain/200.CallSendAPNSNotification/003.LogNME3s]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevImsiString
Attributes=DEG_IMSI
Attributes=DEG_OEMDevPushNotificationStatusString
Attributes=DEG_OEMDevAPNSTopicString
Attributes=DEG_OEMDevAPNSTokenString
Attributes=DEG_APNSUniqueIdString
Attributes=DEG_MDN
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=Processing log inside 300.DEGHBSendingNotificationRuleChain::when Provstatus is not 6100::::
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.HeartBeatSessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.HeartBeatSessionStoreDefaultErrorRuleChain/100.SetLookupErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HeartBeatSessionStoreErrorFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0019"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/000.HeartBeatSessionStoreDefaultErrorRuleChain/200.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error:

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/001.HeartBeatSessionStoreKeyNotExistsRuleChain]

ClassName=RuleChain
RuleNames=100.ClearDuplicateKeyFlag

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/001.HeartBeatSessionStoreKeyNotExistsRuleChain/100.ClearDuplicateKeyFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_HeartBeatSessionStoreKeyExistsFlagInteger 0

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CopyBeforeCUSTRC_Apple_HB_Schedular
RuleNames=200.ProcessCUSTRC_Apple_HB_Schedular
RuleNames=300.CopyAfterCUSTRC_Apple_HB_Schedular
RuleNames=400.AddHeartBeatIntervalToList
RuleNames=500.CalculateNextHBTS
RuleName=505.SetErrorResponse
RuleNames=510.LogNMERule1
RuleNames=600.CalculateNextHBTSMorethanList

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/100.CopyBeforeCUSTRC_Apple_HB_Schedular]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=setifnull DEG_HBIntervalString ""
AdornOps=copy DEG_HBIntervalString CUST_HB_OUT_HBINTERVALString
AdornOps=set DEG_HBIntervalArrayIndexInteger 1
AdornOps=set DEG_HBIntervalFlagInteger 0
AdornOps=- DEG_HBCurrentTimeStampLong DEG_HBFirstGetProvTimestampLong DEG_HBDiffTimesStampLong

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/200.ProcessCUSTRC_Apple_HB_Schedular]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=CUSTRC_Apple_HB_Schedular
UseRuleChainManagerPool=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/300.CopyAfterCUSTRC_Apple_HB_Schedular]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy CUST_HB_OUT_HBINTERVALString DEG_HBIntervalString

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/400.AddHeartBeatIntervalToList]

ClassName=StringTokenizerRule
SourceAttribute=DEG_HBIntervalString
TokenAttribute=DEG_HBIntervalTokenString
Delimiter=,

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/400.AddHeartBeatIntervalToList/IterationRule]

ClassName=AddToListAttributeRule
InputAttribute=DEG_HBIntervalTokenString
ListAttribute=DEG_HBIntervalList
Delimiters=,

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_HBIntervalList
RuleChain=100.IncrementArrayIndex
RuleChain=001.LogRule1
RuleChain=200.GenerateNextHB
TmpAttributeName=DEG_HBIntervalTempLong

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/001.LogRule1]

ClassName=LogNMERule
LogLevel=DEBUG
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Message=inside ListAttributeIterator:::::
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_HBDiffTimesStampLong
Attributes=DEG_HBIntervalArrayIndexInteger
Attributes=DEG_HBIntervalLong
Attributes=CUST_HB_OUT_HBINTERVALString
Attributes=DEG_HBIntervalString
Attributes=DEG_HBIntervalTokenString
Attributes=DEG_HBIntervalList
Attributes=DEG_HBIntervalTempLong
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/100.IncrementArrayIndex]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_HBIntervalTempLong DEG_HBIntervalLong
AdornOps=+ DEG_HBIntervalArrayIndexInteger 1 DEG_HBIntervalArrayIndexInteger
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0020"
AdornOps=set DEG_OEMDevMessageString "Inside ListAttributeIterator"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/200.GenerateNextHB]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HBDiffTimesStampLong,<=,DEG_HBIntervalTempLong
Conditions=DEG_HBIntervalFlagInteger,=,0

Operations=and

TrueRuleChain=100.SetNextHBValue

FalseRuleChain=002.SetLogInfo
FalseRuleChain=002.LogNME3

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/200.GenerateNextHB/002.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0021"
AdornOps=set DEG_OEMDevMessageString "Inside ListAttributeIterator"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/200.GenerateNextHB/002.LogNME3]

ClassName=LogNMERule
LogLevel=DEBUG
Message=inside ListAttributeIterator:::::incase of FalseRuleChain 002.LogNME3:::
Attributes=DEG_OEMDevMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_HBDiffTimesStampLong
Attributes=DEG_HBIntervalTempLong
Attributes=DEG_NextHBTimestampLong
Attributes=DEG_HBIntervalArrayIndexInteger
Attributes=DEG_HBIntervalLong
Attributes=CUST_HB_OUT_HBINTERVALString
Attributes=DEG_HBIntervalString
Attributes=DEG_HBIntervalTokenString
Attributes=DEG_HBIntervalList
Attributes=DEG_HBIntervalTempLong
Attributes=DEG_HBIntervalLong
Attributes=DEG_HBIntervalFlagInteger

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/500.CalculateNextHBTS/200.GenerateNextHB/100.SetNextHBValue]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=+ DEG_HBCurrentTimeStampLong DEG_HBIntervalTempLong DEG_NextHBTimestampLong
AdornOps=set DEG_HBIntervalFlagInteger 1


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/505.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0022"
AdornOps=set DEG_OEMDevMessageString "Inside ListAttributeIterator:::::before CalculateNextHBTSMorethanList"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/510.LogNMERule1]

ClassName=LogNMERule
LogLevel=DEBUG
Message=inside ListAttributeIterator:::::before CalculateNextHBTSMorethanList:::
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Attributes=DEG_HBCurrentTimeStampLong
Attributes=DEG_HBFirstGetProvTimestampLong
Attributes=DEG_HBDiffTimesStampLong
Attributes=DEG_HBIntervalTempLong
Attributes=DEG_NextHBTimestampLong
Attributes=DEG_HBIntervalArrayIndexInteger
Attributes=DEG_HBIntervalLong

Attributes=CUST_HB_OUT_HBINTERVALString
Attributes=DEG_HBIntervalString
Attributes=DEG_HBIntervalTokenString
Attributes=DEG_HBIntervalList
Attributes=DEG_HBIntervalTempLong
Attributes=DEG_HBIntervalLong
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/600.CalculateNextHBTSMorethanList]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_HBDiffTimesStampLong,>,DEG_HBIntervalLong

TrueRuleChain=100.SetNeatHBValue

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/200.DEGHBCalculateNextHBRuleChain/600.CalculateNextHBTSMorethanList/100.SetNeatHBValue]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=+ DEG_HBCurrentTimeStampLong DEG_HBIntervalLong DEG_NextHBTimestampLong

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=050.SetErrorResponse
RuleNames=100.StartingLog
RuleNames=110.LookupForSendHeartBeat
RuleNames=200.LookupForClearHeartBeat

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/050.SetErrorResponse]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0023"
AdornOps=set DEG_OEMDevMessageString "HeartBeat Schedular Started lookup into DEG_DEVICE_HEARTBEAT"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/100.StartingLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_HBPendingResponseFlagInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=HeartBeat Schedular Started lookup into DEG_DEVICE_HEARTBEAT:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpforPendingFlag

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetErrorInfo
RuleNames=ErrorLog


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/ErrorRule/SetErrorInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0024"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to access DEG_DEVICE_HEARTBEAT table"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/ErrorRule/ErrorLog]
ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_HBPendingResponseFlagInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=LookUpforPendingFlag:Unable to access DEG_DEVICE_HEARTBEAT table:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/NoMatchRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=NoMatchLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/NoMatchRule/SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0025"
AdornOps=set DEG_OEMDevMessageString "HeartBeatSchedular finished processing the records for the pending flag"

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/110.LookupForSendHeartBeat/NoMatchRule/NoMatchLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_HBPendingResponseFlagInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=LookUpforPendingFlag:HeartBeatSchedular finished processing the records for the pending flag:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpforClearFlag

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetErrorInfo
RuleNames=ErrorLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/ErrorRule/SetErrorInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0026"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to access DEG_DEVICE_HEARTBEAT table"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/ErrorRule/ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=LookUpforClearFlag:Unable to access DEG_DEVICE_HEARTBEAT table:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/NoMatchRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=NoMatchLog

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/NoMatchRule]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0027"
AdornOps=set DEG_OEMDevMessageString "HeartBeatSchedular finished processing the records for the clear flag"


[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/RuleChains/100.LookUpHeartBeatTableRuleChain/200.LookupForClearHeartBeat/NoMatchRule]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=DEG_HBPendingResponseFlagInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=DEBUG
Message=LookUpforPendingFlag:HeartBeatSchedular finished processing the records for the clear flag:
NullAlso=true

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/SessionStores]

SessionStoreNames=DEG_DEVICE_HEARTBEAT_SessionStore
SessionStoreNames=DEG_IMS_DATA_SessionStore

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/SessionStores/DEG_DEVICE_HEARTBEAT_SessionStore]

Attributes=DEG_IMSI,key
Attributes=NEXT_HB_TIME_BINT
Attributes=LAST_SENT_HB_TIME_BINT
Attributes=PENDING_HB_RESPONSE_FLAG
Attributes=FIRST_GETPROV_TIME_BINT
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
DatabaseId=DEG_DEVICE_HEARTBEAT
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_SSL_SESSION}
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=NEXT_HB_TIME_BINT,BIGINT
SQLTypeMap=LAST_SENT_HB_TIME_BINT,BIGINT
SQLTypeMap=PENDING_HB_RESPONSE_FLAG,TINYINT
SQLTypeMap=FIRST_GETPROV_TIME_BINT,BIGINT
CommonPolicyID=Policy1

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/SessionStores/DEG_IMS_DATA_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_DEVICE_ID,key
Attributes=DEG_UNIQUE_ID
Attributes=DEG_IMS_PRIVATE_ID
Attributes=DEG_IMS_PUBLIC_ID
Attributes=DEG_SIP_USERNAME
Attributes=DEG_SIP_PASSWORD
Attributes=DEG_PROVTIME
Attributes=DEG_LASTUPDATE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
DatabaseId=DEG_IMS_DATA
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_DEG_TOKENS}
NativeConditions=1.MatchByIMSI
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_DEVICE_ID,VARCHAR(64)
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_IMS_PRIVATE_ID,VARCHAR(256)
SQLTypeMap=DEG_IMS_PUBLIC_ID,VARCHAR(256)
SQLTypeMap=DEG_SIP_USERNAME,VARCHAR(256)
SQLTypeMap=DEG_SIP_PASSWORD,VARCHAR(256)
SQLTypeMap=DEG_PROVTIME,TIMESTAMP(6)
SQLTypeMap=DEG_LASTUPDATE,DATE
CommonPolicyID=Policy1

[/templates/DEG/HeartBeat/HeartBeatSchedular_V2Core/SessionStores/DEG_IMS_DATA_SessionStore/1.MatchByIMSI]

Condition=where DEG_IMSI=%DEG_IMSI

