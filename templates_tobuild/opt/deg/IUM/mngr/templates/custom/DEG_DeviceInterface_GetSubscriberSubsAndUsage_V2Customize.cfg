

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize]


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/Connectors]

ConnectorNames=130.StoredProcConnectorDEG


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/Connectors/130.StoredProcConnectorDEG]

ClassName=com.hp.usage.connector.lookup.jdbc.storedproc.JDBCStoredProcConnector
ProcNameAttribute=DEG_OEMDevSubcriptionProcNameString
StoredProcedures=LookupSubscriptionsByMDN


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/Connectors/130.StoredProcConnectorDEG/LookupSubscriptionsByMDN]

ClassName=com.hp.usage.connector.lookup.jdbc.storedproc.JDBCStoredProcedure
Parameters=DEG_OEMDevSubscriptionUsageMDNLong,IN,NUMERIC
Parameters=CUST_GUI_IN_SubsVoiceInFlagInteger,IN,NUMERIC
Parameters=CUST_GUI_IN_SubsDataInFlagInteger,IN,NUMERIC
Parameters=CUST_GUI_IN_SubsMsgInFlagInteger,IN,NUMERIC
Parameters=CUST_GUI_IN_SubsAccInfoInFlagInteger,IN,NUMERIC
Parameters=DEG_OEMDevSubscriptionVoiceListString,OUT,VARCHAR
Parameters=DEG_OEMDevSubscriptionDataListString,OUT,VARCHAR
Parameters=DEG_OEMDevSubscriptionMessageListString,OUT,VARCHAR
Parameters=DEG_OEMDevSubscriptionAccInfoListString,OUT,VARCHAR
Parameters=DEG_OEMDevSubsVoiceSourceFlagInteger,OUT,NUMERIC
Parameters=DEG_OEMDevSubsDataSourceFlagInteger,OUT,NUMERIC
Parameters=DEG_OEMDevSubsMsgSourceFlagInteger,OUT,NUMERIC
Parameters=DEG_OEMDevSubsAccInfoSourceFlagInteger,OUT,NUMERIC
Parameters=DEG_OEMDevRequestProcessedInteger,OUT,NUMERIC
ProcedureName=LookupSubscriptionsByMDN

#Modifying to connection pool, similar to QXCM1001545333:(DB connection was failing in centralized architecture while doing a stored proc)
[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/Connectors/130.StoredProcConnectorDEG/EndPoints]

ClassName=com.hp.usage.connector.DynamicEndPointSelector
KeyAttributeName=ConnectionPoolID


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/Connectors/130.StoredProcConnectorDEG/EndPoints/EndPoint]

ClassName=com.hp.usage.connector.lookup.jdbc.storedproc.JDBCEndPoint
AutoCommit=false
NumConnections=${DEG_CON_INITIAL_POOL_SIZE}
ConnectionPoolID=DEG_DSN_TT_Rem_Pool
ValidationQuery=SELECT 1 FROM Dual
WaitForConnection=${DEG_WAIT_FOR_CON_TIME}


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService]

QueryNames=DEG_SUBS_MSG_USAGE_MDNLOOKUP
QueryNames=DEG_SUBS_DATA_USAGE_MDNLOOKUP
QueryNames=DEG_SUBS_VOICE_USAGE_MDNLOOKUP
QueryNames=DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
ErrorMessageAttribute=DEG_OEMDevErrorMessageString
ErrorNameAttribute=DEG_OEMDevErrorNameString
FieldExtracted=DEG_CATEGORYID,CUST_GUI_OUT_CATEGORYID
FieldExtracted=DEG_MOSMS,CUST_GUI_OUT_MOSMS
FieldExtracted=DEG_MTSMS,CUST_GUI_OUT_MTSMS
FieldExtracted=DEG_TOTALSMS,CUST_GUI_OUT_TOTALSMS
FieldExtracted=DEG_MOMM,CUST_GUI_OUT_MOMM
FieldExtracted=DEG_MTMMS,CUST_GUI_OUT_MTMMS
FieldExtracted=DEG_TOTALMMS,CUST_GUI_OUT_TOTALMMS
FieldExtracted=DEG_SMSCAPACITY,CUST_GUI_OUT_SMSCAPACITY
FieldExtracted=DEG_MMSCAPACITY,CUST_GUI_OUT_MMSCAPACITY
FieldExtracted=DEG_LASTUPDATE,DEG_LASTUPDATE
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS FROM DEG_SUBS_MSG_USAGE WHERE DEG_MDN=%CUST_GUI_IN_MDN
ResultAttribute=DEG_CDevMatchFoundInteger
ResultIndexAttribute=DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SUBS_MSG_USAGE"
AdornOps=set DEG_CDevMatchFoundInteger 0
AdornOps=set DEG_CDevIndexInteger 0


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming
RuleNames=200.SetErrorFlag

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.



[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ErrorRule/200.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CopyDateTimeToInteger
RuleNames=200.InvokeSetDateTime
RuleNames=210.CopyTimeStampString2OutString
RuleNames=300.SetJSONResponse
RuleNames=400.LogAfterResponse


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule/100.CopyDateTimeToInteger]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_LASTUPDATE DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong
AdornOps=set DEG_OEMDevUsageMsgSourceFlagInteger 1
AdornOps=- DEG_CDevIndexInteger 1 DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule/200.InvokeSetDateTime]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule/210.CopyTimeStampString2OutString]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_DateTimeStampString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule/300.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_CATEGORYID,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].category_id.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_MOSMS,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].mo_sms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_MTSMS,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].mt_sms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_TOTALSMS,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].total_sms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_MOMM,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].mo_mms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_MTMMS,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].mt_mms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_TOTALMMS,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].total_mms.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_SMSCAPACITY,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].sms_capacity.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_MMSCAPACITY,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].mms_capacity.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DateTimeStampString,jsonResponse.account_info_response.usage_info.message[DEG_CDevIndexInteger].timestamp.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/ResultRowRule/400.LogAfterResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespUsageMessage: "
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "CategoryId="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_CATEGORYID DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "MoSMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_MOSMS DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "MtSMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_MTSMS DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "TotalSMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_TOTALSMS DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "MoMMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_MOMM DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "MtMMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_MTMMS DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "TotalMMS="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_TOTALMMS DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "SMSCapacity="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_SMSCAPACITY DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "MMSCapacity="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_MMSCAPACITY DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "Timestamp="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_LASTUPDATE DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr ; DEG_OEMDevUsageTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_MSG_USAGE_MDNLOOKUP/FinalRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_CDevMatchFoundInteger DEG_CDevMatchFoundInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
ErrorMessageAttribute=DEG_OEMDevErrorMessageString
ErrorNameAttribute=DEG_OEMDevErrorNameString
FieldExtracted=DEG_CATEGORYID,CUST_GUI_OUT_CATEGORYID
FieldExtracted=DEG_DATACAPACITY,CUST_GUI_OUT_DATACAPACITY
FieldExtracted=DEG_DATAUSED,CUST_GUI_OUT_DATAUSED
FieldExtracted=DEG_USEDFORALERT,CUST_GUI_OUT_USEDFORALERT
FieldExtracted=DEG_LASTUPDATE,DEG_LASTUPDATE
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS FROM DEG_SUBS_DATA_USAGE WHERE DEG_MDN=%CUST_GUI_IN_MDN
ResultAttribute=DEG_CDevMatchFoundInteger
ResultIndexAttribute=DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevIndexInteger 0
AdornOps=set DEG_CDevMatchFoundInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SUBS_DATA_USAGE"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming
RuleNames=200.SetErrorFlag

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.



[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ErrorRule/200.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CopyStartDateToInteger
RuleNames=200.InvokeSetDateTime
RuleNames=210.CopyTimeStampString2OutString
RuleNames=300.SetJSONResponse
RuleNames=400.LogAfterResponse


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule/100.CopyStartDateToInteger]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_LASTUPDATE DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong
AdornOps=set DEG_OEMDevUsageDataSourceFlagInteger 1
AdornOps=- DEG_CDevIndexInteger 1 DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule/200.InvokeSetDateTime]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule/210.CopyTimeStampString2OutString]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_DateTimeStampString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule/300.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_CATEGORYID,jsonResponse.account_info_response.usage_info.data[DEG_CDevIndexInteger].category_id.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DATACAPACITY,jsonResponse.account_info_response.usage_info.data[DEG_CDevIndexInteger].data_capacity.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DATAUSED,jsonResponse.account_info_response.usage_info.data[DEG_CDevIndexInteger].data_used.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_USEDFORALERT,jsonResponse.account_info_response.usage_info.data[DEG_CDevIndexInteger].use_for_alert.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DateTimeStampString,jsonResponse.account_info_response.usage_info.data[DEG_CDevIndexInteger].timestamp.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/ResultRowRule/400.LogAfterResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespUsageData: "
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "CategoryId="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_CATEGORYID DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "UseForAlert="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_USEDFORALERT DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "DataCapacity="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_DATACAPACITY DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "DataUsed="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_DATAUSED DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "Timestamp="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_LASTUPDATE DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr ; DEG_OEMDevUsageTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_DATA_USAGE_MDNLOOKUP/FinalRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_CDevMatchFoundInteger DEG_CDevMatchFoundInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
ErrorMessageAttribute=DEG_OEMDevErrorMessageString
ErrorNameAttribute=DEG_OEMDevErrorNameString
FieldExtracted=DEG_CATEGORYID,CUST_GUI_OUT_CATEGORYID
FieldExtracted=DEG_VOICECAPACITY,CUST_GUI_OUT_VOICECAPACITY
FieldExtracted=DEG_VOICEUSED,CUST_GUI_OUT_VOICEUSED
FieldExtracted=DEG_LASTUPDATE,DEG_LASTUPDATE
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS FROM DEG_SUBS_VOICE_USAGE WHERE DEG_MDN=%CUST_GUI_IN_MDN
ResultAttribute=DEG_CDevMatchFoundInteger
ResultIndexAttribute=DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevIndexInteger 0
AdornOps=set DEG_CDevMatchFoundInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SUBS_VOICE_USAGE"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming
RuleNames=200.SetErrorFlag

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.



[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ErrorRule/200.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CopyDateToInteger
RuleNames=200.InvokeSetDateTime
RuleNames=210.CopyTimeStampString2OutString
RuleNames=300.SetJSONResponse
RuleNames=400.LogAfterResponse


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule/100.CopyDateToInteger]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_LASTUPDATE DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong
AdornOps=set DEG_OEMDevUsageVoiceSourceFlagInteger 1
AdornOps=- DEG_CDevIndexInteger 1 DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule/200.InvokeSetDateTime]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule/210.CopyTimeStampString2OutString]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_DateTimeStampString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule/300.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_CATEGORYID,jsonResponse.account_info_response.usage_info.voice[DEG_CDevIndexInteger].category_id.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_VOICECAPACITY,jsonResponse.account_info_response.usage_info.voice[DEG_CDevIndexInteger].voice_capacity.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_VOICEUSED,jsonResponse.account_info_response.usage_info.voice[DEG_CDevIndexInteger].voice_used.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DateTimeStampString,jsonResponse.account_info_response.usage_info.voice[DEG_CDevIndexInteger].timestamp.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/ResultRowRule/400.LogAfterResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespUsageVoice: "
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "CategoryId="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_CATEGORYID DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "VoiceCapacity="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_VOICECAPACITY DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "VoiceUsed="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr CUST_GUI_OUT_VOICEUSED DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr , DEG_OEMDevUsageTypeListToStr
AdornOps=set DEG_Tmp3String "Timestamp="
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_Tmp3String DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr DEG_LASTUPDATE DEG_OEMDevUsageTypeListToStr
AdornOps=+ DEG_OEMDevUsageTypeListToStr ; DEG_OEMDevUsageTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_VOICE_USAGE_MDNLOOKUP/FinalRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_CDevMatchFoundInteger DEG_CDevMatchFoundInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
ErrorMessageAttribute=DEG_OEMDevErrorMessageString
ErrorNameAttribute=DEG_OEMDevErrorNameString
FieldExtracted=DEG_ICCID,CUST_GUI_OUT_ICCID
FieldExtracted=DEG_CATEGORYID,CUST_GUI_OUT_CATEGORYID
FieldExtracted=DEG_DATACAPACITY,CUST_GUI_OUT_DATACAPACITY
FieldExtracted=DEG_DATAUSED,CUST_GUI_OUT_DATAUSED
FieldExtracted=DEG_LASTUPDATE,DEG_LASTUPDATE
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS FROM DEG_SUBS_EXTENDED_DATA_USAGE WHERE DEG_MDN=%CUST_GUI_IN_MDN
ResultAttribute=DEG_CDevMatchFoundInteger
ResultIndexAttribute=DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevIndexInteger 0
AdornOps=set DEG_CDevMatchFoundInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SUBS_EXTENDED_DATA_USAGE"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.LogAlarming
RuleNames=200.SetErrorFlag

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ErrorRule/200.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevDBErrorFlagInteger 1
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CopyStartDateToInteger
RuleNames=200.InvokeSetDateTime
RuleNames=210.CopyTimeStampString2OutString
RuleNames=300.SetJSONResponse
RuleNames=400.LogAfterResponse


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule/100.CopyStartDateToInteger]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_LASTUPDATE DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong
AdornOps=set DEG_OEMDevSubsExtendedUsageInfoSourceFlagInteger 1
AdornOps=- DEG_CDevIndexInteger 1 DEG_CDevIndexInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule/200.InvokeSetDateTime]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule/210.CopyTimeStampString2OutString]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_DateTimeStampString
AdornOps=set CUST_GUI_OUT_SUBSCRIPTION_TYPE "Data"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule/300.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_ICCID,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].iccid.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_SUBSCRIPTION_TYPE,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].subscription_type[0].CData
NMEToStructuredNMEMap=CUST_GUI_OUT_CATEGORYID,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].category_id.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DATACAPACITY,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].data_capacity.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DATAUSED,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].data_used.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_DateTimeStampString,jsonResponse.account_info_response.extended_usage_info.data_usage_info[DEG_CDevIndexInteger].last_updated.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/ResultRowRule/400.LogAfterResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespExtendedUsageData: "
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "Iccid="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_ICCID DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "SubscriptionType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_SUBSCRIPTION_TYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "CategoryId="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_CATEGORYID DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "DataCapacity="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_DATACAPACITY DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "DataUsed="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_DATAUSED DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "Timestamp="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_LASTUPDATE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr ; DEG_OEMDevSubscriptionTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/ReferenceDataService/DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP/FinalRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_CDevMatchFoundInteger DEG_CDevMatchFoundInteger

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains]

RuleChainNames=CUSTRC_Apple_SubAndUsage_ExternalQuery
RuleChainNames=100.SetDateTimeStampRuleChain

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/100.SetDateTimeStampRuleChain]

ClassName=RuleChain
RuleNames=200.SetTimeZone
RuleNames=210.IntegerToDateTime
RuleNames=220.AddColonToDateTime


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/100.SetDateTimeStampRuleChain/200.SetTimeZone]

ClassName=AdornmentRule
AdornOps=set DEF_GUI_DateTimeZoneString "UTC"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/100.SetDateTimeStampRuleChain/210.IntegerToDateTime]

ClassName=com.hp.siu.collector.rules.IntegerToDateTime
DstAttributeName=DEF_GUI_DateTimeStampString
IntegerAttributeName=DEF_GUI_DateTimeStampLong
TimeFormat=yyyy-MM-dd'T'HH:mm:ssZ
TimeZoneAttributeName=DEF_GUI_DateTimeZoneString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/100.SetDateTimeStampRuleChain/220.AddColonToDateTime]

AdornOps=substr 0 22 DEF_GUI_DateTimeStampString DEG_OEMDevDateTmpTimeStamp1String
AdornOps=substr 22 length DEF_GUI_DateTimeStampString DEG_OEMDevDateTmpTimeStamp2String
AdornOps=+ DEG_OEMDevDateTmpTimeStamp1String : DEG_OEMDevDateTmpTimeStamp1String
AdornOps=+ DEG_OEMDevDateTmpTimeStamp1String DEG_OEMDevDateTmpTimeStamp2String DEF_GUI_DateTimeStampString
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery]

ClassName=RuleChain
RuleNames=000.TraceLog
RuleNames=050.SetSubscriptionUsageMDN
RuleNames=100.LookupUsage
RuleNames=200.LookupSubscription
RuleNames=210.LookupExtendedUsage
RuleNames=300.CheckUsageInfoAvailabilityStatus

## IUM doesnt support if variable name in query does not exist a table
## Copying it to a temporary variable and later copying it back
[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/000.TraceLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG2
Message=Custom Input Output Attributes
Attributes=CUST_GUI_IN_SubsVoiceInFlagInteger
Attributes=CUST_GUI_IN_SubsDataInFlagInteger
Attributes=CUST_GUI_IN_SubsMsgInFlagInteger
Attributes=CUST_GUI_IN_SubsAccInfoInFlagInteger
Attributes=CUST_GUI_IN_UsageVoiceInFlagInteger
Attributes=CUST_GUI_IN_UsageMsgInFlagInteger
Attributes=CUST_GUI_IN_UsageDataInFlagInteger
Attributes=CUST_GUI_IN_MDN
Attributes=CUST_GUI_OUT_CATEGORYID
Attributes=CUST_GUI_OUT_VOICECAPACITY
Attributes=CUST_GUI_OUT_VOICEUSED
Attributes=CUST_GUI_OUT_DATACAPACITY
Attributes=CUST_GUI_OUT_DATAUSED
Attributes=CUST_GUI_OUT_USEDFORALERT
Attributes=CUST_GUI_OUT_MOSMS
Attributes=CUST_GUI_OUT_MTSMS
Attributes=CUST_GUI_OUT_TOTALSMS
Attributes=CUST_GUI_OUT_MOMM
Attributes=CUST_GUI_OUT_MTMMS
Attributes=CUST_GUI_OUT_TOTALMMS
Attributes=CUST_GUI_OUT_SMSCAPACITY
Attributes=CUST_GUI_OUT_MMSCAPACITY
Attributes=CUST_GUI_OUT_PLANTYPE
Attributes=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
Attributes=CUST_GUI_OUT_PLANMGTTYPE
Attributes=CUST_GUI_OUT_BILLINGCYCLESTARTDATE
Attributes=CUST_GUI_OUT_BILLINGCYCLEENDDATE
Attributes=CUST_GUI_OUT_AUTORENEW
Attributes=CUST_GUI_OUT_STACKING
Attributes=CUST_GUI_OUT_ErrorFlagInteger


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/050.SetSubscriptionUsageMDN]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy CUST_GUI_IN_MDN DEG_OEMDevSubscriptionUsageMDNLong

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Operations=DoAll

Conditions=DEG_OEMDevRequestProcessedInteger,=,0
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
Conditions=DEG_OEMDevRequestProcessedInteger,=,0

TrueRuleChain=CheckUsageVoiceAvailableInRequest
TrueRuleChain=CheckUsageMessageAvailableInRequest
TrueRuleChain=CheckUsageDataAvailableInRequest

CheckUsageVoiceAvailableInRequest=100.CheckUsageVoiceAvailableInRequest
CheckUsageMessageAvailableInRequest=200.CheckUsageMessageAvailableInRequest
CheckUsageDataAvailableInRequest=300.CheckUsageDataAvailableInRequest



[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/100.CheckUsageVoiceAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GUI_IN_UsageVoiceInFlagInteger,=,1
TrueRuleChain=100.CallRefDataService


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/100.CheckUsageVoiceAvailableInRequest/100.CallRefDataService]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_SUBS_VOICE_USAGE_MDNLOOKUP


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/100.CheckUsageVoiceAvailableInRequest/100.CallRefDataService/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DBErrorSetValues
RuleNames=200.LogDBError


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/100.CheckUsageVoiceAvailableInRequest/100.CallRefDataService/ErrorRule/100.DBErrorSetValues]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_SUBS_VOICE_USAGE Table"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/100.CheckUsageVoiceAvailableInRequest/100.CallRefDataService/ErrorRule/200.LogDBError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_OEMDevErrorNameString
Attributes=DEG_SSL_REQUEST_STATE
Attributes=DEG_OEMDevRequestProcessedInteger
LogLevel=WARNING
Message=Database Error: Unable to perform lookup or access DEG_SUBS_VOICE_USAGE Table:  
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/200.CheckUsageMessageAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GUI_IN_UsageMsgInFlagInteger,=,1
TrueRuleChain=100.CallRefDataService


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/200.CheckUsageMessageAvailableInRequest/100.CallRefDataService]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_SUBS_MSG_USAGE_MDNLOOKUP


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/200.CheckUsageMessageAvailableInRequest/100.CallRefDataService/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DBErrorSetValues
RuleNames=200.LogDBError


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/200.CheckUsageMessageAvailableInRequest/100.CallRefDataService/ErrorRule/100.DBErrorSetValues]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_SUBS_MSG_USAGE Table"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/200.CheckUsageMessageAvailableInRequest/100.CallRefDataService/ErrorRule/200.LogDBError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevErrorNameString
Attributes=DEG_SSL_REQUEST_STATE
Attributes=DEG_OEMDevRequestProcessedInteger
Attributes=DEG_OEMDevErrorMessageString
LogLevel=WARNING
Message=Database Error: Unable to perform lookup or access DEG_SUBS_MSG_USAGE Table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/300.CheckUsageDataAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GUI_IN_UsageDataInFlagInteger,=,1
TrueRuleChain=100.CallRefDataService


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/300.CheckUsageDataAvailableInRequest/100.CallRefDataService]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_SUBS_DATA_USAGE_MDNLOOKUP


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/300.CheckUsageDataAvailableInRequest/100.CallRefDataService/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DBErrorSetValues
RuleNames=200.LogDBError


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/300.CheckUsageDataAvailableInRequest/100.CallRefDataService/ErrorRule/100.DBErrorSetValues]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_SUBS_DATA_USAGE Table"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/100.LookupUsage/300.CheckUsageDataAvailableInRequest/100.CallRefDataService/ErrorRule/200.LogDBError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=CUST_GUI_IN_MDN
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_OEMDevErrorNameString
Attributes=DEG_SSL_REQUEST_STATE
Attributes=DEG_OEMDevRequestProcessedInteger
LogLevel=WARNING
Message=Database Error: Unable to perform lookup or access DEG_SUBS_DATA_USAGE Table  
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
TrueRuleChain=100.LookupSubscription


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GUI_IN_SubsVoiceInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsDataInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsMsgInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsAccInfoInFlagInteger,=,1
Operations=or,or,or
TrueRuleChain=100.InitLookupSubscription
TrueRuleChain=200.ExecuteLookupSubscription
TrueRuleChain=300.LogAfterLookupSubscription
TrueRuleChain=500.SetResponseBasedOnLookup


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/100.InitLookupSubscription]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set log_DB_Operation "LOOKUPBYMDN"
AdornOps=set log_Table_Name "STOREDPROC"
AdornOps=set DEG_OEMDevSubcriptionProcNameString "LookupSubscriptionsByMDN"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/200.ExecuteLookupSubscription]

ClassName=com.hp.usage.lookup.SynchronousLookupRule
ConnectorName=130.StoredProcConnectorDEG
ErrorCodeAttribute=DEG_OEMDevErrorCodeString
ErrorMessageAttribute=DEG_OEMDevErrorMessageString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/200.ExecuteLookupSubscription/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetDBError
RuleNames=110.LogDBError


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/200.ExecuteLookupSubscription/ErrorRule/100.SetDBError]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevErrorMessageString "Unable to lookup Subscription Information"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/200.ExecuteLookupSubscription/ErrorRule/110.LogDBError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevErrorCodeString
Attributes=DEG_OEMDevErrorMessageString
Attributes=log_Table_Name
Attributes=log_DB_Operation
LogLevel=WARNING
Message=Database Error: Unable to lookup Subscription Information: 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/300.LogAfterLookupSubscription]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvRequestProcessedInteger,=,0
TrueRuleChain=100.Log

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/300.LogAfterLookupSubscription/100.Log]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=CUST_GUI_IN_MDN
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=CUST_GUI_IN_SubsVoiceInFlagInteger
Attributes=DEG_OEMDevSubscriptionVoiceListString
Attributes=DEG_OEMDevSubsVoiceSourceFlagInteger
Attributes=CUST_GUI_IN_SubsDataInFlagInteger
Attributes=DEG_OEMDevSubscriptionDataListString
Attributes=DEG_OEMDevSubsDataSourceFlagInteger
Attributes=CUST_GUI_IN_SubsMsgInFlagInteger
Attributes=DEG_OEMDevSubscriptionMessageListString
Attributes=DEG_OEMDevSubsMsgSourceFlagInteger
Attributes=CUST_GUI_IN_SubsAccInfoInFlagInteger
Attributes=DEG_OEMDevSubscriptionAccInfoListString
Attributes=DEG_OEMDevSubsAccInfoSourceFlagInteger
LogLevel=DEBUG
Message=After StoredProc LookupSubscriptionsByMDN execution: 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
TrueRuleChain=100.SetResponse


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Operations=DoAll

Conditions=CUST_GUI_IN_SubsVoiceInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsMsgInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsDataInFlagInteger,=,1
Conditions=CUST_GUI_IN_SubsAccInfoInFlagInteger,=,1

TrueRuleChain=CheckSubscriptionVoiceAvailableInRequest
TrueRuleChain=CheckSubscriptionMessageAvailableInRequest
TrueRuleChain=CheckSubscriptionDataAvailableInRequest
TrueRuleChain=CheckSubscriptionAccountInfoAvailableInRequest

CheckSubscriptionVoiceAvailableInRequest=100.CheckSubscriptionVoiceAvailableInRequest
CheckSubscriptionMessageAvailableInRequest=200.CheckSubscriptionMessageAvailableInRequest
CheckSubscriptionDataAvailableInRequest=300.CheckSubscriptionDataAvailableInRequest
CheckSubscriptionAccountInfoAvailableInRequest=400.CheckSubscriptionAccountInfoAvailableInRequest


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevSubsVoiceSourceFlagInteger,=,1
TrueRuleChain=200.MatchRule


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=match
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+);
SourceAttribute=DEG_OEMDevSubscriptionVoiceListString
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
DestinationAttribute=CUST_GUI_OUT_PLANTYPE
FalseRuleChain=100.ResetFlag
FalseRuleChain=110.ErrorLog
TrueRuleChain=200.SplitResult
TrueRuleChain=210.SetJSONResponse
TrueRuleChain=220.MessageForLog


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule/100.ResetFlag]

AdornOps=set DEG_OEMDevSubsVoiceSourceFlagInteger 0
ClassName=AdornmentRule

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule/110.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevSubscriptionVoiceListString
Attributes=DEG_OEMDevSubsVoiceSourceFlagInteger
LogLevel=WARNING
Message=Invalid SubscriptionVoice Data: 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule/200.SplitResult]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
DestinationAttribute=CUST_GUI_OUT_PLANTYPE
Operation=split
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+);
SourceAttribute=DEG_OEMDevSubscriptionVoiceListString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule/210.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_PLANTYPE,jsonResponse.account_info_response.subscription_info.voice.plan_type.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_SUBSCRIPTIONSTATUS,jsonResponse.account_info_response.subscription_info.voice.subscription_status.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/100.CheckSubscriptionVoiceAvailableInRequest/200.MatchRule/220.MessageForLog]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespSubsVoice: "
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "PlanType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_PLANTYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "SubscriptionStatus="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_SUBSCRIPTIONSTATUS DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr ; DEG_OEMDevSubscriptionTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevSubsMsgSourceFlagInteger,=,1
TrueRuleChain=200.MatchRule


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=match
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+);
SourceAttribute=DEG_OEMDevSubscriptionMessageListString
FalseRuleChain=100.ResetFlag
FalseRuleChain=110.ErrorLog
TrueRuleChain=200.SplitResult
TrueRuleChain=210.SetJSONResponse
TrueRuleChain=220.MessageForLog


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule/100.ResetFlag]

AdornOps=set DEG_OEMDevSubsMsgSourceFlagInteger 0
ClassName=AdornmentRule

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule/110.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevSubscriptionMessageListString
Attributes=DEG_OEMDevSubsMsgSourceFlagInteger
LogLevel=WARNING
Message=Invalid SubscriptionMessage Data: 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule/200.SplitResult]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=split
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+);
SourceAttribute=DEG_OEMDevSubscriptionMessageListString
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
DestinationAttribute=CUST_GUI_OUT_PLANTYPE


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule/210.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_PLANTYPE,jsonResponse.account_info_response.subscription_info.message.plan_type.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_SUBSCRIPTIONSTATUS,jsonResponse.account_info_response.subscription_info.message.subscription_status.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/200.CheckSubscriptionMessageAvailableInRequest/200.MatchRule/220.MessageForLog]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespSubsMessage: "
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "PlanType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_PLANTYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "SubscriptionStatus="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_SUBSCRIPTIONSTATUS DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr ; DEG_OEMDevSubscriptionTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevSubsDataSourceFlagInteger,=,1
TrueRuleChain=200.MatchRule


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=match
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+),([a-zA-Z]+);
SourceAttribute=DEG_OEMDevSubscriptionDataListString
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
DestinationAttribute=CUST_GUI_OUT_PLANTYPE
DestinationAttribute=CUST_GUI_OUT_PLANMGTTYPE
FalseRuleChain=100.ResetFlag
FalseRuleChain=110.ErrorLog
TrueRuleChain=200.SplitResult
TrueRuleChain=210.SetJSONResponse
TrueRuleChain=220.MessageForLog


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule/100.ResetFlag]

AdornOps=set DEG_OEMDevSubsDataSourceFlagInteger 0
ClassName=AdornmentRule

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule/110.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevSubscriptionDataListString
Attributes=DEG_OEMDevSubsDataSourceFlagInteger
LogLevel=WARNING
Message=Invalid SubscriptionData Data: 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule/200.SplitResult]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_SUBSCRIPTIONSTATUS
DestinationAttribute=CUST_GUI_OUT_PLANTYPE
DestinationAttribute=CUST_GUI_OUT_PLANMGTTYPE
Operation=split
RegExPattern=(\d+),([a-zA-Z-]+),([a-zA-Z-]+),([a-zA-Z]+);
SourceAttribute=DEG_OEMDevSubscriptionDataListString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule/210.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_PLANTYPE,jsonResponse.account_info_response.subscription_info.data.plan_type.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_SUBSCRIPTIONSTATUS,jsonResponse.account_info_response.subscription_info.data.subscription_status.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_PLANMGTTYPE,jsonResponse.account_info_response.subscription_info.data.plan_mgt_type.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/300.CheckSubscriptionDataAvailableInRequest/200.MatchRule/220.MessageForLog]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespSubsData: "
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "PlanType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_PLANTYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "SubscriptionStatus="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_SUBSCRIPTIONSTATUS DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "PlanMgtType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_PLANMGTTYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr ; DEG_OEMDevSubscriptionTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevSubsAccInfoSourceFlagInteger,=,1
TrueRuleChain=200.MatchRule


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
Operation=match
RegExPattern=(\d+),(.+),(.+),([a-zA-Z]*),([a-zA-Z]*),([a-zA-Z]*);
SourceAttribute=DEG_OEMDevSubscriptionAccInfoListString
FalseRuleChain=100.ResetFlag
FalseRuleChain=110.ErrorLog
TrueRuleChain=200.SplitResult
TrueRuleChain=204.ProcessBillingStartDate
TrueRuleChain=207.ProcessBillingEndDate
TrueRuleChain=210.SetJSONResponse
TrueRuleChain=220.MessageForLog


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/100.ResetFlag]

AdornOps=set DEG_OEMDevSubsAccInfoSourceFlagInteger 0
ClassName=AdornmentRule




[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/110.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_IMSI
Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevSubscriptionAccInfoListString
Attributes=DEG_OEMDevSubsAccInfoSourceFlagInteger
LogLevel=WARNING
Message=Invalid SubscriptionAccountInfo Data: 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.

[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/200.SplitResult]

ClassName=com.hp.siu.collector.rules.PerlRegExStringRule
DestinationAttribute=DEG_OEMDevSubscriptionUsageMDNLong
DestinationAttribute=CUST_GUI_OUT_BILLINGCYCLESTARTDATE
DestinationAttribute=CUST_GUI_OUT_BILLINGCYCLEENDDATE
DestinationAttribute=CUST_GUI_OUT_PLANTYPE
DestinationAttribute=CUST_GUI_OUT_AUTORENEW
DestinationAttribute=CUST_GUI_OUT_STACKING
Operation=split
RegExPattern=(\d+),(.+),(.+),([a-zA-Z]*),([a-zA-Z]*),([a-zA-Z]*);
SourceAttribute=DEG_OEMDevSubscriptionAccInfoListString


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/204.ProcessBillingStartDate]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.TimeAdornmentRule
RuleNames=200.CopyTimeToLong
RuleNames=300.SetDateTimeStamp
RuleNames=400.CopyDate


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/204.ProcessBillingStartDate/100.TimeAdornmentRule]

ClassName=com.hp.siu.collector.rules.TimeAdornmentRule
ParseTimeString=CUST_GUI_OUT_BILLINGCYCLESTARTDATE,DEG_OEMDevBillingStartTime,strict:yyyy-MM-dd HH:mm:ss
TimeZone=UTC


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/204.ProcessBillingStartDate/200.CopyTimeToLong]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_OEMDevBillingStartTime DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/204.ProcessBillingStartDate/300.SetDateTimeStamp]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
ResponseAttributes=DEF_GUI_DateTimeStampString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/204.ProcessBillingStartDate/400.CopyDate]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_BILLINGCYCLESTARTDATE


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/207.ProcessBillingEndDate]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.TimeAdornmentRule
RuleNames=200.CopyTimeToLong
RuleNames=300.SetDateTimeStamp
RuleNames=400.CopyDate


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/207.ProcessBillingEndDate/100.TimeAdornmentRule]

ClassName=com.hp.siu.collector.rules.TimeAdornmentRule
ParseTimeString=CUST_GUI_OUT_BILLINGCYCLEENDDATE,DEG_OEMDevBillingEndTime,strict:yyyy-MM-dd HH:mm:ss
TimeZone=UTC


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/207.ProcessBillingEndDate/200.CopyTimeToLong]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEF_GUI_DateTimeStampLong 0
AdornOps=set DEF_GUI_DateTimeStampString ""
AdornOps=copy DEG_OEMDevBillingEndTime DEF_GUI_DateTimeStampLong
AdornOps=* DEF_GUI_DateTimeStampLong 1000 DEF_GUI_DateTimeStampLong


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/207.ProcessBillingEndDate/300.SetDateTimeStamp]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEF_GUI_DateTimeStampLong
RequestAttributes=DEF_GUI_DateTimeZoneString
ResponseAttributes=DEF_GUI_DateTimeStampString
RuleChain=100.SetDateTimeStampRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/207.ProcessBillingEndDate/400.CopyDate]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEF_GUI_DateTimeStampString CUST_GUI_OUT_BILLINGCYCLEENDDATE


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/210.SetJSONResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=CUST_GUI_OUT_BILLINGCYCLESTARTDATE,jsonResponse.account_info_response.subscription_info.account_info.billing_cycle_start_date.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_BILLINGCYCLEENDDATE,jsonResponse.account_info_response.subscription_info.account_info.billing_cycle_end_date.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_PLANTYPE,jsonResponse.account_info_response.subscription_info.account_info.plan_type.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_AUTORENEW,jsonResponse.account_info_response.subscription_info.account_info.auto_renew.CData
NMEToStructuredNMEMap=CUST_GUI_OUT_STACKING,jsonResponse.account_info_response.subscription_info.account_info.stacking.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/200.LookupSubscription/100.LookupSubscription/500.SetResponseBasedOnLookup/100.SetResponse/400.CheckSubscriptionAccountInfoAvailableInRequest/200.MatchRule/220.MessageForLog]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp3String "RespSubsAccInfo: "
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "BillCycleStartDate="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_BILLINGCYCLESTARTDATE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "BillCycleEndDate="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_BILLINGCYCLEENDDATE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "PlanType="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_PLANTYPE DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "AutoRenew="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_AUTORENEW DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr , DEG_OEMDevSubscriptionTypeListToStr
AdornOps=set DEG_Tmp3String "Stacking="
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr DEG_Tmp3String DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr CUST_GUI_OUT_STACKING DEG_OEMDevSubscriptionTypeListToStr
AdornOps=+ DEG_OEMDevSubscriptionTypeListToStr ; DEG_OEMDevSubscriptionTypeListToStr


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
TrueRuleChain=100.CheckExtendedUsageInfoAvailableInRequest


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage/100.CheckExtendedUsageInfoAvailableInRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GUI_IN_ExtendedUsageInfoInFlagInteger,=,1
TrueRuleChain=100.CallRefDataService


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage/100.CheckExtendedUsageInfoAvailableInRequest/100.CallRefDataService]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_SUBS_EXTENDED_DATA_USAGE_MDNLOOKUP


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage/100.CheckExtendedUsageInfoAvailableInRequest/100.CallRefDataService/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DBErrorSetValues
RuleNames=200.LogDBError


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage/100.CheckExtendedUsageInfoAvailableInRequest/100.CallRefDataService/ErrorRule/100.DBErrorSetValues]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_SUBS_VOICE_USAGE Table"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/210.LookupExtendedUsage/100.CheckExtendedUsageInfoAvailableInRequest/100.CallRefDataService/ErrorRule/200.LogDBError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_OEMDevSubscriptionUsageMDNLong
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_OEMDevErrorNameString
Attributes=DEG_SSL_REQUEST_STATE
LogLevel=WARNING
Message=Database Error: Unable to perform lookup or access DEG_SUBS_VOICE_USAGE Table:  
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/300.CheckUsageInfoAvailabilityStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
TrueRuleChain=100.CheckStatus


[/templates/DEG/DeviceInterface/GetSubscriberSubsAndUsage_V2Customize/RuleChains/CUSTRC_Apple_SubAndUsage_ExternalQuery/300.CheckUsageInfoAvailabilityStatus/100.CheckStatus]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=704.CheckSubsAndUsageAvailabilityStatusRuleChain
UseRuleChainManagerPool=true

