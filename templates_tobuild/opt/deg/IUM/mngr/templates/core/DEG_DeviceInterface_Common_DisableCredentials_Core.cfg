[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core]

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains]

RuleChainNames=DAI_DisableCredentials
RuleChainNames=DAI_DisableCredentialsWithHeartbeatRuleChain

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain]

ClassName=RuleChain
RuleNames=000.SetLogInfo
RuleNames=000.LogIMSI
RuleNames=000.InitializeTokenTableLookUp
RuleNames=010.QueryTokenTable
RuleNames=020.CheckTokenTableLookUpStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/000.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0201"
AdornOps=set DEG_OEMDevMessageString "Disable credentials with heartbeatrule chain called"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/000.LogIMSI]

ClassName=LogNMERule
LogLevel=DEBUG
Message=Disable credentials with heartbeat rule chain called.
Attributes=DEG_OEMDevImsiString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/000.InitializeTokenTableLookUp]

ClassName=AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 0
AdornOps=set DEG_OEMDevProvisioningNameString "VoWiFi"
AdornOps=copy DEG_OEMDevImsiString DEG_IMSI
AdornOps=copy DEG_OEMDevProvisioningNameString DEG_ENTITLEMENT_NAME
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 0
AdornOps=set DEG_CDevSessionStoreKeyExistsFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/010.QueryTokenTable]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_TOKENS_ByIMSI

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevDBErrorFlagInteger,!=,0
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog
FalseRuleChain=000.SetLogInfo
FalseRuleChain=000.Log
FalseRuleChain=000.CheckIfSessionKeyExists

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0202"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_TOKENS table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to perform lookup or access DEG_TOKENS table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_OEMDevProvisioningNameString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0203"
AdornOps=set DEG_OEMDevMessageString "After Tokens Table lookup"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=After Tokens Table lookup
Attributes=DEG_CDevSessionStoreKeyExistsFlagInteger
Attributes=DEG_UNIQUE_ID
Attributes=DEG_MDN
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_RowFoundInteger,=,0

TrueRuleChain=000.SetDAIDisableFlag
FalseRuleChain=000.LookUpDeviceDataTable

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.SetDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable]

ClassName=RuleChain
RuleNames=000.SetLogInfo
RuleNames=000.Log
RuleNames=000.Initialize
RuleNames=010.QueryDeviceData
RuleNames=020.CheckLookUpStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/000.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0204"
AdornOps=set DEG_OEMDevMessageString "Entered into DEVICE_DATA table lookup"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/000.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=Entered into DEVICE_DATA table lookup.
Attributes=DEG_OEMDevProvisioningSipUserNameString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/000.Initialize]

ClassName=AdornmentRule
#AdornOps=copy DEG_OEMDevUniqueIDString DEG_UNIQUE_ID
AdornOps=copy DEG_OEMDevProvisioningNameString DEG_ENTITLEMENT_NAME
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 0
AdornOps=set DEG_CDevSessionStoreKeyExistsFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/010.QueryDeviceData]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_DEVICE_DATAWithUNIQUEIDAndEntitlement

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/020.CheckLookUpStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevDBErrorFlagInteger,!=,0
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog
FalseRuleChain=000.SetLogInfo
FalseRuleChain=000.Log

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/020.CheckLookUpStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0205"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_DEVICE_DATA table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/020.CheckLookUpStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to perform lookup or access DEG_DEVICE_DATA table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_OEMDevProvisioningNameString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/020.CheckLookUpStatus/000.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0206"
AdornOps=set DEG_OEMDevMessageString "After Device data lookup"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentialsWithHeartbeatRuleChain/020.CheckTokenTableLookUpStatus/000.CheckIfSessionKeyExists/000.LookUpDeviceDataTable/020.CheckLookUpStatus/000.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=After Device data lookup.
Attributes=DEG_CDevSessionStoreKeyExistsFlagInteger
Attributes=DEG_UNIQUE_ID
Attributes=DEG_ENTITLEMENT_NAME
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials]

ClassName=RuleChain
RuleNames=100.CallHeartbeatRuleChain
RuleNames=000.CheckIfSessionKeyExists

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/100.CallHeartbeatRuleChain]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=DAI_DisableCredentialsWithHeartbeatRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_RowFoundInteger,=,0

TrueRuleChain=000.SetDAIDisableFlag
FalseRuleChain=000.LookUpIMSData
FalseRuleChain=010.CheckDBError

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/000.SetDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/000.LookUpIMSData]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_SIP_USERNAME,DEG_SIP_USERNAME
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_IMS_DATA_SessionStore
NativeCondition=1.MatchByIMSI

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog
FalseRuleChain=000.CheckIfSessionKeyExists

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0207"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_IMS_DATA table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule

LogLevel=CRITICAL
Message=Database Error: Unable to perform lookup or access DEG_IMS_DATA table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_OEMDevProvisioningNameString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreKeyExistsFlagInteger,=,0

TrueRuleChain=000.SetDAIDisableFlag
FalseRuleChain=000.Initialise
FalseRuleChain=000.CheckIMSNotifyStatus
FalseRuleChain=010.CheckForErrorFromIMS

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.SetDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.Initialise]

ClassName=AdornmentRule
AdornOps=set DEG_OEMDevIMSErrorCodeString 0
AdornOps=set DEG_OEMDevIMSErrorMessageString ""
AdornOps=set DEG_OEMDevIMSResponseString 0
AdornOps=set DEG_OEMDevIMSErrorFlag 0
AdornOps=set DEG_OEMDevIMSConnectivityStatusString ${DEVICE_IMS_CONNECTIVITY}
AdornOps=lower DEG_OEMDevIMSConnectivityStatusString DEG_OEMDevIMSConnectivityStatusString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus]

ClassName=ConditionalRule
Conditions=DEG_OEMDevIMSConnectivityStatusString,=,enabled
TrueRuleChain=000.InvokeNotifyIMSSCore
TrueRuleChain=010.CheckForErrorResponse

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/000.InvokeNotifyIMSSCore]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=CUSTRC_Apple_SP_ExternalIMS
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/010.CheckForErrorResponse]

ClassName=ConditionalRule
Conditions=DEG_OEMDevIMSErrorFlag,!=,0
TrueRuleChain=000.CheckIfErrorResponseIsSet

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/010.CheckForErrorResponse/000.CheckIfErrorResponseIsSet]

ClassName=ConditionalRule
Conditions=DEG_OEMDevIMSResponseString,!=,0
TrueRuleChain=000.SetIMSErrorResponse
TrueRuleChain=010.LogIMSErrorResponse
FalseRuleChain=000.SetDAIDisableFlag

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/010.CheckForErrorResponse/000.CheckIfErrorResponseIsSet/000.SetIMSErrorResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0208"
AdornOps=set DEG_OEMDevErrorMessageString "Error Response From IMS"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/010.CheckForErrorResponse/000.CheckIfErrorResponseIsSet/010.LogIMSErrorResponse]

ClassName=LogNMERule
LogLevel=INFO
Message=Error Response From IMS::
Attributes=DEG_OEMDevProvisioningNameString
Attributes=DEG_OEMDevRespStatusString
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevIMSErrorCodeString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/000.CheckIMSNotifyStatus/010.CheckForErrorResponse/000.CheckIfErrorResponseIsSet/000.SetDAIDisableFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS]

ClassName=ConditionalRule
Conditions=DEG_OEMDevIMSErrorFlag,=,0
TrueRuleChain=000.InitializeDeviceDataDelete
TrueRuleChain=000.DeleteDeviceData
TrueRuleChain=000.CheckDeleteStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.InitializeDeviceDataDelete]

ClassName=AdornmentRule
AdornOps=set DEG_OEMDevJDBCOpNameString "000.DEG_DEVICE_DATA_DeleteWithIMSI"
AdornOps=set DEG_OEMDevDBErrorCodeString "0"
AdornOps=set DEG_OEMDevDBErrorMessageString ""

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.DeleteDeviceData]


ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
Operation=and
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog

FalseRuleChain=000.InitializeHeartbeatDelete
FalseRuleChain=000.DeleteHeartBeat
FalseRuleChain=000.CheckDeleteStatus

FalseRuleChain=000.SetUniqueId
FalseRuleChain=000.UpdateUniqueIdInIMSData
FalseRuleChain=010.CheckUpdateStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0209"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete from DEG_DEVICE_DATA table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to delete from DEG_DEVICE_DATA table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.InitializeHeartbeatDelete]

ClassName=AdornmentRule
AdornOps=set DEG_OEMDevJDBCOpNameString "050.DEG_DEVICE_HEARTBEAT_DeleteWithIMSI"
AdornOps=set DEG_OEMDevDBErrorCodeString "0"
AdornOps=set DEG_OEMDevDBErrorMessageString ""

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.DeleteHeartBeat]

ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
Operation=and
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.CheckDeleteStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0210"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete from DEG_DEVICE_HEARTBEAT table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.CheckDeleteStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to delete from DEG_DEVICE_HEARTBEAT table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.SetUniqueId]

ClassName=AdornmentRule
AdornOps=set DEG_UNIQUE_ID ""
AdornOps=set DEG_OEMDevJDBCOpNameString "010.DEG_IMS_DATA_UpdateWithIMSI"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/000.UpdateUniqueIdInIMSData]

ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
Operation=and
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog
FalseRuleChain=000.InitializeCompanionTokenUpdate
FalseRuleChain=010.Update_CompanionToken
FalseRuleChain=020.CheckCompanionTokenUpdateStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0211"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete from DEG_IMS_DATA table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to update from DEG_IMS_DATA table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/000.InitializeCompanionTokenUpdate]

ClassName=AdornmentRule
AdornOps=set DEG_UNIQUE_ID ""
AdornOps=set DEG_OEMDevJDBCOpNameString "020.DEG_COMPANION_TOKENS_UpdateUniqueIdAndTokenStatus"
AdornOps=set DEG_SERVICETOKEN_STATUS "RE"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/010.Update_CompanionToken]

ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
Operation=and
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog

FalseRuleChain=000.InitializeTokenTableUpdate
FalseRuleChain=010.Update_TokenTable
FalseRuleChain=020.CheckTokenTableUpdateStatus

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0212"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete from DEG_COMPANION_TOKENS table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to update from DEG_COMPANION_TOKENS table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/000.InitializeTokenTableUpdate]

ClassName=AdornmentRule
AdornOps=set DEG_DAI ""
AdornOps=set DEG_OEMDevJDBCOpNameString "060.DEG_TOKENS_UpdateDAI"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/010.Update_TokenTable]

ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
Operation=and
TrueRuleChain=000.SetErrorFlag
TrueRuleChain=010.ErrorLog

FalseRuleChain=000.SendAPNSNotification

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SetErrorFlag]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevDAIDisableFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0213"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete from DEG_COMPANION_TOKENS table"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/010.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to update from DEG_TOKENS table 
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_PUSH_NOTIFICATION_STATUS,=,6100

FalseRuleChain=000.SetErrorInfo
FalseRuleChain=000.SetErrorlog
TrueRuleChain=000.SetAPNSHeartbeatAttribute
TrueRuleChain=000.CopyAPNSParams
TrueRuleChain=100.InvokeAPNSPushNotification
TrueRuleChain=010.SetLogInfo
TrueRuleChain=010.LogSuccessResponse

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/000.SetAPNSHeartbeatAttribute]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set CUST_APNS_HeartbeatRequestAttribute 1

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/000.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.HB.0214"
AdornOps=set DEG_OEMDevErrorMessageString "Push notification cannot be sent"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/000.SetErrorlog]

ClassName=LogNMERule
LogLevel=DEBUG4
Attributes=DEG_UNIQUE_ID
Attributes=DEG_OEMDevProvisioningUniqueIdList
Attributes=DEG_APNSUniqueIdString
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Message=Push notification cannot be sent.
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/000.CopyAPNSParams]

ClassName=AdornmentRule
AdornOps=copy DEG_MDN DEG_CarrMDNLong
AdornOps=copy DEG_OEMDevImsiString DEG_CarrIMSIString
AdornOps=copy DEG_OEMDevAPNSTopicString DEG_APNSTopicString
AdornOps=copy DEG_OEMDevAPNSTokenString APNS_TokenString
AdornOps=set DEG_TriggerTypeString "service-token-invalidated"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/100.InvokeAPNSPushNotification]

ClassName=LocalRuleChainInvoker
RuleChain=CUSTRC_Apple_APNS_SendNotification_Init
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/010.SetLogInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.HB.0215"
AdornOps=set DEG_OEMDevMessageString "Notification is successfully sent to device"

[/templates/DEG/DeviceInterface/Common_DisableCredentials_Core/RuleChains/DAI_DisableCredentials/000.CheckIfSessionKeyExists/010.CheckDBError/000.CheckIfSessionKeyExists/010.CheckForErrorFromIMS/000.CheckDeleteStatus/010.CheckUpdateStatus/020.CheckCompanionTokenUpdateStatus/020.CheckTokenTableUpdateStatus/000.SendAPNSNotification/010.LogSuccessResponse]

ClassName=LogNMERule
LogLevel=DEBUG
Message=Notification is successfully sent to device.
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

