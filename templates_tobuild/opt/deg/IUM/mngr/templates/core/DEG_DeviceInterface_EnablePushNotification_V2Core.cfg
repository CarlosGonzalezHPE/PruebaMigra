

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core]


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains]

RuleChainNames=220.DEG20ProcessOEMEnablePushNotificationRuleChain
RuleChainNames=220A.SNMEtoNMEEnablePushNotificationRequestRuleChain
RuleChainNames=220B.ProcessEnablePushNotificationRequestRuleChain
RuleChainNames=220C.ProcessDeviceDataTableLookupRuleChain
RuleChainNames=220D.UpdateDeviceDataTableLookupRuleChain
RuleChainNames=220E.CreateRowInDeviceDataTableRuleChain
RuleChainNames=220G.ProcessEntitlementWithAPNsSharing
RuleChainNames=752.DEG20EnablePushNotificationStartAuditDataRuleChain
RuleChainNames=752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain
RuleChainNames=753.DEG20EnablePushNotificationEndOkAuditDataRuleChain
RuleChainNames=753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain
RuleChainNames=754.DEG20EnablePushNotificationErrorAuditDataRuleChain
RuleChainNames=754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitRequest
RuleNames=110.ExecuteDependingOnStatus


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/100.InitRequest]

AdornOps=set DEG_CDevSysParameter "enablePushNotification"
AdornOps=set DEG_CDevSysValueString ${DEVICE_ENABLEPUSHNOTIFICATION_STATUS}
AdornOps=lower DEG_CDevSysValueString DEG_CDevSysValueString
AdornOps=set DEG_OEMDevRequestProcessedInteger 0
AdornOps=set DEG_OEMDevAPNsResponseFromCarrierString 0
#AdornOps=copy DEG_OEMDevDeviceTypeString DEG_OEMtempDevDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=setifnull DEG_OEMDevIncomingEntitlementNameString "iCloudVoWiFi"
AdornOps=set DEG_OEMDevOldApnTokenStringlist null

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSysValueString,=,"enabled"
FalseRuleChain=200.GenerateEnablePushNotificationDisabledResponse
TrueRuleChain=100.GenerateEnablePushNotificationStartAuditData
TrueRuleChain=110.ExtractEntitlementNames
TrueRuleChain=120.ProcessEntitlementNames
TrueRuleChain=130.MasterResponseAndAuditData


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/100.GenerateEnablePushNotificationStartAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=752.DEG20EnablePushNotificationStartAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/110.ExtractEntitlementNames]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220A.SNMEtoNMEEnablePushNotificationRequestRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/120.ProcessEntitlementNames]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevEnablePushNotificationEmptyInteger,=,0
FalseRuleChain=200.InvalidRequest_400C
FalseRuleChain=210.ErrorLog
TrueRuleChain=100.ProcessEntitlementNamesList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/120.ProcessEntitlementNames/100.ProcessEntitlementNamesList]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220B.ProcessEnablePushNotificationRequestRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/120.ProcessEntitlementNames/200.InvalidRequest_400C]

AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "400C"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0000"
AdornOps=set DEG_OEMDevErrorMessageString "Array part is missing in Request"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/120.ProcessEntitlementNames/210.ErrorLog]

Attributes=DEG_CDevSysParameter
Attributes=DEG_CDevSysValueString
Attributes=DEG_OEMDevRequestProcessedInteger
Attributes=DEG_SSL_REQUEST_STATE
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=DEG to Device -> Invalid Request:


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
FalseRuleChain=200.GenerateErrorMasterResponse
FalseRuleChain=210.GenerateEnablePushNotificationErrorAuditData
TrueRuleChain=100.SetMasterResponse
TrueRuleChain=105.PopulateNRB
TrueRuleChain=110.GenerateMasterResponse
TrueRuleChain=120.GenerateEnablePushNotificationEndAuditData


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/100.SetMasterResponse]

AdornOps=set DEG_OEMDevRespStatusString 6000
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/105.PopulateNRB]

AdornOps=set DEG_AuditMessageString "DEG TO DEVICE -> Sending enablePushNotification success response"
AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification Success response ,Return code is "
AdornOps=+ DEG_AuditNRBMessageString  DEG_OEMDevRespStatusString DEG_AuditNRBMessageString
##RFE86:Bell customization changes including as part of product.10d: Added entitlement response NME attribute in NRB logs.
AdornOps=set DEG_Tmp1String ", DEG_Entitlement_Response="
AdornOps=+ DEG_AuditNRBMessageString DEG_Tmp1String DEG_AuditNRBMessageString
AdornOps=+ DEG_AuditNRBMessageString DEG_OEMDevEntitlementNameListToStr DEG_AuditNRBMessageString

ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/110.GenerateMasterResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_OEMDevRequestIdString,jsonResponse.response_id.CData
NMEToStructuredNMEMap=DEG_OEMDevRespStatusString,jsonResponse.status.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/120.GenerateEnablePushNotificationEndAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=753.DEG20EnablePushNotificationEndOkAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/200.GenerateErrorMasterResponse]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_OEMDevRequestIdString,jsonResponse.response_id.CData
NMEToStructuredNMEMap=DEG_OEMDevRespStatusString,jsonResponse.status.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/130.MasterResponseAndAuditData/210.GenerateEnablePushNotificationErrorAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=754.DEG20EnablePushNotificationErrorAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=50.DEG20EnablePushNotificationStartAudit
RuleNames=100.InitResponse
RuleNames=125.PopulateAuditNRBMessageAttribute
RuleNames=150.DEG20EnablePushNotificationEndAudit
RuleNames=200.GenerateResponseEntry
RuleNames=250.SetErrorInfo
RuleNames=300.Log

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/50.DEG20EnablePushNotificationStartAudit]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=752.DEG20EnablePushNotificationStartAuditDataRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/100.InitResponse]

AdornOps=set DEG_OEMDevRespStatusString 6002
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/125.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditMessageString "DEG TO DEVICE -> Sending enablePushNotification disable response"
AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification disable response ,Return code is "
AdornOps=+ DEG_AuditNRBMessageString  DEG_OEMDevRespStatusString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/150.DEG20EnablePushNotificationEndAudit]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=753.DEG20EnablePushNotificationEndOkAuditDataRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/200.GenerateResponseEntry]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_OEMDevRequestIdString,jsonResponse.response_id.CData
NMEToStructuredNMEMap=DEG_OEMDevRespStatusString,jsonResponse.status.CData
SNMEType=Umbrella:Body

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/250.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0001"
AdornOps=set DEG_OEMDevErrorMessageString "Action enablePushNotification is Disabled:"


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220.DEG20ProcessOEMEnablePushNotificationRuleChain/110.ExecuteDependingOnStatus/200.GenerateEnablePushNotificationDisabledResponse/300.Log]

Attributes=DEG_OEMDevSslSessionIdString
Attributes=DEG_OEMDevImsiString
Attributes=DEG_OEMDevUniqueIDString
Attributes=DEG_OEMDevRequestIdString
Attributes=DEG_CDevSysParameter
Attributes=DEG_CDevSysValueString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Action enablePushNotification Disabled: 
NullAlso=true
UseProperty=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitArrayIndex
RuleNames=200.ExtractEntitlementandAPNSTokenAttribute
RuleNames=300.SetEmptyEntitlementNamesFlag


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/100.InitArrayIndex]

AdornOps=set DEG_OEMDevEnablePushNotificationArrayIndexInteger -1
AdornOps=set DEG_OEMDevEnablePushNotificationEmptyInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute]

ClassName=com.hp.usage.nme.rules.SplitArrayRule
SplitAttribute=notifications
SplitRules=100.IncrementArrayIndex
SplitRules=200.ExtractAttribute
SplitRules=300.CheckForMandatoryFields


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/100.IncrementArrayIndex]

AdornOps=+ DEG_OEMDevEnablePushNotificationArrayIndexInteger 1 DEG_OEMDevEnablePushNotificationArrayIndexInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/200.ExtractAttribute]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
StructuredNMEToNMEMap=notifications[0].notification_name.CData,DEG_OEMDevEntitlementNameString,NOTinRequest
StructuredNMEToNMEMap=notifications[0].old_apns_token.CData,DEG_OEMDevOldApnTokenString,""
StructuredNMEToNMEMap=notifications[0].apns_token.CData,DEG_OEMDevNewApnTokenString,NOTinRequest


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/300.CheckForMandatoryFields]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevEntitlementNameString,=,NOTinRequest
Conditions=DEG_OEMDevNewApnTokenString,=,NOTinRequest
Conditions=DEG_OEMDevEntitlementNameString,=,""
FalseRuleChain=200.StoreEntitlementNameInNMEList
FalseRuleChain=210.StoreApnsTokenInNMEList
Operations=or,or
TrueRuleChain=100.InvalidRequest_400C
TrueRuleChain=110.ErrorLog


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/300.CheckForMandatoryFields/100.InvalidRequest_400C]

AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_OEMDevEnablePushNotificationEmptyInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "400C"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0002"
AdornOps=set DEG_OEMDevErrorMessageString "Mandatory Fields Entitlement name or APNS token is empty in Request"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/300.CheckForMandatoryFields/110.ErrorLog]

Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_OEMDevEnablePushNotificationArrayIndexInteger
Attributes=DEG_OEMDevRequestProcessedInteger
Attributes=DEG_OEMDevEnablePushNotificationEmptyInteger
Attributes=DEG_SSL_REQUEST_STATE
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=DEG to Device -> Mandatory Fields are missing in Request:


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/300.CheckForMandatoryFields/200.StoreEntitlementNameInNMEList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevEntitlementNameString
ListAttribute=DEG_OEMDevEnablePushNotificationList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/200.ExtractEntitlementandAPNSTokenAttribute/300.CheckForMandatoryFields/210.StoreApnsTokenInNMEList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevNewApnTokenString
ListAttribute=DEG_OEMDevEnableNewApnTokenList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/300.SetEmptyEntitlementNamesFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevEnablePushNotificationArrayIndexInteger,=,-1
TrueRuleChain=100.setEntitlementNamesEmpty


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220A.SNMEtoNMEEnablePushNotificationRequestRuleChain/300.SetEmptyEntitlementNamesFlag/100.setEntitlementNamesEmpty]

AdornOps=set DEG_OEMDevEnablePushNotificationEmptyInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitArrayIndex
RuleNames=200.ProcessEntitlementWithAPNsSharing
RuleNames=250.CheckflagInteger
RuleNames=270.GenerateResponseaudit
RuleNames=120.GenerateEntitlementResponse
RuleNames=130.SubstrEntitlementListResponse

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/100.InitArrayIndex]

AdornOps=set DEG_OEMDevArrayIndexInteger -1
AdornOps=set DEG_OEMDevEntitlementNameOutputList null
AdornOps=set DEG_OEMDevEntitlementStatusList null
AdornOps=set DEG_OEMDevChangedEntitlementNameList null
##RFE86:Bell customization changes including as part of product.10a: Initialize NME attribute for list of response containing entitlement and their responsecodes.
AdornOps=set DEG_OEMDevEntitlementNameListToStr ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/200.ProcessEntitlementWithAPNsSharing]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220G.ProcessEntitlementWithAPNsSharing
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger]

ClassName=com.hp.siu.collector.rules.ConditionalRule

Conditions=DEG_OEMDevAPNSTokenFlagInteger,=,1

TrueRuleChain=200.ShareAPNsWithCarrier
TrueRuleChain=210.CheckStatusFromCarrier

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/200.ShareAPNsWithCarrier]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=010.InvokeExternalCarrierRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevAPNsResponseFromCarrierString,=,0
TrueRuleChain=100.SetResponse
#RFE80:Sprint's EAI system request to only recieve the changed APNs token info(including the notificaiotn-name) in one request. This is a CR from customer
TrueRuleChain=105.IterateRule
TrueRuleChain=106.LogRule
FalseRuleChain=210.SetResponseForFailure
FalseRuleChain=200.ExternalSystemResponse


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/100.SetResponse]

AdornOps=setifnull DEG_OEMDevEntitlementNameStringtemp ""
AdornOps=setifnull DEG_OEMDevNewApnTokenStringtemp ""
AdornOps=set DEG_OEMDevEntitlementStatusInteger 6100
AdornOps=set DEG_OEMDevEntitlementNameStatusString "EnablePushNotification is Enabled"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.DI.EPN.0003"
AdornOps=set DEG_OEMDevMessageString "After the List attribute Iterator "
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/105.IterateRule]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_OEMDevEntitlementNameStringlist
ListAttributeName=DEG_OEMDevNewApnTokenStringlist
ListAttributeName=DEG_OEMDevOldApnTokenStringlist
RuleChain=110.UpdateRowInDeviceDataTable
TmpAttributeName=DEG_OEMDevEntitlementNameStringtemp
TmpAttributeName=DEG_OEMDevNewApnTokenStringtemp
TmpAttributeName=DEG_OEMDevApnTokenFromDB

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/106.LogRule]

Attributes=DEG_OEMDevAPNsResponseFromCarrierString
Attributes=DEG_OEMDevEntitlementNameStringtemp
Attributes=DEG_OEMDevNewApnTokenStringtemp
Attributes=DEG_OEMDevApnTokenFromDB
Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=After the List attribute Iterator : : 
NullAlso=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/105.IterateRule/110.UpdateRowInDeviceDataTable]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220D.UpdateDeviceDataTableLookupRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/200.ExternalSystemResponse]

Attributes=DEG_OEMDevAPNsResponseFromCarrierString
Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=External System Response: 
NullAlso=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/250.CheckflagInteger/210.CheckStatusFromCarrier/210.SetResponseForFailure]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevRespStatusString 6005
AdornOps=set DEG_SSL_REQUEST_STATE "200C"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_OEMDevErrorMessageString "Network subsystem failure"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0004"
AdornOps=set DEG_AuditResultCodeString "12"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_OEMDevEnablePushNotificationList
ListAttributeName=DEG_OEMDevEnableNewApnTokenList
## QXCM1001428281: Changing entitlement name from VoWiFi to iCloudVoWiFi
#QXCM1001527055-Core logic in EnablePushNotification should not query DEG_ENTITLEMENTS_FC_MAPPING
RuleChain=150.GenerateResponseAndAudit
TmpAttributeName=DEG_OEMDevEntitlementNameString
TmpAttributeName=DEG_OEMDevNewApnTokenString

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_OEMDevEntitlementStatusList
ListAttributeName=DEG_OEMDevEntitlementNameOutputList
RuleChain=099.RevertEntitlementName
RuleChain=100.IncrementArrayIndex
RuleChain=110.ResponseForEntitlement
RuleChain=120.EntitlementResponseList
TmpAttributeName=DEG_OEMDevEntitlementStatusInteger
TmpAttributeName=DEG_OEMDevEntitlementNameString


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule/099.RevertEntitlementName]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevAuthTypeString,=,"none"
TrueRuleChain=100.UpdateValue

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule/099.RevertEntitlementName/100.UpdateValue]

AdornOps=copy DEG_OEMDevIncomingEntitlementNameString DEG_OEMDevEntitlementNameString
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule/100.IncrementArrayIndex]

AdornOps=+ DEG_OEMDevArrayIndexInteger 1 DEG_OEMDevArrayIndexInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule/110.ResponseForEntitlement]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=true
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_OEMDevEntitlementNameString,jsonResponse.notifications_response[DEG_OEMDevArrayIndexInteger].notification_name.CData
NMEToStructuredNMEMap=DEG_OEMDevEntitlementStatusInteger,jsonResponse.notifications_response[DEG_OEMDevArrayIndexInteger].notification_status.CData
SNMEType=Umbrella:Body

##RFE86:Bell customization changes including as part of product.10b: Added new rule to make list of response for each entitlement.
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/120.GenerateEntitlementResponse/TrueRule/120.EntitlementResponseList]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=+ DEG_OEMDevEntitlementNameListToStr DEG_OEMDevEntitlementNameString DEG_OEMDevEntitlementNameListToStr
AdornOps=+ DEG_OEMDevEntitlementNameListToStr : DEG_OEMDevEntitlementNameListToStr
AdornOps=+ DEG_OEMDevEntitlementNameListToStr DEG_OEMDevEntitlementStatusInteger DEG_OEMDevEntitlementNameListToStr
AdornOps=+ DEG_OEMDevEntitlementNameListToStr , DEG_OEMDevEntitlementNameListToStr

##RFE86:Bell customization changes including as part of product.10c: Added new rule to remove comma from list of response NME attribute.
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/130.SubstrEntitlementListResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=substr 0 length-1 DEG_OEMDevEntitlementNameListToStr DEG_OEMDevEntitlementNameListToStr

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=10.ProcessEntitlementAndAPNsList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList]

ClassName=com.hp.siu.collector.rules.ListAttributeIterator
ListAttributeName=DEG_OEMDevEnablePushNotificationList
ListAttributeName=DEG_OEMDevEnableNewApnTokenList
RuleChain=100.InitVar
## QXCM1001428281: Changing entitlement name from VoWiFi to iCloudVoWiFi
RuleChain=105.SwapVoWiFiEntitlementName
Rulechain=222.EntitleNameListBeforeLookup
RuleChain=101.SetErrorInfo
RuleChain=110.PrintRequest
RuleChain=120.EntitlementStartAuditData
#QXCM1001527055-Core logic in EnablePushNotification should not query DEG_ENTITLEMENTS_FC_MAPPING
RuleChain=130.PerformDeviceDataLookup
#RuleChain=150.GenerateResponseAndAudit
TmpAttributeName=DEG_OEMDevEntitlementNameString
TmpAttributeName=DEG_OEMDevNewApnTokenString


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/100.InitVar]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevEntitlementStatusInteger 0

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/105.SwapVoWiFiEntitlementName]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevAuthTypeString,=,"none"
Conditions=DEG_OEMDevEntitlementNameString,=,"VoWiFi"
Operations=and
TrueRuleChain=100.UpdateValue

## QXCM1001428281: Changing entitlement name from VoWiFi to iCloudVoWiFi
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/105.SwapVoWiFiEntitlementName/100.UpdateValue]

AdornOps=copy DEG_OEMDevEntitlementNameString DEG_OEMDevIncomingEntitlementNameString
AdornOps=set DEG_OEMDevEntitlementNameString "iCloudVoWiFi"
ClassName=com.hp.siu.collector.rules.AdornmentRule

#QXCM1001561775 -- manageDeviceTokenV2 Input validation error
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/222.EntitleNameListBeforeLookup]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevEntitlementNameString
ListAttribute=DEG_OEMDevChangedEntitlementNameList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/101.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0005"
AdornOps=set DEG_OEMDevErrorMessageString "Device to DEG, EnablePushNotification is received :"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/110.PrintRequest]

Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevOldApnTokenString
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Device to DEG -> EnablePushNotification is received :


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/120.EntitlementStartAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220G.ProcessEntitlementWithAPNsSharing/10.ProcessEntitlementAndAPNsList/130.PerformDeviceDataLookup]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220C.ProcessDeviceDataTableLookupRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevRequestProcessedInteger,=,0
FalseRuleChain=200.EntitlementErrorAuditData
TrueRuleChain=200.SetErrorInfo
TrueRuleChain=100.PrintOutputMessage
TrueRuleChain=110.EntitlementOutputList
TrueRuleChain=120.EntitlementNameList
TrueRuleChain=130.EntitlementEndAuditData

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/200.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0006"
AdornOps=set DEG_OEMDevErrorMessageString "Output for Entitlement:"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/100.PrintOutputMessage]

Attributes=DEG_OEMDevRequestProcessedInteger
Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevEntitlementStatusInteger
Attributes=DEG_OEMDevAPNsResponseFromCarrierString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Output for Entitlement:
NullAlso=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/110.EntitlementOutputList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevEntitlementStatusInteger
ListAttribute=DEG_OEMDevEntitlementStatusList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/120.EntitlementNameList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevEntitlementNameString
ListAttribute=DEG_OEMDevEntitlementNameOutputList


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/130.EntitlementEndAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220B.ProcessEnablePushNotificationRequestRuleChain/270.GenerateResponseaudit/150.GenerateResponseAndAudit/200.EntitlementErrorAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitDeviceDataLookup
RuleNames=110.LookupDeviceDataTable
RuleNames=120.CheckDBStatus


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/100.InitDeviceDataLookup]

AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name DEG_DEVICE_DATA
AdornOps=copy DEG_OEMDevUniqueIDString DEG_UNIQUE_ID
AdornOps=copy DEG_OEMDevEntitlementNameString DEG_ENTITLEMENT_NAME
AdornOps=set DEG_APNS_TOKEN ""
AdornOps=set DEG_PUSH_NOTIFICATION_STATUS 0
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 0
AdornOps=set DEG_CDevSessionStoreKeyExistsFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/110.LookupDeviceDataTable]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_ENTITLEMENT_NAME,DEG_ENTITLEMENT_NAME
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
MapAttributes=DEG_APNS_TOKEN,DEG_APNS_TOKEN
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreErrorFlagInteger,=,0
FalseRuleChain=200.SetErrorInfo
TrueRuleChain=100.CheckRowExist


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/200.SetErrorInfo]

AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_OEMDevEnablePushNotificationResponseString "Problem in access Device Data table."
AdornOps=set DEG_SSL_REQUEST_STATE "500C"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreKeyExistsFlagInteger,=,1
FalseRuleChain=11.InitEntiltementNameList
FalseRuleChain=10.ShareAPNsWithCarrier
FalseRuleChain=20.CheckStatusFromCarrier
TrueRuleChain=200.CopyValues
TrueRuleChain=210.CompareAPNSEndNotification

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/11.InitEntiltementNameList]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy DEG_OEMDevChangedEntitlementNameList DEG_OEMDevEntitlementNameStringlist


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/10.ShareAPNsWithCarrier]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=010.InvokeExternalCarrierRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevAPNsResponseFromCarrierString,=,0
TrueRuleChain=100.SetResponse
TrueRuleChain=110.CreateRowInDeviceDataTable
FalseRuleChain=200.ExternalSystemResponse
FalseRuleChain=210.SetResponseForFailure


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier/100.SetResponse]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevEntitlementStatusInteger 6100
AdornOps=set DEG_OEMDevEntitlementNameStatusString "EnablePushNotification is Enabled"


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier/110.CreateRowInDeviceDataTable]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=220E.CreateRowInDeviceDataTableRuleChain
UseRuleChainManagerPool=true

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier/101.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0007"
AdornOps=set DEG_OEMDevErrorMessageString "External System Response: "


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier/200.ExternalSystemResponse]

Attributes=DEG_OEMDevAPNsResponseFromCarrierString
Attributes=DEG_OEMDevEntitlementNameString
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=External System Response:
NullAlso=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/20.CheckStatusFromCarrier/210.SetResponseForFailure]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevRespStatusString 6005
AdornOps=set DEG_SSL_REQUEST_STATE "200C"
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_OEMDevErrorMessageString "Network subsystem failure"
AdornOps=set DEG_AuditResultCodeString "12"


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/200.CopyValues]

AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS DEG_CDevNotificationStatusInteger
AdornOps=copy DEG_APNS_TOKEN DEG_OEMDevApnTokenFromDB
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevApnTokenFromDB,=,DEG_OEMDevNewApnTokenString
Conditions=DEG_CDevNotificationStatusInteger,=,6100
Operations=and
TrueRuleChain=100.SetResponse
#RFE80:Sprint's EAI system request to only recieve the changed APNs token info(including the notificaiotn-name) in one request. This is a CR from customer
FalseRuleChain=100.ListattributesOfApnsTokenList
FalseRuleChain=150.ListattributeofChangedNotifiactionList
FalseRuleChain=160.ListattributesOfOldApnsTokenList
FalseRuleChain=175.CheckingFlagInteger

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification/100.ListattributesOfApnsTokenList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevNewApnTokenString
ListAttribute=DEG_OEMDevNewApnTokenStringlist

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification/150.ListattributeofChangedNotifiactionList]

ClassName=AddToListAttributeRule
InputAttribute=DEG_OEMDevEntitlementNameString
ListAttribute=DEG_OEMDevEntitlementNameStringlist


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification/160.ListattributesOfOldApnsTokenList]

ClassName=com.hp.siu.collector.rules.AddToListAttributeRule
InputAttribute=DEG_OEMDevApnTokenFromDB
ListAttribute=DEG_OEMDevOldApnTokenStringlist


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification/175.CheckingFlagInteger]

ClassName=AdornmentRule
AdornOps=set DEG_OEMDevAPNSTokenFlagInteger 1

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220C.ProcessDeviceDataTableLookupRuleChain/120.CheckDBStatus/100.CheckRowExist/210.CompareAPNSEndNotification/100.SetResponse]

AdornOps=set DEG_OEMDevEntitlementStatusInteger 6100
AdornOps=set DEG_OEMDevEntitlementNameStatusString "EnablePushNotification is Enabled"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=200.InitDeviceDataLookup
RuleNames=200.LogRule
RuleNames=210.LookupDeviceDataTable
RuleNames=220.CheckDBStatus


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/200.LogRule]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=When updating old and new apns token in DEG_DEVICE_DATA table:
Attributes=DEG_OEMDevUniqueIDString
Attributes=DEG_OEMDevEntitlementNameStringtemp
Attributes=DEG_OEMDevApnTokenFromDB
Attributes=DEG_OEMDevNewApnTokenString
Attributes=DEG_OEMDevEntitlementStatusInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/200.InitDeviceDataLookup]

AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name DEG_DEVICE_DATA
AdornOps=setifnull DEG_OEMDevEntitlementNameStringtemp ""
AdornOps=copy DEG_OEMDevUniqueIDString DEG_UNIQUE_ID
##RFE80:Sprint's EAI system request to only recieve the changed APNs token info(including the notificaiotn-name) in one request. This is a CR from customer
AdornOps=copy DEG_OEMDevEntitlementNameStringtemp DEG_ENTITLEMENT_NAME
AdornOps=copy DEG_OEMDevApnTokenFromDB DEG_OLD_APNS_TOKEN
AdornOps=copy DEG_OEMDevNewApnTokenStringtemp DEG_APNS_TOKEN
AdornOps=copy DEG_OEMDevEntitlementStatusInteger DEG_PUSH_NOTIFICATION_STATUS
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 0
AdornOps=set DEG_CDevSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.DI.EPN.0008"
AdornOps=set DEG_OEMDevMessageString "After the List attribute Iterator "
ClassName=com.hp.siu.collector.rules.AdornmentRule

#QXCM1001562425:  APNS enablePushNotification update ignore the IMSI 
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/210.LookupDeviceDataTable]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_UNIQUE_ID,DEG_UNIQUE_ID
MapAttributes=DEG_ENTITLEMENT_NAME,DEG_ENTITLEMENT_NAME
MapAttributes=DEG_IMSI,DEG_IMSI
MapAttributes=DEG_OLD_APNS_TOKEN,DEG_OLD_APNS_TOKEN
MapAttributes=DEG_APNS_TOKEN,DEG_APNS_TOKEN
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/220.CheckDBStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=100.SetErrorInfo
TrueRuleChain=110.SetErrorLog


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/220.CheckDBStatus/100.SetErrorInfo]

AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_OEMDevEnablePushNotificationResponseString "Problem in update Device Data table."
AdornOps=set DEG_SSL_REQUEST_STATE "500C"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0009"
AdornOps=set DEG_OEMDevErrorMessageString "Transient System Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220D.UpdateDeviceDataTableLookupRuleChain/220.CheckDBStatus/110.SetErrorLog]

Attributes=DEG_UNIQUE_ID
Attributes=DEG_ENTITLEMENT_NAME
Attributes=DEG_APNS_TOKEN
Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to perform Update or access DEG_DEVICE_DATA table
NullAlso=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=300.InitVar
RuleNames=310.InsertDeviceData
RuleNames=320.CheckDBStatus



[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain/300.InitVar]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set log_DB_Operation INSERT
AdornOps=set log_Table_Name DEG_DEVICE_DATA
AdornOps=set DEG_CDevSessionStoreErrorFlagInteger 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_UNIQUE_ID
AdornOps=copy DEG_OEMDevEntitlementNameString DEG_DEVICE_ENTITLEMENT
AdornOps=copy DEG_OEMDevImsiString DEG_IMSI
AdornOps=copy DEG_OEMDevNewApnTokenString DEG_APNS_TOKEN
AdornOps=set DEG_OLD_APNS_TOKEN ""
AdornOps=set DEG_PROVISIONING_STATUS ${DEG_DEFAULT_PROVISIONING_STATUS}
AdornOps=copy DEG_OEMDevEntitlementStatusInteger DEG_PUSH_NOTIFICATION_STATUS
AdornOps=set DEG_SERVICE_MGMT_POSTDATA ""
AdornOps=set DEG_DISPLAY_NAME ""
AdornOps=set DEG_ADDRESS_STATUS ${DEG_DEFAULT_ADDRESS_STATUS}
AdornOps=set DEG_TC_STATUS ${DEG_DEFAULT_TC_STATUS}
AdornOps=set DEG_ADDR_UPDATE_POSTDATA ""
AdornOps=set DEG_ADDR_REFID ""
AdornOps=setsystime DEG_ADDR_REFID_EXP_DATE
AdornOps=setsystime DEG_LASTUPDATE
AdornOps=set DEG_SIP_USERNAME ""
AdornOps=setsystime DEG_SELF_PROV_STARTDATE


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain/310.InsertDeviceData]

ClassName=com.hp.siu.sessionserver.rules.CreateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
SessionStore=DEG_DEVICE_DATA_SessionStore


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain/320.CheckDBStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSessionStoreErrorFlagInteger,=,1
TrueRuleChain=100.SetErrorInfo
TrueRuleChain=110.PrintError


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain/320.CheckDBStatus/100.SetErrorInfo]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.DI.EPN.0010"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to access or create entry in DEG_DEVICE_DATA table"


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/220E.CreateRowInDeviceDataTableRuleChain/320.CheckDBStatus/110.PrintError]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_DEVICE_ENTITLEMENT
Attributes=DEG_UNIQUE_ID
Attributes=DEG_APNS_TOKEN
Attributes=DEG_IMSI
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error: Unable to create record in DEG_DEVICE_DATA table
UseProperty=true
#Action=Check whether TimesTen is up. If it is up, Can't able to insert a row . Contact HP Support.

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=150.SetEnititlemnetName
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute
RuleNames=500.GenerateAuditAndNRBEvents


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_CDevProcessEntitlementStartTimeLong
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_CDevProcessEntitlementDurationString 0
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString "0"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=copy DEG_OEMDevEntitlementNameString DEG_AuditEntitlementNameString
#QXCM1001508164-Wrong entitlement name in template so audit log record is incorrect
#AdornOps=set DEG_AuditEntitlementNameString "VoWiFi"
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotificationEntitlement"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/150.SetEnititlemnetName]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_AuditEntitlementNameString,=,"Multi-SIM"
TrueRuleChain=100.SetEntitlemntNameforMiltiSimInAuditRule
FalseRuleChain=100.SetEntitlemntNameforVoWiFiInAuditRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/150.SetEnititlemnetName/100.SetEntitlemntNameforMiltiSimInAuditRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditEntitlementNameString "Multi-SIM"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/150.SetEnititlemnetName/100.SetEntitlemntNameforVoWiFiInAuditRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditEntitlementNameString "VoWiFi"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "Received enablePushNotification Entitlement request: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevEntitlementNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevEntitlementNameString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Received enablePushNotification Entitlement request :"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationEntitlementStartAuditDataRuleChain/500.GenerateAuditAndNRBEvents]

###QXCM1001434190###
###Removed Real Time Transactions from NRBGUI for Enable Push Notification Entitlement###
###calling 652 rule chain instead of 651###

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=652.DEG20GenerateAuditAndNRBEventsRuleChainHistoryOnly
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute
RuleNames=500.GenerateAuditAndNRBEvents


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_CDevProcessStartTimeLong
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditDurationString 0
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString "0"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotification"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEVICE TO DEG -> Received enablePushNotification request: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "enablePushNotification Request Recieved"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/752.DEG20EnablePushNotificationStartAuditDataRuleChain/500.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=650.DEG20GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
#RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
#RuleNames=500.PopulateAuditNRBMessageAttribute
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=setifnull DEG_OEMDevEntitlementNameListToStr ""
AdornOps=- DEG_AuditTimestampLong DEG_CDevProcessStartTimeLong DEG_AuditDurationString
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=set DEG_AuditResultCodeString "1"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotification"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO DEVICE -> Sending enablePushNotification response: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
##RFE86:Bell customization changes including as part of product.10d: Added entitlement response NME attribute in NRB logs.
AdornOps=set DEG_Tmp1String ", DEG_Entitlement_Response="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevEntitlementNameListToStr DEG_AuditMessageString


#RFE 32- JSON Return code for JSON request/response in NRB GUI
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain/500.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification response,Return code is  "
AdornOps=+ DEG_AuditNRBMessageString DEG_OEMDevRespStatusString DEG_AuditNRBMessageString

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEndOkAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=650.DEG20GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=150.SetEnititlemnetName
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=500.PopulateAuditNRBMessageAttribute
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_CDevProcessEntitlementENDTimeLong
AdornOps=- DEG_CDevProcessEntitlementENDTimeLong DEG_CDevProcessEntitlementStartTimeLong DEG_CDevProcessEntitlementDurationString
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=set DEG_AuditResultCodeString "1"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=copy DEG_OEMDevEntitlementNameString DEG_AuditEntitlementNameString
#QXCM1001508164-Wrong entitlement name in template so audit log record is incorrect
#AdornOps=set DEG_AuditEntitlementNameString "VoWiFi"
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotificationEntitlement"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/150.SetEnititlemnetName]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_AuditEntitlementNameString,=,"Multi-SIM"
TrueRuleChain=100.SetEntitlemntNameforMiltiSimInAuditRule
FalseRuleChain=100.SetEntitlemntNameforVoWiFiInAuditRule

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/150.SetEnititlemnetName/100.SetEntitlemntNameforMiltiSimInAuditRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditEntitlementNameString "Multi-SIM"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/150.SetEnititlemnetName/100.SetEntitlemntNameforVoWiFiInAuditRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditEntitlementNameString "VoWiFi"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "Sending enablePushNotification Entitlement response: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevEntitlementNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevEntitlementNameString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule

#RFE 32- JSON Return code for JSON request/response in NRB GUI
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification Entitlement response,Return code is "
AdornOps=+ DEG_AuditNRBMessageString DEG_OEMDevEntitlementStatusInteger DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule

###QXCM1001434190###
###Removed Real Time Transactions from NRBGUI for Enable Push Notification Entitlement###
###calling 652 rule chain instead of 651###

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/753.DEG20EnablePushNotificationEntitlementOKAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=652.DEG20GenerateAuditAndNRBEventsRuleChainHistoryOnly
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=001.CheckDEG_SSL_REQUEST_STATE
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=500.PopulateAuditNRBMessageAttribute
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Operations=None

Conditions=DEG_SSL_REQUEST_STATE,=,"400C"
Conditions=DEG_SSL_REQUEST_STATE,=,"500C"

TrueRuleChain=Http400C
TrueRuleChain=Http500C

Http400C=100.Http400C_SetResultCode
Http500C=200.Http500C_SetResultCode

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE/100.Http400C_SetResultCode]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditResultCodeString "400"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE/200.Http500C_SetResultCode]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditResultCodeString "500"

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_CDevProcessEntitlementENDTimeLong
AdornOps=- DEG_CDevProcessEntitlementENDTimeLong DEG_CDevProcessEntitlementStartTimeLong DEG_CDevProcessEntitlementDurationString
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=copy DEG_OEMDevEntitlementNameString DEG_AuditEntitlementNameString
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotificationEntitlement"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "Sending enablePushNotification Entitlement error response: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevEntitlementNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevEntitlementNameString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevErrorMessageString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule

#RFE 32- JSON Return code for JSON request/response in NRB GUI
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/500.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification Entitlement Error response,Return code is "
AdornOps=+ DEG_AuditNRBMessageString DEG_OEMDevRespStatusString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationEntitlementErrorAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

###QXCM1001434190###
###Removed Real Time Transactions from NRBGUI for Enable Push Notification Entitlement###
###calling 652 rule chain instead of 651###

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=652.DEG20GenerateAuditAndNRBEventsRuleChainHistoryOnly
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=001.CheckDEG_SSL_REQUEST_STATE
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=500.PopulateAuditNRBMessageAttribute
RuleNames=600.GenerateAuditAndNRBEvents

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Operations=None

Conditions=DEG_SSL_REQUEST_STATE,=,"400C"
Conditions=DEG_SSL_REQUEST_STATE,=,"500C"

TrueRuleChain=Http400C
TrueRuleChain=Http500C

Http400C=100.Http400C_SetResultCode
Http500C=200.Http500C_SetResultCode

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE/100.Http400C_SetResultCode]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditResultCodeString "400"
AdornOps=copy DEG_AuditResultCodeString DEG_OEMDevRespStatusString

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/001.CheckDEG_SSL_REQUEST_STATE/200.Http500C_SetResultCode]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_AuditResultCodeString "500"
AdornOps=copy DEG_AuditResultCodeString DEG_OEMDevRespStatusString

[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=- DEG_AuditTimestampLong DEG_CDevProcessStartTimeLong DEG_AuditDurationString
AdornOps=copy DEG_SSL_ID DEG_AuditSessionIdString
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_AuditInterfaceString "HTTPS"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=setifnull DEG_MDN 0
AdornOps=copy DEG_MDN DEG_AuditMdnString
AdornOps=setifnull DEG_OEMDevImsiString 0
AdornOps=copy DEG_OEMDevImsiString DEG_AuditIMSIString
AdornOps=setifnull DEG_OEMDevUniqueIDString 0
AdornOps=copy DEG_OEMDevUniqueIDString DEG_AuditUniqueIDString
AdornOps=set DEG_AuditEntitlementNameString ""
AdornOps=set DEG_AuditTransactionTypeString "enablePushNotification"
AdornOps=set DEG_AuditSourceDestinationString "Device"
AdornOps=set DEG_AuditSourceDestinationVersionString "V2"
AdornOps=copy DEG_OEMDevDeviceTypeString DEG_AuditDeviceTypeString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "Sending enablePushNotification error response: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_MDN="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_MDN DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevImsiString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevImsiString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevUniqueIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevUniqueIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_OEMDevErrorMessageString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_OEMDevErrorMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule

#RFE 32- JSON Return code for JSON request/response in NRB GUI
[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/500.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString "Sending enablePushNotification error response"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DeviceInterface/enablePushNotification_V2Core/RuleChains/754.DEG20EnablePushNotificationErrorAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=650.DEG20GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true
