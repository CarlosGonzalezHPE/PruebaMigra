

[/templates/DEG/JobsInterface]


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core]


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors]

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=300.JDBCOperationsConnector
ConnectorNames=400.NMERPCAPNSClientConnector


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector]

ClassName=com.hp.usage.jdbc.JDBCClientConnector
Operations=100.DEG_DEVICE_DATA_UpdateByIMSI
OpNameAttribute=DEG_OEMDevJDBCOpNameString


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector/100.DEG_DEVICE_DATA_UpdateByIMSI]

ClassName=com.hp.usage.jdbc.operations.JDBCUpdateOperation
CommonPolicyID=Policy1
SQLStatement=update DEG_DEVICE_DATA set DEG_PROVISIONING_STATUS=%DEG_PROVISIONING_STATUS, DEG_SELF_PROV_STARTDATE=%DEG_JobsCDevProcessStartTimeString where DEG_UNIQUE_ID=%DEG_UNIQUE_ID and DEG_IMSI=%DEG_IMSI and DEG_PROVISIONING_STATUS=3 and DEG_ENTITLEMENT_NAME IN ('VoWiFi','iCloudVoWiFi')
_ConnectionPoolID=DEG_DSN_TT_Pool


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector/100.DEG_DEVICE_DATA_UpdateByIMSI/OpsErrRuleChain]

ClassName=com.hp.usage.jdbc.operations.error.OpsErrRuleChain
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector/100.DEG_DEVICE_DATA_UpdateByIMSI/OpsErrRuleChain/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=SetLogInfo
RuleNames=LogError


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector/100.DEG_DEVICE_DATA_UpdateByIMSI/OpsErrRuleChain/ErrorRule/LogError]

Attributes=DEG_OEMDevDBErrorCodeString
Attributes=DEG_OEMDevDBErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: update failed for DEG_DEVICE_DATA table : 


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/300.JDBCOperationsConnector/100.DEG_DEVICE_DATA_UpdateByIMSI/OpsErrRuleChain/ErrorRule/SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0009"
AdornOps=set DEG_OEMDevErrorMessageString "update failed for DEG_DEVICE_DATA table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/400.NMERPCAPNSClientConnector]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientAdapter
Connection=PrimaryServer
MessageTypes=JOBRequestMessage
Name=JOBRPCClientAdapter
Routers=Router1


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/400.NMERPCAPNSClientConnector/JOBRequestMessage]

ClassName=com.hp.usage.nme.rpc.codec.NMERPCMessageType
RequestAttributes=CUST_APN_IN_MDNLong
RequestAttributes=CUST_APN_IN_IMSIString
RequestAttributes=CUST_APN_IN_TopicString
RequestAttributes=CUST_APN_IN_TriggerTypeString
RequestAttributes=CUST_APN_IN_TokenString
RequestAttributes=CUST_APN_IN_UniqueIdString
RequestAttributes=CUST_APN_IN_PushNotificationStatus
ResponseAttributes=CUST_APN_IN_MDNLong
ResponseAttributes=CUST_APN_IN_IMSIString
ResponseAttributes=CUST_APN_OUT_APNSSentStatusString
RuleChain=CUSTRC_Apple_APNS_SendNotification
_ResponseAttributes=DEG_APNSRecvString


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/400.NMERPCAPNSClientConnector/PrimaryServer]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientConnection
MaxAllowedRequestTimeouts=1000
MaxPendingRequests=512
ReconnectDelay=1000
ResponseTimeout=10000


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/400.NMERPCAPNSClientConnector/Router1]

ClassName=com.hp.usage.framework.connector.router.StaticRouter
Description=StaticRouter identifies destinations that a message can be sent to.
Destinations=${APNS_INTERFACE_IP}:${APNS_INTERFACE_PORT}


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/Connectors/400.NMERPCAPNSClientConnector/Transport]

ClassName=com.hp.usage.transport.tcp.TCPTransport


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService]

QueryNames=LookUpOldProvisioningSessions


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy1
FieldExtracted=DEG_IMSI,DEG_IMSI
FieldExtracted=DEG_UNIQUE_ID,DEG_UNIQUE_ID
FieldExtracted=DEG_APNS_TOKEN,DEG_APNS_TOKEN
FieldExtracted=DEG_PROVISIONING_STATUS,DEG_PROVISIONING_STATUS
FieldExtracted=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
FieldExtracted=DEG_SELF_PROV_STARTDATE,DEG_SELF_PROV_STARTDATE
QueryString=SELECT %FIELDS  FROM DEG_DEVICE_DATA WHERE DEG_PROVISIONING_STATUS =%DEG_PROVISIONING_STATUS
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger
_JDBCDataSourceConnectorName=002.RefDataDbConnectorDEG


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetErrorMessage
RuleNames=200.LogAlarming


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ErrorRule/100.SetErrorMessage]

AdornOps=set DEG_JobsDatabaseErrorFlagInteger 1
AdornOps=set DEG_JobsReturnCodeString "-1"
AdornOps=set DEG_JobsErrorMessageString "Unable to access DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0000"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to access DEG_DEVICE_DATA table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ErrorRule/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name DEG_DEVICE_DATA
AdornOps=set DEG_PROVISIONING_STATUS 3
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=201.TimeFormatChange
RuleNames=110.SetErrorInfo
RuleNames=202.PrintChangeFormatTime
RuleNames=203.CompareProvisioningTime


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule/110.SetErrorInfo]

AdornOps=set DEG_JobsErrorMessageString "Printing values:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0001"
AdornOps=set DEG_OEMDevMessageString "Printing values:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule/201.TimeFormatChange]

AdornOps=setifnull DEG_IMSI ""
AdornOps=setifnull DEG_UNIQUE_ID ""
AdornOps=setifnull DEG_APNS_TOKEN ""
AdornOps=setifnull DEG_PUSH_NOTIFICATION_STATUS 0
AdornOps=copy DEG_SELF_PROV_STARTDATE DEGSELFPROVSTARTDATELong
AdornOps=copy DEG_IMSI DEG_JobsImsiString
AdornOps=copy DEG_UNIQUE_ID DEG_JobsUniqueIDString
AdornOps=copy DEG_APNS_TOKEN DEG_JobsAPNSTokenString
AdornOps=copy DEG_PUSH_NOTIFICATION_STATUS DEG_JobsPushNotificationInteger
AdornOps=+ DEGSELFPROVSTARTDATELong DEG_DEVICEDATA_RecordLong DEGSELFPROVSTARTDATELong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule/202.PrintChangeFormatTime]

Attributes=DEGSELFPROVSTARTDATELong
Attributes=DEG_SELF_PROV_STARTDATE
Attributes=DEG_JobsImsiString
Attributes=DEG_JobsUniqueIDString
Attributes=DEG_JobsAPNSTokenString
Attributes=DEG_JobsPushNotificationInteger
Attributes=DEG_JobsCurrSysTimeLong
Attributes=DEG_DEVICEDATA_RecordLong
Attributes=DEG_CDevProcessingMessageIdString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Printing values:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule/203.CompareProvisioningTime]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsCurrSysTimeLong,>,DEGSELFPROVSTARTDATELong
TrueRuleChain=ProcessSession


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/ReferenceDataService/LookUpOldProvisioningSessions/ResultRowRule/203.CompareProvisioningTime/ProcessSession]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=500.ProcessExpiredProvisioningSessionRuleChain
UseRuleChainManagerPool=false


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains]

RuleChainNames=500.ProcessExpiredProvisioningSessionRuleChain
RuleChainNames=400.FetchExpiredProvisioningSessionsRuleChain


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/400.FetchExpiredProvisioningSessionsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitVar
RuleNames=110.UpdateOldSession


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/400.FetchExpiredProvisioningSessionsRuleChain/100.InitVar]

AdornOps=setsystime DEG_JobsCurrSysTimeMSLong
AdornOps=/ DEG_JobsCurrSysTimeMSLong 1000 DEG_JobsCurrSysTimeLong
AdornOps=set DEG_DEVICEDATA_RecordLong ${VOWIFI_PROVISIONING_STATUS_RESET_WINDOW}
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/400.FetchExpiredProvisioningSessionsRuleChain/110.UpdateOldSession]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpOldProvisioningSessions


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=41.QueryDEG_TOKENSForMDN
RuleNames=42.UpdateDeviceDataTable
RuleNames=43.SendAPNSNotification


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=010.InitLookup
RuleNames=020.ExecuteLookup
RuleNames=030.CheckLookupStatus


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/010.InitLookup]

AdornOps=copy DEG_JobsUniqueIDString DEG_UNIQUE_ID
AdornOps=copy DEG_JobsImsiString DEG_IMSI
AdornOps=set DEG_JobCarrRequestProcessedInteger 0
AdornOps=set DEG_MDN 0
AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/020.ExecuteLookup]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MDN,DEG_MDN
NativeCondition=1.MatchByPrimaryIMSIAndUniqueID
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,=,1
Conditions=DEG_JobsSessionStoreKeyExistsFlagInteger,=,0
Conditions=DEG_JobsSessionStoreKeyExistsFlagInteger,=,1
DBError=100.SetLookupError
DBError=110.LogDBError
NoMatch=200.SetNoMatchError
NoMatch=210.LogNoMatch
Operations=None
RecordFound=170.SetErrorInfo
RecordFound=300.PrintMDN
TrueRuleChain=DBError
TrueRuleChain=NoMatch
TrueRuleChain=RecordFound


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/100.SetLookupError]

AdornOps=set DEG_JobCarrRequestProcessedInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0002"
AdornOps=set DEG_JobsErrorMessageString "Error during lookup in DEG_TOKENS table:"
AdornOps=set DEG_OEMDevErrorMessageString "Error during lookup in DEG_TOKENS table:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/110.LogDBError]

Attributes=DEG_JobsImsiString
Attributes=DEG_JobsUniqueIDString
Attributes=DEG_JobCarrRequestProcessedInteger
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=CRITICAL
Message=Error during lookup in DEG_TOKENS table:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/170.SetErrorInfo]

AdornOps=set DEG_JobsErrorMessageString "Print MDN from DEG_TOKENS table:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0004"
AdornOps=set DEG_OEMDevMessageString "Printing MDN from DEG_TOKENS table:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/200.SetNoMatchError]

AdornOps=set DEG_JobCarrRequestProcessedInteger 1
AdornOps=set DEG_JobsErrorMessageString "No entry found in DEG_TOKENS table:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0003"
AdornOps=set DEG_OEMDevErrorMessageString "No entry found in DEG_TOKENS table:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/210.LogNoMatch]

Attributes=DEG_JobsImsiString
Attributes=DEG_JobsUniqueIDString
Attributes=DEG_JobCarrRequestProcessedInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=CRITICAL
Message=No entry found in DEG_TOKENS table:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/41.QueryDEG_TOKENSForMDN/030.CheckLookupStatus/300.PrintMDN]

Attributes=DEG_JobsImsiString
Attributes=DEG_JobsUniqueIDString
Attributes=DEG_MDN
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=LogNMERule
LogLevel=INFO
Message=Print MDN from DEG_TOKENS table:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.TimeFormatChange
RuleNames=105.InitVar
RuleNames=110.ConnectDB
RuleNames=115.DBStatus


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/100.TimeFormatChange]

ClassName=com.hp.siu.collector.rules.TimeAdornmentRule
FormatStrings=DEG_JobsCurrSysTimeMSLong,DEG_JobsCDevProcessStartTimeString,yyyy-MM-dd HH-mm-ss
TimeZone=America/Toronto


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/105.InitVar]

AdornOps=copy DEG_JobsImsiString DEG_IMSI
AdornOps=copy DEG_JobsUniqueIDString DEG_UNIQUE_ID
AdornOps=set DEG_PROVISIONING_STATUS 0
AdornOps=set DEG_OEMDevJDBCOpNameString "100.DEG_DEVICE_DATA_UpdateByIMSI"
AdornOps=set DEG_OEMDevDBErrorCodeString "0"
AdornOps=set DEG_OEMDevDBErrorMessageString ""
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/110.ConnectDB]

ClassName=com.hp.usage.update.SynchronousUpdateRule
ConnectorName=300.JDBCOperationsConnector
ErrorCodeAttribute=DEG_OEMDevDBErrorCodeString
ErrorMessageAttribute=DEG_OEMDevDBErrorMessageString


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/115.DBStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_OEMDevDBErrorCodeString,!=,0
Conditions=DEG_OEMDevDBErrorMessageString,!=,""
FalseRuleChain=000.SetErrorInfo
FalseRuleChain=030.LogSuccessResponse
Operation=and
TrueRuleChain=000.SetErrorResponse
TrueRuleChain=010.ErrorLog


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/115.DBStatus/000.SetErrorInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0006"
AdornOps=set DEG_JobsErrorMessageString "Entry updated in DEG_DEVICE_DATA table:"
AdornOps=set DEG_OEMDevMessageString "Entry updated in DEG_DEVICE_DATA table:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/115.DBStatus/000.SetErrorResponse]

AdornOps=set DEG_JobCarrRequestProcessedInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0005"
AdornOps=set DEG_JobsErrorMessageString "Unable to update entry in DEG_DEVICE_DATA table:"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to update entry in DEG_DEVICE_DATA table:"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/115.DBStatus/010.ErrorLog]

Attributes=DEG_JobsImsiString
Attributes=DEG_JobsUniqueIDString
Attributes=DEG_JobCarrRequestProcessedInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_OEMDevErrorMessageString
ClassName=LogNMERule
LogLevel=CRITICAL
Message=Unable to update entry in DEG_DEVICE_DATA table:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/42.UpdateDeviceDataTable/115.DBStatus/030.LogSuccessResponse]

Attributes=DEG_JobsImsiString
Attributes=DEG_MDN
Attributes=DEG_JobsAPNSTokenString
Attributes=DEG_JobsPushNotificationInteger
Attributes=DEG_JobCarrRequestProcessedInteger
Attributes=DEG_JobsCDevProcessStartTimeString
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=LogNMERule
LogLevel=INFO
Message=Entry updated in DEG_DEVICE_DATA table:


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification]

ClassName=ConditionalRule
Conditions=DEG_JobsImsiString,!=,"NULL"
Conditions=DEG_MDN,!=,0
Conditions=DEG_JobsAPNSTokenString,!=,"NULL"
Conditions=DEG_JobsPushNotificationInteger,=,6100
Conditions=DEG_JobCarrRequestProcessedInteger,=,0
Operations=and,and,and,and


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetAPNSNotification
RuleNames=101.CopyBeforeCustomCall
RuleNames=180.SetErrorInfo
RuleNames=110.LogAPNSNotification
RuleNames=200.InvokeNMERPC
RuleNames=210.LogNMERPCResponse
RuleNames=220.CopyAfterCustomCall


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/100.SetAPNSNotification]

AdornOps=copy DEG_MDN DEG_CarrMDNLong
AdornOps=copy DEG_JobsImsiString DEG_CarrIMSIString
AdornOps=copy DEG_JobsAPNSTokenString APNS_TokenString
AdornOps=copy DEG_JobsUniqueIDString DEG_APNSUniqueIdString
AdornOps=setifnull DEG_APNSTopicString "VoWiFi"
AdornOps=set DEG_TriggerTypeString "provisioning-changed"
AdornOps=copy DEG_JobsPushNotificationInteger DEG_APNSPushNotifStatusString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/101.CopyBeforeCustomCall]

AdornOps=copy DEG_CarrIMSIString CUST_APN_IN_IMSIString
AdornOps=copy DEG_CarrMDNLong CUST_APN_IN_MDNLong
AdornOps=copy APNS_TokenString CUST_APN_IN_TokenString
AdornOps=copy DEG_APNSUniqueIdString CUST_APN_IN_UniqueIdString
AdornOps=copy DEG_APNSTopicString CUST_APN_IN_TopicString
AdornOps=copy DEG_TriggerTypeString CUST_APN_IN_TriggerTypeString
AdornOps=copy DEG_APNSPushNotifStatusString CUST_APN_IN_PushNotificationStatus
AdornOps=setifnull DEG_APNSRecvString "Checking APNS connection"
AdornOps=copy DEG_APNSRecvString CUST_APN_OUT_APNSSentStatusString
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/110.LogAPNSNotification]

Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_IN_PushNotificationStatus
Attributes=CUST_APN_OUT_APNSSentStatusString
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=LogNMERule
LogLevel=INFO
Message=JOBSInterface To APNSInterface ->


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/180.SetErrorInfo]

AdornOps=set DEG_JobsErrorMessageString "JOBSInterface To APNSInterface "
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0007"
AdornOps=set DEG_OEMDevMessageString "JOBSInterface To APNSInterface"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/200.InvokeNMERPC]

ClassName=com.hp.usage.nme.rpc.client.NMERPCClientRule
MessageType=JOBRequestMessage
NMERPCClientAdapter=JOBRPCClientAdapter
Router=Router1


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/210.LogNMERPCResponse]

Attributes=CUST_APN_IN_IMSIString
Attributes=CUST_APN_IN_MDNLong
Attributes=CUST_APN_IN_TokenString
Attributes=CUST_APN_IN_UniqueIdString
Attributes=CUST_APN_IN_TopicString
Attributes=CUST_APN_IN_TriggerTypeString
Attributes=CUST_APN_OUT_APNSSentStatusString
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=LogNMERule
LogLevel=INFO
Message=APNSInterface To JOBSInterface ->


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/220.CopyAfterCustomCall]

AdornOps=copy CUST_APN_IN_IMSIString DEG_CarrIMSIString
AdornOps=copy CUST_APN_IN_MDNLong DEG_CarrMDNLong
AdornOps=copy CUST_APN_OUT_APNSSentStatusString DEG_APNSRecvString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/RuleChains/500.ProcessExpiredProvisioningSessionRuleChain/43.SendAPNSNotification/TrueRule/220.SetErrorInfo]

AdornOps=set DEG_JobsErrorMessageString "APNSInterface To JOBSInterface"
AdornOps=set DEG_CDevProcessingMessageIdString  "DEG.JOB.0008"
AdornOps=set DEG_OEMDevMessageString "APNSInterface To JOBSInterface"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/SessionStores]

SessionStoreNames=DEG_TOKENS_SessionStore


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/SessionStores/DEG_TOKENS_SessionStore]

Attributes=DEG_MDN
Attributes=DEG_IMSI,key
Attributes=DEG_SUBSTOKEN
Attributes=DEG_TOKENSTATUS
Attributes=DEG_AUTHENTICATION_TYPE
Attributes=DEG_AUTHENTICATION_SUBTYPE
Attributes=DEG_APP_TOKEN_FLAG
Attributes=DEG_AUTH_COUNT
Attributes=DEG_BLACKLIST_FLAG
Attributes=DEG_EVENTTIMESTAMP
Attributes=DEG_FULLAUTHTIMESTAMP
Attributes=DEG_PUSH_TOKEN
Attributes=DEG_UNIQUE_ID
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_TOKENS
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_DEG_TOKENS}
NativeConditions=1.MatchByPrimaryIMSIAndUniqueID
SQLTypeMap=DEG_MDN,BIGINT
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_SUBSTOKEN,CHAR(28)
SQLTypeMap=DEG_TOKENSTATUS,CHAR(2)
SQLTypeMap=DEG_AUTHENTICATION_TYPE,CHAR(3)
SQLTypeMap=DEG_AUTHENTICATION_SUBTYPE,CHAR(3)
SQLTypeMap=DEG_APP_TOKEN_FLAG,TINYINT
SQLTypeMap=DEG_AUTH_COUNT,BIGINT
SQLTypeMap=DEG_BLACKLIST_FLAG,BIGINT
SQLTypeMap=DEG_EVENTTIMESTAMP,BIGINT
SQLTypeMap=DEG_FULLAUTHTIMESTAMP,BIGINT
SQLTypeMap=DEG_PUSH_TOKEN,VARCHAR(100)


[/templates/DEG/JobsInterface/ClearSelfProvStat_Core/SessionStores/DEG_TOKENS_SessionStore/1.MatchByPrimaryIMSIAndUniqueID]

Condition=where DEG_UNIQUE_ID = %DEG_UNIQUE_ID and DEG_IMSI = %DEG_IMSI


[/templates/DEG/JobsInterface/Common_Customize]


[/templates/DEG/JobsInterface/Common_Customize/PoolService]

ClassName=com.hp.usage.jdbc.poolservice.JDBCConnectionPoolService
ConnectionPools=DEG_DSN_TT_Pool
ConnectionPools=DEG_DSN_TT_Rem_Pool1
ConnectionPools=NRB_DSN_TT_Pool


[/templates/DEG/JobsInterface/Common_Customize/PoolService/CommonConnectionPolicies]

ClassName=com.hp.usage.jdbc.poolservice.client.ConnectionPolicies
Policies=Policy1
Policies=Policy2


[/templates/DEG/JobsInterface/Common_Customize/PoolService/CommonConnectionPolicies/Policy1]

ClassName=com.hp.usage.jdbc.poolservice.client.SimpleConnectionPolicy
Pools=DEG_DSN_TT_Rem_Pool1


[/templates/DEG/JobsInterface/Common_Customize/PoolService/CommonConnectionPolicies/Policy2]

ClassName=com.hp.usage.jdbc.poolservice.client.SimpleConnectionPolicy
Pools=NRB_DSN_TT_Pool


[/templates/DEG/JobsInterface/Common_Customize/PoolService/DEG_DSN_TT_Pool]

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${DEG_DIRECT_STRING_CONNECTION}
DatabaseClass=${JDBC_DIRECT_DRIVER}
MaxIdleTime=0
Password=${PASSWD_DEG_DSN}
User=${USER_DEG_DSN}


[/templates/DEG/JobsInterface/Common_Customize/PoolService/DEG_DSN_TT_Rem_Pool1]

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${DEG_CLIENT_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
MaxIdleTime=0
Password=${PASSWD_DEG_DSN}
User=${USER_DEG_DSN}


[/templates/DEG/JobsInterface/Common_Customize/PoolService/NRB_DSN_TT_Pool]

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${NRB_CLIENT_STRING_CONNECTION}
DatabaseClass=${JDBC_CLIENT_DRIVER}
InitialPoolSize=${JOBS_DB_CON_INITIAL_POOL_SIZE}
MaxIdleTime=0
MaxPoolSize=${JOBS_DB_CON_MAX_POOL_SIZE}
Password=${PASSWD_NRB_DSN}
RetryCount=1
RetryInterval=0
User=${USER_NRB_DSN}


[/templates/DEG/JobsInterface/Connector_Core]


[/templates/DEG/JobsInterface/Connector_Core/Connectors]

ConnectorNames=100.MaintenanceSessionScheduler


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler]

ClassName=com.hp.siu.scheduler.Scheduler
ScheduledJobs=100.SSLSessionExpirationValidator


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/100.SSLSessionExpirationValidator]

MaxExecutions=-1
PollIntervalClassName=com.hp.siu.utils.SecondsInterval
QueryInterval=60
TaskLogLevel=DEBUG4
Tasks=1.DeleteExpiredSSLSessions


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/100.SSLSessionExpirationValidator/1.DeleteExpiredSSLSessions]

ClassName=com.hp.siu.sessionserver.InvokeRuleChainTask
InputNMEAttributes=EndTime,%current_time%
RuleChain=200.DeleteExpiredSSLSessionsRuleChain


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/200.DeactivateMonitoringSession]

MaxExecutions=-1
PollIntervalClassName=com.hp.siu.utils.SecondsInterval
QueryInterval=60
TaskLogLevel=DEBUG4
Tasks=1.DeactivateMonitoringSession_Task


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/200.DeactivateMonitoringSession/1.DeactivateMonitoringSession_Task]

ClassName=com.hp.siu.sessionserver.InvokeRuleChainTask
InputNMEAttributes=EndTime,%current_time%
RuleChain=210.DeactivateMonitoringSessionRuleChain


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/200.ProvisioningStatusSessionExpiration]

MaxExecutions=-1
PollIntervalClassName=com.hp.siu.utils.CrontabInterval
QueryInterval=0,4,8,12,16,20,24,28,32,36,40,44,48,52,56 * * * *
Tasks=1.UpdateExpiredProvisioningSessions


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/200.ProvisioningStatusSessionExpiration/1.UpdateExpiredProvisioningSessions]

ClassName=com.hp.siu.sessionserver.InvokeRuleChainTask
InputNMEAttributes=EndTime,%current_time%
RuleChain=400.FetchExpiredProvisioningSessionsRuleChain


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/210.DeleteMonitoringSession]

MaxExecutions=-1
PollIntervalClassName=com.hp.siu.utils.SecondsInterval
QueryInterval=60
TaskLogLevel=DEBUG4
Tasks=1.DeleteMonitoringSession_Task


[/templates/DEG/JobsInterface/Connector_Core/Connectors/100.MaintenanceSessionScheduler/210.DeleteMonitoringSession/1.DeleteMonitoringSession_Task]

ClassName=com.hp.siu.sessionserver.InvokeRuleChainTask
InputNMEAttributes=EndTime,%current_time%
RuleChain=220.DeleteMonitoringSessionRuleChain


[/templates/DEG/JobsInterface/EAPAKAAuthenticatorDiameterClient_Customize]


[/templates/DEG/JobsInterface/EAPAKAAuthenticatorDiameterClient_Customize/Connectors]


[/templates/DEG/JobsInterface/EAPAKAAuthenticatorDiameterClient_Customize/Connectors/200.DiameterAdapter]

ApplicationId=${DEG_DAIMETER_APLLICATION_ID}
ApplicationIdAttribute=DEG_JobsAppIdLong
AuthApplicationIds=${DEG_DAIMETER_APLLICATION_ID}
ClassName=com.hp.usage.diameter.DiameterAdapter
CommandCodeAttribute=DEG_JobsCommandcodeInteger
E2EAttribute=DEG_JobsE2ELong
ErrorFlagAttribute=DEG_JobsErrorFlagInteger
HbHAttribute=DEG_JobsHbHLong
JNDIName=Jobs
MaxMessageSize=8192
NeedResponseAttribute=DEG_JobsNeedResponseInteger
PersistentConnectionAddress=${PRIMARY_AAA_HOST_NAME},${AAA_SERVER_REALM}
PersistentConnectionAddress=${SECONDARY_AAA_HOST_NAME},${AAA_SERVER_REALM}
ProductName=Diameter Jobs Client
ProxiableFlagAttribute=DEG_JobsProxiableFlagInteger
RemoteHostAttribute=DEG_JobsDesthostString
RemoteRealmAttribute=DEG_JobsDestRealmString
RequestFlagAttribute=DEG_JobsRequestFlagInteger
RetransmitFlagAttribute=DEG_JobsRetransmitFlagInteger
RetryTimeouts=3,20
ServerHost=${JOBS_DIAMETER_SERVER_HOST_NAME}
ServerIP=${JOBS_DIAMETER_SERVER_HOST_IP}
ServerRealm=${DEVICE_SERVER_REALM}
StopAttribute=DEG_JobsStopInteger


[/templates/DEG/JobsInterface/EAPAKAAuthenticatorDiameterClient_Customize/Connectors/200.DiameterAdapter/Transport]

ClassName=com.hp.usage.diameter.DiameterTCPTransport
HostName=${JOBS_DIAMETER_SERVER_HOST_IP}
HostsMap=${PRIMARY_AAA_HOST_NAME},${AAA_SERVER_REALM},${PRIMARY_AAA_HOST_IP},${PRIMARY_AAA_HOST_PORT}
HostsMap=${SECONDARY_AAA_HOST_NAME},${AAA_SERVER_REALM},${SECONDARY_AAA_HOST_IP},${SECONDARY_AAA_HOST_PORT}
PortNumber=${JOBS_DIAMETER_SERVER_PORT}


[/templates/DEG/JobsInterface/Jobs_Common_Core]


[/templates/DEG/JobsInterface/Jobs_Common_Core/Connectors]

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=001.RefreshCacheConnector


[/templates/DEG/JobsInterface/Jobs_Common_Core/Connectors/001.RefreshCacheConnector]

ClassName=com.hp.siu.plugins.dna.collector.rules.SocketConnector
ListenPort=${JOBSINTERFACE_LISTEN_PORT}


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService]

ClassName=com.hp.siu.serverutils.RefDataServiceManager
QueryNames=DEG_MONITORING_SESSIONS_ToDeactivate
QueryNames=DEG_MONITORING_SESSIONS_ToDelete
QueryNames=DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete
QueryNames=LookUpExpiredSessions


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy2
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_SESSIONS WHERE DEG_MSESSIONSTATUS='AE' AND DEG_EVENTTIMESTAMP<%DEG_JobsCurrSysTimeLong AND DEG_MSESSIONPROCID=%DEG_MSESSIONPROCID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule/100.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0201"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_MSESSIONID ""
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set DEG_MSESSIONPROCID ${HOST_NAME}
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitUpdate
RuleNames=110.Update
RuleNames=200.CheckUpdateStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/100.InitUpdate]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_MSESSIONSTATUS "DE"
AdornOps=setsystime DEG_EVENTTIMESTAMP
AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/110.Update]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MSESSIONID,DEG_MSESSIONID
MapAttributes=DEG_MSESSIONSTATUS,DEG_MSESSIONSTATUS
MapAttributes=DEG_EVENTTIMESTAMP,DEG_EVENTTIMESTAMP
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_SESSIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/200.CheckUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRueChain=100.ErrorLog


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/200.CheckUpdateStatus/100.ErrorLog]

Attributes=DEG_MSESSIONID
ClassName=com.hp.siu.collector.rules.LogNMERule
ClassName=LogNMERule
Message=Unable to deactivate monitoring session: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy2
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_SESSIONS WHERE DEG_MSESSIONSTATUS!='AE' AND DEG_EVENTTIMESTAMP<%DEG_JobsCurrSysTimeLong AND DEG_MSESSIONPROCID=%DEG_MSESSIONPROCID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule/100.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0202"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_MSESSIONID ""
AdornOps=set DEG_MSESSIONPROCID ${HOST_NAME}
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DeleteMonitoringTransactions
RuleNames=200.InitDelete_MonitoringSessions
RuleNames=210.Delete_MonitoringSession
RuleNames=300.CheckDeleteStatus_MonitoringSession


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/100.DeleteMonitoringTransactions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/200.InitDelete_MonitoringSessions]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set log_DB_Operation "DELETE"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/210.Delete_MonitoringSession]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_SESSIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=200.ErrorLogs


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule/100.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0203"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete monitoring session"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule/200.ErrorLogs]

Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_MSESSIONID
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=Unable to delete monitoring session: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy2
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
FieldExtracted=DEG_MSESSIONTRANSID,DEG_MSESSIONTRANSID
FieldExtracted=DEG_MSESSIONPROCID,DEG_MSESSIONPROCID
FieldExtracted=DEG_MSESSIONTIMESTAMP,DEG_MSESSIONTIMESTAMP
FieldExtracted=DEG_MSESSIONINTERFACE,DEG_MSESSIONINTERFACE
FieldExtracted=DEG_MSESSIONINOUT,DEG_MSESSIONINOUT
FieldExtracted=DEG_MSESSIONRESULTCODE,DEG_MSESSIONRESULTCODE
FieldExtracted=DEG_MSESSIONMDN,DEG_MSESSIONMDN
FieldExtracted=DEG_MSESSIONIMSI,DEG_MSESSIONIMSI
FieldExtracted=DEG_MSESSIONUNIQUE_ID,DEG_MSESSIONUNIQUE_ID
FieldExtracted=DEG_MSESSIONTRANSACTIONTYPE,DEG_MSESSIONTRANSACTIONTYPE
FieldExtracted=DEG_MSESSIONSOURCEDESTINATION,DEG_MSESSIONSOURCEDESTINATION
FieldExtracted=DEG_MSESSIONMESSAGE,DEG_MSESSIONMESSAGE
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_TRANSACTIONS WHERE DEG_MSESSIONID=%DEG_MSESSIONID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule/100.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0204"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsOutputIndexInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORING_TRANSACTIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.InitDelete
RuleNames=210.Delete
RuleNames=300.CheckDeleteStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/100.Set_MatchFound]

AdornOps=set DEG_JobsSigMatchFoundInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/200.InitDelete]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set log_DB_Operation "DELETE"
AdornOps=set log_Table_Name "DEG_MONITORING_TRANSACTIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/210.Delete]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_TRANSACTIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRueChain=100.SetLogInfo
TrueRuleChain=100.ErrorLog


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus/100.ErrorLog]

Attributes=DEG_MSESSIONID
Attributes=DEG_MSESSIONTRANSID
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=Unable to delete monitoring transaction: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus/100.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0205"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete monitoring transaction"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy1
FieldExtracted=DEG_SSL_ID,DEG_SSL_ID
FieldExtracted=DEG_SSL_NAI,DEG_SSL_NAI
FieldExtracted=DEG_SSL_IMSI,DEG_SSL_IMSI
FieldExtracted=DEG_SSL_UNIQUE_ID,DEG_SSL_UNIQUE_ID
FieldExtracted=DEG_SSL_STATE,DEG_SSL_STATE
FieldExtracted=DEG_SSL_AAA_STATE,DEG_SSL_AAA_STATE
FieldExtracted=DEG_SSL_AAA_SESSIONID,DEG_SSL_AAA_SESSIONID
FieldExtracted=DEG_STR_FLAG,DEG_STR_FLAG
QueryString=SELECT %FIELDS  FROM DEG_SSL_SESSION WHERE DEG_SSL_CREATETIMESTAMP <= %DEG_SSL_CREATETIMESTAMP
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=080.SetLogInfo
RuleNames=100.LogAlarming
RuleNames=200.SetErrorMessage


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/080.SetLogInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Database Error:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0206"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/200.SetErrorMessage]

AdornOps=set DEG_JobsDatabaseErrorFlagInteger 1
AdornOps=set DEG_JobsReturnCodeString "-1"
AdornOps=set DEG_JobsErrorMessageString "Unable to access DEG_SSL_SESSION table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SSL_SESSION"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.LogExpiredSessions
RuleNames=300.DeleteExpiredSessions
RuleNames=400.CheckDeleteStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/100.Set_MatchFound]

AdornOps=set DEG_JobsSigMatchFoundInteger 1
AdornOps=set DEG_OEMDevMessageString "JobsInterface - ExpiredSessions:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0207"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/200.LogExpiredSessions]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_STR_FLAG
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=JobsInterface - ExpiredSessions:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/300.DeleteExpiredSessions]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NativeCondition=MatchingSession
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=010.SetLogInfo
TrueRuleChain=100.ErrorLog


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus/010.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "Session does not exists in DEG_SSL_SESSION Table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0208"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus/100.ErrorLog]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Session does not exists in DEG_SSL_SESSION Table:


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains]

ClassName=com.hp.siu.collector.rules.RuleChainManager
MaxPoolSize=${JOBS_RULECHAIN_MAX_POOL_SIZE}
MinPoolSize=${JOBS_RULECHAIN_MIN_POOL_SIZE}
RuleChainNames=000.SessionStoreDefaultErrorRuleChain
RuleChainNames=001.SessionStoreKeyNotExistsRuleChain
RuleChainNames=200.DeleteExpiredSSLSessionsRuleChain
RuleChainNames=210.DeactivateMonitoringSessionRuleChain
RuleChainNames=220.DeleteMonitoringSessionRuleChain


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=200.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/100.SetLogInfo]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0209"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain]

ClassName=RuleChain
RuleNames=100.ClearDuplicateKeyFlag


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain/100.ClearDuplicateKeyFlag]

AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=010.SetErrorInfo
RuleNames=100.LogStart
RuleNames=200.InitExpiredTimestamp
RuleNames=300.DeleteExpiredSessions
RuleNames=300.SetLogInfo
RuleNames=400.LogEnd


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/010.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Starting SSL session deletion job:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0214"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting Expired SSL session deletion job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/200.InitExpiredTimestamp]

AdornOps=setsystime DEG_SSL_CREATETIMESTAMP
AdornOps=- DEG_SSL_CREATETIMESTAMP 86400000 DEG_SSL_CREATETIMESTAMP
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/300.DeleteExpiredSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpExpiredSessions


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/300.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "Stopping current SSL session deletion job"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0215"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/400.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping Expired SSL session deletion job:


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=050.SetLogInfo
RuleNames=100.LogStart
RuleNames=200.CalculateTimestampOfSessionsToDeactivate
RuleNames=210.DeactivateMonitoringSessions
RuleNames=220.SetLogInfo
RuleNames=300.LogEnd


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/050.SetLogInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0210"
AdornOps=set DEG_OEMDevMessageString "Starting monitoring session deactivation job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting monitoring session deactivation job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/200.CalculateTimestampOfSessionsToDeactivate]

AdornOps=setsystime DEG_JobsCurrSysTimeLong
AdornOps=- DEG_JobsCurrSysTimeLong 900000 DEG_JobsCurrSysTimeLong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/210.DeactivateMonitoringSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ToDeactivate


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/220.SetLogInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0211"
AdornOps=set DEG_OEMDevMessageString "Stopping current monitoring session deactivation job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/300.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping current monitoring session deactivation job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=050.SetLogInfo
RuleNames=100.LogStart
RuleNames=200.CalculateTimestampOfSessionsToDeactivate
RuleNames=210.DeleteMonitoringSessions
RuleNames=220.SetLogInfo
RuleNames=300.LogEnd


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/050.SetLogInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0212"
AdornOps=set DEG_OEMDevMessageString "Starting monitoring session removal job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting monitoring session removal job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/200.CalculateTimestampOfSessionsToDeactivate]

AdornOps=setsystime DEG_JobsCurrSysTimeLong
AdornOps=- DEG_JobsCurrSysTimeLong 900000 DEG_JobsCurrSysTimeLong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/210.DeleteMonitoringSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ToDelete


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/220.SetLogInfo]

AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0213"
AdornOps=set DEG_OEMDevErrorMessageString "Starting current monitoring session removal job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/300.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping current monitoring session removal job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores]

ClassName=com.hp.siu.sessionserver.SessionStoreManager
SessionStoreNames=DEG_MONITORING_SESSIONS_SessionStore
SessionStoreNames=DEG_MONITORING_TRANSACTIONS_SessionStore
SessionStoreNames=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_MONITORING_SESSIONS_SessionStore]

Attributes=DEG_MSESSIONID,key
Attributes=DEG_MSESSIONTYPE
Attributes=DEG_MSESSIONKEY
Attributes=DEG_MSESSIONSTATUS
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_EVENTTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy2
DatabaseId=DEG_MONITORING_SESSIONS
DbSchema=${DBSCHEMA_NRB}
MaxDatabaseConnections=50
SQLTypeMap=DEG_MSESSIONID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTYPE,CHAR(4)
SQLTypeMap=DEG_MSESSIONKEY,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONSTATUS,CHAR(2)
SQLTypeMap=DEG_MSESSIONPROCID,VARCHAR(32)
SQLTypeMap=DEG_EVENTTIMESTAMP,BIGINT


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_MONITORING_TRANSACTIONS_SessionStore]

Attributes=DEG_MSESSIONID,key
Attributes=DEG_MSESSIONTRANSID,key
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_MSESSIONTIMESTAMP
Attributes=DEG_MSESSIONINTERFACE
Attributes=DEG_MSESSIONINOUT
Attributes=DEG_MSESSIONRESULTCODE
Attributes=DEG_MSESSIONMDN
Attributes=DEG_MSESSIONIMSI
Attributes=DEG_MSESSIONUNIQUE_ID
Attributes=DEG_MSESSIONTRANSACTIONTYPE
Attributes=DEG_MSESSIONSOURCEDESTINATION
Attributes=DEG_MSESSIONMESSAGE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy2
DatabaseId=DEG_MONITORING_TRANSACTIONS
DbSchema=${DBSCHEMA_NRB}
MaxDatabaseConnections=50
SQLTypeMap=DEG_MSESSIONID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTRANSID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONPROCID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTIMESTAMP,BIGINT
SQLTypeMap=DEG_MSESSIONINTERFACE,VARCHAR(10)
SQLTypeMap=DEG_MSESSIONINOUT,VARCHAR(3)
SQLTypeMap=DEG_MSESSIONRESULTCODE,VARCHAR(15)
SQLTypeMap=DEG_MSESSIONMDN,BIGINT
SQLTypeMap=DEG_MSESSIONIMSI,VARCHAR(64)
SQLTypeMap=DEG_MSESSIONUNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_MSESSIONTRANSACTIONTYPE,VARCHAR(50)
SQLTypeMap=DEG_MSESSIONSOURCEDESTINATION,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONMESSAGE,VARCHAR(512)


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_SSL_SESSION_SessionStore]

Attributes=DEG_SSL_ID,key
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_MDN
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_STR_FLAG
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_SSL_SESSION
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_SSL_SESSION}
NativeConditions=MatchingSession
SQLTypeMap=DEG_SSL_ID,VARCHAR(256)
SQLTypeMap=DEG_SSL_STATE,VARCHAR(256)
SQLTypeMap=DEG_SSL_AAA_SESSIONID,VARCHAR(100)
SQLTypeMap=DEG_SSL_AAA_STATE,VARBINARY(8)
SQLTypeMap=DEG_SSL_NAI,VARCHAR(256)
SQLTypeMap=DEG_SSL_IMSI,VARCHAR(256)
SQLTypeMap=DEG_SSL_MDN,VARCHAR(256)
SQLTypeMap=DEG_SSL_UNIQUE_ID,VARCHAR(256)
SQLTypeMap=DEG_SSL_CREATETIMESTAMP,BIGINT
SQLTypeMap=DEG_STR_FLAG,TINYINT


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_SSL_SESSION_SessionStore/MatchingSession]

Condition=where DEG_SSL_ID = %DEG_SSL_ID


[/templates/DEG/JobsInterface/STR_STA_Core]


[/templates/DEG/JobsInterface/STR_STA_Core/Connectors]

ConnectorNames=200.DiameterAdapter


[/templates/DEG/JobsInterface/STR_STA_Core/Connectors/200.DiameterAdapter]

Link=/templates/DEG/JobsInterface/EAPAKAAuthenticatorDiameterClient_Customize/Connectors/200.DiameterAdapter


[/templates/DEG/JobsInterface/STR_STA_Core/Connectors/200.DiameterAdapter/StateMachinePool]

ClassName=com.hp.usage.diameter.StateMachinePool
ThreadPoolSize=10


[/templates/DEG/JobsInterface/STR_STA_Core/Connectors/200.DiameterAdapter/StateMachinePool/StateMachine]

ClassName=com.hp.usage.diameter.GenericStateMachine
MessageCodeAttribute=DEG_JobsCommandcodeInteger
MessageDirectionAttribute=DEG_JobsRequestFlagInteger
RuleChainMapping=275,1,300.STRProcessingRuleChain


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService]

QueryNames=LookUpOldSessions
QueryNames=DEG_SYS_PARAMETER_PARA2VAL


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL]

ClassName=com.hp.usage.refdatasrv.CachedQuery
ResultAttribute=DEG_CDevMatchFoundInteger
ResultIndexAttribute=DEG_CDevIndexInteger


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/Cache]

CacheAttributes=DEG_SYSVALUE
CacheKeyAttributes=DEG_SYSPARAMETER
ClassName=com.hp.usage.refdatasrv.HashMapLookupCache
NMEKeyAttributes=DEG_CDevSysParameter


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=101.SetErrorInfo
RuleNames=100.LogAlarming
RuleNames=200.SetErrorFlag


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/ErrorRule/101.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0401"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/ErrorRule/200.SetErrorFlag]

AdornOps=set DEG_CDevDBErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/FinalRule]

AdornOps=copy DEG_CDevMatchFoundInteger DEG_CDevMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/InitialRule]

AdornOps=set DEG_CDevMatchFoundInteger 0
AdornOps=set DEG_CDevIndexInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SYS_PARAMETERS"
AdornOps=set DEG_SYSVALUE ""
AdornOps=set DEG_SYSPARAMETER ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/Loader]

ClassName=com.hp.usage.refdatasrv.JDBCLoader
CommonPolicyID=Policy1
FieldExtracted=DEG_SYSPARAMETER,DEG_SYSPARAMETER
FieldExtracted=DEG_SYSVALUE,DEG_SYSVALUE
QueryString=select %FIELDS from DEG_SYS_PARAMETERS


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/RefreshPolicy]

ClassName=com.hp.siu.plugins.dna.collector.rules.CronIntervalRefreshPolicy
RefreshCronInterval=0 * * * *


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/DEG_SYS_PARAMETER_PARA2VAL/ResultRowRule]

AdornOps=set DEG_CDevMatchFoundInteger 1
AdornOps=copy DEG_SYSVALUE DEG_CDevSysValueString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
CommonPolicyID=Policy1
FieldExtracted=DEG_SSL_ID,DEG_SSL_ID
FieldExtracted=DEG_SSL_NAI,DEG_SSL_NAI
FieldExtracted=DEG_SSL_IMSI,DEG_SSL_IMSI
FieldExtracted=DEG_SSL_UNIQUE_ID,DEG_SSL_UNIQUE_ID
FieldExtracted=DEG_SSL_STATE,DEG_SSL_STATE
FieldExtracted=DEG_SSL_AAA_STATE,DEG_SSL_AAA_STATE
FieldExtracted=DEG_SSL_AAA_SESSIONID,DEG_SSL_AAA_SESSIONID
FieldExtracted=DEG_STR_FLAG,DEG_STR_FLAG
QueryString=SELECT %FIELDS  FROM DEG_SSL_SESSION WHERE DEG_SSL_CREATETIMESTAMP <= %DEG_SSL_CREATETIMESTAMP
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=090.SetErrorInfo
RuleNames=100.LogAlarming
RuleNames=200.SetErrorMessage


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ErrorRule/090.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Database Error:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0402"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ErrorRule/200.SetErrorMessage]

AdornOps=set DEG_JobsDatabaseErrorFlagInteger 1
AdornOps=set DEG_JobsReturnCodeString "-1"
AdornOps=set DEG_JobsErrorMessageString "Unable to access DEG_SSL_SESSION table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SSL_SESSION"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.DEGSSLStateCheck
RuleNames=300.CheckDeleteStatus


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/100.Set_MatchFound]

AdornOps=set DEG_JobsSigMatchFoundInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SSL_STATE,=,"AUTHENTICATED_BY_AAA"
Conditions=DEG_STR_FLAG,=,0
FalseRuleChain=170.SetErrorInfo
FalseRuleChain=200.LogAllInvalidSessionStates
FalseRuleChain=210.DeleteEntriesWithAllInvalidSessionStates
TrueRuleChain=100.InvokeReadSystemParameter
TrueRuleChain=110.ExecuteActionAccordingToValueOfPId


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/100.InvokeReadSystemParameter]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
ResponseAttributes=DEG_CDevSysValueString
ResponseAttributes=DEG_CDevDBErrorFlagInteger
ResponseAttributes=DEG_CDevDBNoMatchFlagInteger
RuleChain=100.ReadPIdCheckModeSysParameterValueRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_CDevPIdSysValueString,=,"Diameter"
Conditions=DEG_CDevPIdSysValueString,=,"Radius"
Conditions=DEG_CDevPIdSysValueString,=,""
DiameterProcessing=100.SetTerminationCause
DiameterProcessing=110.SendSTR
InvalidSessionStates=001.SetErrorInfo
InvalidSessionStates=300.LogAllInvalidSessionStates
InvalidSessionStates=310.DeleteEntriesWithAllInvalidSessionStates
Operations=None
RadiusProcessing=100.SetErrorInfo
RadiusProcessing=200.LogAllSessionStates
RadiusProcessing=210.DeleteAllEntriesInSSLSessions
TrueRuleChain=DiameterProcessing
TrueRuleChain=RadiusProcessing
TrueRuleChain=InvalidSessionStates


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/001.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "JobsInterface - AllInvalidSessionStates"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0404"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/100.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "JobsInterface - AllRadiusSessionStates"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0403"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/100.SetTerminationCause]

AdornOps=set DEG_JobsTerminationCauseInteger 8
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/110.SendSTR]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEG_JobsTerminationCauseInteger
RuleChain=300.STRProcessingRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/200.LogAllSessionStates]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_STR_FLAG
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=JobsInterface - AllRadiusSessionStates:


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/210.DeleteAllEntriesInSSLSessions]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=false
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NativeCondition=MatchingSession
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/300.LogAllInvalidSessionStates]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_STR_FLAG
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=JobsInterface - AllInvalidSessionStates:


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/110.ExecuteActionAccordingToValueOfPId/310.DeleteEntriesWithAllInvalidSessionStates]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=false
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NativeCondition=MatchingSession
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/170.SetErrorInfo]

AdornOps=set  DEG_OEMDevMessageString "JobsInterface - AllInvalidSessionStates"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0405"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/200.LogAllInvalidSessionStates]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_STR_FLAG
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=JobsInterface - AllInvalidSessionStates:


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/200.DEGSSLStateCheck/210.DeleteEntriesWithAllInvalidSessionStates]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=false
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NativeCondition=MatchingSession
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/300.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=090.SetErrorInfo
TrueRuleChain=100.ErrorLog


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/300.CheckDeleteStatus/090.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Session does not exists in DEG_SSL_SESSION Table:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0406"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/ReferenceDataService/LookUpOldSessions/ResultRowRule/300.CheckDeleteStatus/100.ErrorLog]

Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Session does not exists in DEG_SSL_SESSION Table:


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains]

ClassName=com.hp.siu.sessionserver.RuleChainManager
RuleChainNames=100.ReadPIdCheckModeSysParameterValueRuleChain
RuleChainNames=110.ReadSystemParameterRuleChain
RuleChainNames=300.STRProcessingRuleChain


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitRequest
RuleNames=110.ReadValue
RuleNames=200.CheckErrorAndNoMatchFlag


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/100.InitRequest]

AdornOps=set DEG_CDevSysParameter "EAPAKAAuth"
AdornOps=set DEG_CDevSysValueString ""
AdornOps=set DEG_CDevDBErrorFlagInteger 0
AdornOps=set DEG_CDevDBNoMatchFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/110.ReadValue]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEG_CDevSysParameter
ResponseAttributes=DEG_CDevSysValueString
ResponseAttributes=DEG_CDevDBErrorFlagInteger
ResponseAttributes=DEG_CDevDBNoMatchFlagInteger
RuleChain=110.ReadSystemParameterRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevDBErrorFlagInteger,=,0
Conditions=DEG_CDevDBNoMatchFlagInteger,=,0
FalseRuleChain=200.SetEmptyValue
Operations=and
TrueRuleChain=100.CheckEAPAKAAuth


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevSysValueString,=,"Enabled"
FalseRuleChain=200.SetEmptyValue
TrueRuleChain=100.InitRequest
TrueRuleChain=110.ReadValue
TrueRuleChain=120.CheckErrorAndNoMatchFlag


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/100.InitRequest]

AdornOps=set DEG_CDevSysParameter "DEG_AAA_INTERFACE"
AdornOps=set DEG_CDevSysValueString ""
AdornOps=set DEG_CDevDBErrorFlagInteger 0
AdornOps=set DEG_CDevDBNoMatchFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/110.ReadValue]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RequestAttributes=DEG_CDevSysParameter
ResponseAttributes=DEG_CDevSysValueString
ResponseAttributes=DEG_CDevDBErrorFlagInteger
ResponseAttributes=DEG_CDevDBNoMatchFlagInteger
RuleChain=110.ReadSystemParameterRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/120.CheckErrorAndNoMatchFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_CDevDBErrorFlagInteger,=,0
Conditions=DEG_CDevDBNoMatchFlagInteger,=,0
FalseRuleChain=200.SetEmptyValue
Operations=and
TrueRuleChain=100.SetSysValue


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/120.CheckErrorAndNoMatchFlag/100.SetSysValue]

AdornOps=copy DEG_CDevSysValueString DEG_CDevPIdSysValueString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/120.CheckErrorAndNoMatchFlag/200.SetEmptyValue]

AdornOps=set DEG_CDevPIdSysValueString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/100.CheckEAPAKAAuth/200.SetEmptyValue]

AdornOps=set DEG_CDevPIdSysValueString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/100.ReadPIdCheckModeSysParameterValueRuleChain/200.CheckErrorAndNoMatchFlag/200.SetEmptyValue]

AdornOps=set DEG_CDevPIdSysValueString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/110.ReadSystemParameterRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.ReadSystemParameter


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/110.ReadSystemParameterRuleChain/100.ReadSystemParameter]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_SYS_PARAMETER_PARA2VAL


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/110.ReadSystemParameterRuleChain/100.ReadSystemParameter/ErrorRule]

AdornOps=set DEG_CDevDBErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/110.ReadSystemParameterRuleChain/100.ReadSystemParameter/NoMatchRule]

AdornOps=set DEG_CDevDBNoMatchFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain]

RuleNames=050.SetLogInfo
RuleNames=100.LogStartSTRBasedDeletion
RuleNames=200.InitTimestamp
RuleNames=300.DeleteOldSession
RuleNames=350.SetLogInfo
RuleNames=400.LogEndSTRBasedDeletion


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/050.SetLogInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0407"
AdornOps=set DEG_OEMDevMessageString "Starting STR based SSL session deletion job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/100.LogStartSTRBasedDeletion]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting STR based SSL session deletion job:


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/200.InitTimestamp]

AdornOps=setsystime DEG_SSL_CREATETIMESTAMP
AdornOps=set DEG_SSL_JOBINTERFACE_DELETE_TIME ${DEG_DEVICE_JOB_INTERFACE_SSL_SESSION_DELETE_TIME}
AdornOps=- DEG_SSL_CREATETIMESTAMP DEG_SSL_JOBINTERFACE_DELETE_TIME DEG_SSL_CREATETIMESTAMP
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/300.DeleteOldSession]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpOldSessions


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/350.SetLogInfo]

AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0408""
AdornOps=set DEG_OEMDevMessageString "Stopping STR based SSL session deletion job"
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/400.LogEndSTRBasedDeletion]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping STR based SSL session deletion job:


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetRequestParams
RuleNames=110.STRNMEConversion
RuleNames=090.SetErrorInfo
RuleNames=120.LogSTRRequest
RuleNames=200.SendSTRRequest
RuleNames=210.LogIfRequestTimeOutFlagSet
RuleNames=300.STASNMEConversion
RuleNames=205.CheckIfResultCodeNull
RuleNames=310.DeleteDEGSSLSession
RuleNames=022.SetLogInfo
RuleNames=320.LogAfterSTAResponse


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/022.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "STRProcessingRule - STAResponse"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0411"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/090.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "STRProcessingRule - STRRequest"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0409"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/100.SetRequestParams]

AdornOps=set disc 0
AdornOps=set DEG_JobsRequestFlagInteger 1
AdornOps=setifnull DEG_SSL_AAA_SESSIONID ""
AdornOps=copy DEG_SSL_AAA_SESSIONID DEG_JobsDiameterSessionIdString
AdornOps=set DEG_JobsOriginRealmString ${DEVICE_SERVER_REALM}
AdornOps=set DEG_JobsOriginHostString ${JOBS_DIAMETER_SERVER_HOST_NAME}
AdornOps=set DEG_JobsAuthApplicationIdInteger ${DEG_DAIMETER_APLLICATION_ID}
AdornOps=copy DEG_SSL_NAI DEG_JobsNameString
AdornOps=set DEG_JobsPrimaryDesthostString ${PRIMARY_AAA_HOST_NAME}
AdornOps=set DEG_JobsPrimaryDestRealmString ${AAA_SERVER_REALM}
AdornOps=set DEG_JobsSecondaryDesthostString ${SECONDARY_AAA_HOST_NAME}
AdornOps=set DEG_JobsSecondaryDestRealmString ${AAA_SERVER_REALM}
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/110.STRNMEConversion]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_JobsDiameterSessionIdString,STR_DEGtoHSS.session_id
NMEToStructuredNMEMap=DEG_JobsOriginHostString,STR_DEGtoHSS.origin_Host
NMEToStructuredNMEMap=DEG_JobsOriginRealmString,STR_DEGtoHSS.origin_Realm
NMEToStructuredNMEMap=DEG_JobsPrimaryDestRealmString,STR_DEGtoHSS.destination_Realm
NMEToStructuredNMEMap=DEG_JobsAuthApplicationIdInteger,STR_DEGtoHSS.auth_application_id
NMEToStructuredNMEMap=DEG_JobsTerminationCauseInteger,STR_DEGtoHSS.termination_cause
NMEToStructuredNMEMap=DEG_JobsNameString,STR_DEGtoHSS.user_Name
SNMEType=DiameterSwa:Body


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/120.LogSTRRequest]

Attributes=DEG_JobsDiameterSessionIdString
Attributes=DEG_JobsOriginHostString
Attributes=DEG_JobsOriginRealmString
Attributes=DEG_JobsPrimaryDestRealmString
Attributes=DEG_JobsTerminationCauseInteger
Attributes=DEG_JobsNameString
Attributes=DEG_JobsPrimaryDesthostString
Attributes=DEG_SSL_ID
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=STRProcessingRule - STRRequest:


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest]

ApplicationId=${DEG_DAIMETER_APLLICATION_ID}
ClassName=com.hp.usage.diameter.DiameterClientRule
CommandCode=275
DCJNDIName=Jobs
DestinationHostAttribute=DEG_JobsPrimaryDesthostString
DestinationRealmAttribute=DEG_JobsPrimaryDestRealmString
DisconnectAttribute=disc
E2EAttribute=DEG_JobsE2ELong
ErrorResultFlagAttribute=errFlag
HbHAttribute=DEG_JobsHbHLong
Retries=3
SecondaryDestinationHostAttribute=DEG_JobsSecondaryDesthostString
SecondaryDestinationRealmAttribute=DEG_JobsSecondaryDestRealmString
TimeOut=1000
TimeOutFlagAttribute=toFlag
WaitForConnection=false


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Decoder]

AttrCodec=STA_HSStoDEG.session_id,263,MS,M,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.result_Code,268,MS,M,,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STA_HSStoDEG.origin_Host,264,MS,M,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.origin_Realm,296,MS,M,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.class,25,OS,,,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STA_HSStoDEG.error_message,281,OS,,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.error_reporting_host,294,OS,,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.failed_AVP[*],279[*],OS,,,
AttrCodec=STA_HSStoDEG.failed_AVP[*].termination_cause,279[*].295,OS,,,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STA_HSStoDEG.failed_AVP[*].user_Name,279[*].1,OS,,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.origin_state_id,278,OS,,,UINT32Codec
AttrCodec=STA_HSStoDEG.redirect_host,292,OS,,,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STA_HSStoDEG.redirect_host_usage,261,OS,,,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STA_HSStoDEG.redirect_max_cache_time,262,OS,,,UINT32Codec
AttrCodec=STA_HSStoDEG.proxy_Info[*],284[*],OM,,,
AttrCodec=STA_HSStoDEG.proxy_Info[*].proxy_Host,284[*].280,OS,,,UTF8StringCodec
AttrCodec=STA_HSStoDEG.proxy_Info[*].proxy_State,284[*].33,OS,,,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STA_HSStoDEG.failed_AVP[*].termination_cause,279[*].295,OS,,,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STA_HSStoDEG.experimental_result[*],297[*],OM,,,
AttrCodec=STA_HSStoDEG.experimental_result[*].vendor_id,297[*].266,OS,,,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STA_HSStoDEG.experimental_result[*].experimental_result_code,297[*].298,OS,,,com.hp.usage.attrcodec.IntegerCodec
ClassName=com.hp.usage.diameter.codec.AVPDecoderHolder
DecoderClassName=com.hp.usage.diameter.codec.AVPDecoder
ListenerClassName=com.hp.usage.diameter.codec.StructuredAVPDecodeListener
NMEType=DiameterSwa:Body


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Decoder/UINT32Codec]

ClassName=com.hp.usage.attrcodec.LongCodec
Size=4


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Decoder/UINT64Codec]

ClassName=com.hp.usage.attrcodec.LongCodec
Size=8


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Decoder/UTF8StringCodec]

ClassName=com.hp.usage.attrcodec.StringCodec
Encoding=UTF-8


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Encoder]

AttrCodec=STR_DEGtoHSS.session_id,263,,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.origin_Host,264,,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.origin_Realm,296,,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.destination_Realm,283,,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.auth_application_id,258,,M,UINT32Codec
AttrCodec=STR_DEGtoHSS.eap_payload,462,,M,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STR_DEGtoHSS.termination_cause,295,,M,com.hp.usage.attrcodec.IntegerCodec
AttrCodec=STR_DEGtoHSS.user_Name,1,O,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.destination_host,293,O,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.origin_State_Id,278,O,M,UINT32Codec
AttrCodec=STR_DEGtoHSS.class,25,O,M,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STR_DEGtoHSS.proxy_Info[*],284[*],O,M,
AttrCodec=STR_DEGtoHSS.proxy_Info[*].proxy_Host,284[*].280,O,M,UTF8StringCodec
AttrCodec=STR_DEGtoHSS.proxy_Info[*].proxy_State,284[*].33,O,M,com.hp.usage.diameter.attrcodec.DiameterOctetStringCodec
AttrCodec=STR_DEGtoHSS.route_Record[*],282[*],O,M,UTF8StringCodec
ClassName=AVPEncoderHolder
ListenerClassName=com.hp.usage.diameter.codec.StructuredAVPEncodeListener
NMEType=DiameterSwa:Body


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Encoder/UINT32Codec]

ClassName=com.hp.usage.attrcodec.LongCodec
Size=4


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Encoder/UINT64Codec]

ClassName=com.hp.usage.attrcodec.LongCodec
Size=8


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/200.SendSTRRequest/Encoder/UTF8StringCodec]

ClassName=com.hp.usage.attrcodec.StringCodec
Encoding=UTF-8


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/205.CheckIfResultCodeNull]

ClassName=ConditionalRule
Conditions=DEG_JobsResultCodeInteger,=,0
TrueRuleChain=SetResultCode


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/205.CheckIfResultCodeNull/SetResultCode]

AdornOps=copy DEG_JobsExperimentalResultCodeInteger DEG_JobsResultCodeInteger
ClassName=AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/210.LogIfRequestTimeOutFlagSet]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=toFlag,!=,0
TrueRuleChain=100.SetErrorParams
TrueRuleChain=110.ErrorLog


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/210.LogIfRequestTimeOutFlagSet/100.SetErrorParams]

AdornOps=set DEG_JobsErrorMessageString "AAA could not reply in configured timeout period"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0410"
AdornOps=set DEG_OEMDevErrorMessageString "AAA could not reply in configured timeout period"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/210.LogIfRequestTimeOutFlagSet/110.ErrorLog]

Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=AAA Request Timeout Error : 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/300.STASNMEConversion]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=DiameterSwa:Body
StructuredNMEToNMEMap=STA_HSStoDEG.session_id,DEG_JobsDiameterSessionIdString
StructuredNMEToNMEMap=STA_HSStoDEG.result_Code,DEG_JobsResultCodeInteger
StructuredNMEToNMEMap=STA_HSStoDEG.origin_Host,DEG_JobsOriginHostString
StructuredNMEToNMEMap=STA_HSStoDEG.origin_Realm,DEG_JobsOriginRealmString
StructuredNMEToNMEMap=STA_HSStoDEG.error_message,DEG_JobsErrorMessageString
StructuredNMEToNMEMap=STA_HSStoDEG.experimental_result[0].vendor_id,DEG_JobsVendorIdInteger
StructuredNMEToNMEMap=STA_HSStoDEG.experimental_result[0].experimental_result_code,DEG_JobsExperimentalResultCodeInteger


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/310.DeleteDEGSSLSession]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsResultCodeInteger,within,[2001,5002]
TrueRuleChain=100.DeleteSession


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/310.DeleteDEGSSLSession/100.DeleteSession]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NativeCondition=MatchingSession
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/STR_STA_Core/RuleChains/300.STRProcessingRuleChain/320.LogAfterSTAResponse]

Attributes=DEG_JobsDiameterSessionIdString
Attributes=DEG_JobsResultCodeInteger
Attributes=DEG_JobsOriginHostString
Attributes=DEG_JobsOriginRealmString
Attributes=DEG_SSL_ID
Attributes=DEG_SSL_AAA_STATEID
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_JobsErrorMessageString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=STRProcessingRule - STAResponse:
