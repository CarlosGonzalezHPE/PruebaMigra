

[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification]


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains]


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=001.ResponseHandlerRule
RuleNames=100.InitParameter
RuleNames=110.DecodeSNME
RuleNames=120.ValidateInputParameters
RuleNames=125.PreProcessCustomTemplate
RuleNames=126.SetPreProcessError
RuleNames=130.ProcessMultiSIMRequest
RuleNames=140.LookUpAPNSTokenwithEntitlementName
RuleNames=150.SendAPNSNotification
RuleNames=160.PostProcessCustomTemplate
RuleNames=170.SetPostProcessError


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/001.ResponseHandlerRule]

AddInfoAttributeName=DEG_SubProvAddInfoString
ClassName=com.hp.usage.throttling.ResponseHandlerRule
Description= This Rule will catch the exceptions both defined and other runtime excpetions, this will be active while other rule chains running
Description= The ResponseHandlerRule is present to have a "catch-all" at the top of rule chains so that a single exception handler catches
Description= system and application exceptions, as well as understands whether a success, failure or exception was returned.
Description= It then makes calls to the appropriate child rule chain
ExceptionResponseRuleName=004.ExceptionRespHandlerRuleChain
FaultResponseName=005.FaultRespHandlerRuleChain
IUMPRDAttributeName=DEG_SubProvPRDIUMString
MessageAttributeName=DEG_SubProvRespMessageString
NormalResponseRuleName=006.SuccessRespHandlerRuleChain
OtherExceptions=NumberFormatException,DEG_SubProvNumFormatExpRespCodeString,DEG_SubProvNumFormatExpRetCodeInteger
OtherExceptions=NullPointerException,DEG_SubProvNullPointerExpRespCodeString,DEG_SubProvNullPointerExpRetCodeInteger
OtherExceptions=RuleException,DEG_SubProvResponseCodeString,DEG_SubProvReturnCodeInteger
PRDAttributeName=DEG_SubProvPRDString
ResponseAttributeName=DEG_SubProvResponseCodeString
ReturnAttributeName=DEG_SubProvReturnCodeInteger
SCPErrorAttributeName=DEG_SubProvSCPErrorAttributeString
SCPPRDAttributeName=DEG_SubProvPRDSCPString
SoapErrorAttributeName=DEG_SubProvSoapErrorAttributeString
SuccessResponseValue=DEG_SubProvSuccessRespCodeString
SuccessReturnValue=DEG_SubProvSuccessRetCodeInteger
TimeAttributeName=DEG_SubProvRespHandlerTimeString


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/100.InitParameter]

AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_SubProvOutResponseInteger 1001
AdornOps=set DEG_SubProvRequestErrorCodeString ""
AdornOps=set DEG_SubProvRequestErrorMesageString ""
AdornOps=setsystime DEG_SubProvProcessStartTimeLong
AdornOps=set DEG_SubProvMDNString 0
AdornOps=set DEG_SubProvIMSIString ""
AdornOps=set DEG_SubProvPrimaryICCIDString ""
AdornOps=set DEG_SubProvAPNSNotificationNameString ""
AdornOps=set DEG_SubProvAddInfoString ""
AdornOps=set DEG_SubProNMEAddInfoString ""
AdornOps=set DEG_SubProvPRDIUMString "2"
AdornOps=set DEG_SubProvRespMessageString ""
AdornOps=set DEG_SubProvPRDString "1"
AdornOps=set DEG_SubProvResponseCodeString "01"
AdornOps=set DEG_SubProvReturnCodeInteger 0
AdornOps=set DEG_SubProvSCPErrorAttributeString ""
AdornOps=set DEG_SubProvPRDSCPString "1"
AdornOps=set DEG_SubProvSoapErrorAttributeString ""
AdornOps=set DEG_SubProvSuccessRespCodeString "01"
AdornOps=set DEG_SubProvSuccessRetCodeInteger 0
AdornOps=set DEG_SubProvNumFormatExpRespCodeString "06"
AdornOps=set DEG_SubProvNumFormatExpRetCodeInteger 1
AdornOps=set DEG_SubProvNullPointerExpRespCodeString "07"
AdornOps=set DEG_SubProvNullPointerExpRetCodeInteger 1
AdornOps=set DEG_SubProvMandOptCheckResCodeString "01"
AdornOps=set DEG_SubProvMandOptCheckRetCodeInteger 1
AdornOps=set DEG_SubProvIllegalCharsResCodeString "04"
AdornOps=set DEG_SubProvIllegalCharsRetCodeInteger 1
AdornOps=set DEG_SubProvIllegalCharsString '<>&!?$%^*`~(){}[]
AdornOps=set DEG_SubProvLengthCheckResCodeString "02"
AdornOps=set DEG_SubProvLengthCheckRetCodeInteger 1
AdornOps=set DEG_SubProvLookupFailResCodeString "05"
AdornOps=set DEG_SubProvLookupFailRetCodeInteger 1
AdornOps=set DEG_SubProvValueCheckResCodeString "03"
AdornOps=set DEG_SubProvValueCheckRetCodeInteger 1
AdornOps=set DEG_SubProvAPNSExistsFlag 0
AdornOps=set DEG_SubProvdevicedataMatchFoundInteger 1
AdornOps=set DEG_SubProvTmpString " : "
AdornOps=set DEG_SubProvOperationIDNMEString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/110.DecodeSNME]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SNMETONMEConversion
RuleNames=180.SetErrorInfo
RuleNames=110.LogDecodedValues


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/110.DecodeSNME/100.SNMETONMEConversion]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=Provisioning:Body
StructuredNMEToNMEMap=MultiSIMSignUpNotification.MDN.CData,DEG_SubProvMDNString
StructuredNMEToNMEMap=MultiSIMSignUpNotification.IMSI.CData,DEG_SubProvIMSIString
StructuredNMEToNMEMap=MultiSIMSignUpNotification.PRIMARY_ICCID.CData,DEG_SubProvPrimaryICCIDString
StructuredNMEToNMEMap=MultiSIMSignUpNotification.APNS_NOTIFICATION_NAME.CData,DEG_SubProvAPNSNotificationNameString
StructuredNMEToNMEMap=DEG_SubProvOperationIDString,DEG_SubProvOperationIDNMEString


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/110.DecodeSNME/110.LogDecodedValues]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvPrimaryICCIDString
Attributes=DEG_SubProvAPNSNotificationNameString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=PROVSYSTEM TO DEG -> Received MultiSIMSignUpNotification request:
NullAlso=true
PropertyName=LogRequestInOutLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/110.DecodeSNME/180.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "Received MultiSIMSignUpNotification request:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1201"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/120.ValidateInputParameters]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
TrueRuleChain=100.InvokeValidateInputParameters


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/120.ValidateInputParameters/100.InvokeValidateInputParameters]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=205.MultiSIMSignUpNotificationValidateInputParametersRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/125.PreProcessCustomTemplate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=206.MultiSIMSignUpNotificationPreProcessCustomRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/126.SetPreProcessError]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvPreProcessErrorString,=,"1"
TrueRuleChain=100.SetErrorCode
TrueRuleChain=110.LogErrorCode


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/126.SetPreProcessError/100.SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "14"
AdornOps=set DEG_SubProvReturnCodeInteger 2
AdornOps=set DEG_OEMDevMessageString "Error in PreProcess Custom Template:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1202"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/126.SetPreProcessError/110.LogErrorCode]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvResponseCodeString
Attributes=DEG_SubProvReturnCodeInteger
Attributes=DEG_OEMDevMessageString
Attributes=DEG_CDevProcessingMessageIdString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Error in PreProcess Custom Template:
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvMDNString,=,""
Conditions=DEG_SubProvIMSIString,=,""
FalseRuleChain=100.ProcessRequest
Operations=and
TrueRuleChain=100.SetErrorCode
TrueRuleChain=110.LogErrorCode


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvIMSIString,=,""
FalseRuleChain=300.LookupMDNBasedonIMSI
TrueRuleChain=100.LookUpBasedonMDN


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitParameter
RuleNames=200.LogBeforeLookUpSession
RuleNames=300.ExecuteLookup
RuleNames=400.CheckLookupStatus


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/100.InitParameter]

AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
AdornOps=set DEG_SubProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_SubProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_SubProvMDNString DEG_MDN
AdornOps=set DEG_OEMDevMessageString "Before lookup from DEG_TOKENS"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1204"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/200.LogBeforeLookUpSession]

Attributes=DEG_MDN
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Before lookup from DEG_TOKENS::
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/300.ExecuteLookup]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,DEG_SubProvIMSIString
NativeCondition=2.MatchByPrimaryMDN
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_SubProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_SubProvSessionStoreKeyExistsFlagInteger,=,0
Conditions=DEG_SubProvSessionStoreKeyExistsFlagInteger,=,1
DBError=100.DBErrorSetValues
DBError=110.LogDBError
MatchFound=300.GetLastUpdateTime
NoMatch=200.RowNotFound
NoMatch=210.LogNoMatch
Operations=None
TrueRuleChain=DBError
TrueRuleChain=NoMatch
TrueRuleChain=MatchFound


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/100.DBErrorSetValues]

AdornOps=set DEG_SubProvResponseCodeString "46"
AdornOps=set DEG_SubProvReturnCodeInteger 5
AdornOps=set DEG_OEMDevErrorMessageString "Database Error: Unable to lookup in DEG_TOKENS table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.1205"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/110.LogDBError]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
Attributes=log_Table_Name
Attributes=log_DB_Operation
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to lookup in DEG_TOKENS table..
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/200.RowNotFound]

AdornOps=set DEG_SubProvResponseCodeString "02"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevErrorMessageString "MDN doesn't exist in DEG_TOKENS table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.1206"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/210.LogNoMatch]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=MDN doesn't exist in DEG_TOKENS table,APNS token could not be retrieved thus notification will not be sent 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/300.GetLastUpdateTime]

ClassName=RefDataLookupRule
QueryName=DEG_DEVICE_DATA_IMSILOOKUP


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule]

ClassName=RuleChain
RuleNames=SetErrorCode
RuleNames=LogErrorCode


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule/LogErrorCode]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=No row exists in DEG_DEVICE_DATA table for given MDN 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/100.LookUpBasedonMDN/400.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule/SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "02"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevMessageString "No row exists in DEG_DEVICE_DATA table for given MDN"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1207"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitParameter
RuleNames=200.ExecuteLookup
RuleNames=300.CheckLookupStatus


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/100.InitParameter]

AdornOps=set log_DB_Operation "SELECT"
AdornOps=set log_Table_Name "DEG_TOKENS"
AdornOps=set DEG_SubProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_SubProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_SubProvIMSIString DEG_IMSI
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/200.ExecuteLookup]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MDN,DEG_SubProvMDNString
NativeCondition=3.MatchByPrimaryIMSI
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_TOKENS_SessionStore


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_SubProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_SubProvSessionStoreKeyExistsFlagInteger,=,0
Conditions=DEG_SubProvSessionStoreKeyExistsFlagInteger,=,1
DBError=100.DBErrorSetValues
DBError=110.LogDBError
MatchFound=300.GetLastUpdateTime
NoMatch=200.RowNotFound
NoMatch=180.SetErrorInfo
NoMatch=210.LogNoMatch
Operations=None
TrueRuleChain=DBError
TrueRuleChain=NoMatch
TrueRuleChain=MatchFound


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/100.DBErrorSetValues]

AdornOps=set DEG_SubProvResponseCodeString "46"
AdornOps=set DEG_SubProvReturnCodeInteger 5
AdornOps=set DEG_OEMDevErrorMessageString "Database Error: Unable to lookup in DEG_TOKENS table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.1208"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/110.LogDBError]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
Attributes=log_Table_Name
Attributes=log_DB_Operation
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error: Unable to lookup in DEG_TOKENS table..
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/180.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "IMSI doesn't exist in DEG_TOKENS table,APNS token could not be retrieved"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.1209"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/200.RowNotFound]

AdornOps=set DEG_SubProvResponseCodeString "02"
AdornOps=set DEG_SubProvReturnCodeInteger 6
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/210.LogNoMatch]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=IMSI doesn't exist in DEG_TOKENS table,APNS token could not be retrieved thus notification will not be sent 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/300.GetLastUpdateTime]

ClassName=RefDataLookupRule
QueryName=DEG_DEVICE_DATA_IMSILOOKUP


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule]

ClassName=RuleChain
RuleNames=SetErrorCode
RuleNames=LogErrorCode


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule/LogErrorCode]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=No row exists in DEG_DEVICE_DATA table for given IMSI 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.ProcessRequest/300.LookupMDNBasedonIMSI/300.CheckLookupStatus/300.GetLastUpdateTime/NoMatchRule/SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "02"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevMessageString "Database Error:Unable to lookup UniqueID and APNS Token from DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1210"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/100.SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "01"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevMessageString "Either MDN or IMSI is required in the request::"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1203"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/130.ProcessMultiSIMRequest/110.LogErrorCode]

Attributes=DEG_SubProvMDNString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvResponseCodeString
Attributes=DEG_SubProvReturnCodeInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Either MDN or IMSI is required in the request::
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvdevicedataMatchFoundInteger,=,1
Conditions=DEG_SubProvReturnCodeInteger,=,0
Operations=and
TrueRuleChain=LookupAPNSTokenUniqueID


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitLookup
RuleNames=200.ExecuteLookup
RuleNames=300.CheckLookupStatus


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/100.InitLookup]

AdornOps=set log_Table_Name "DEG_DEVICE_DATA"
AdornOps=set log_DB_Operation "SELECT"
AdornOps=set DEG_SubProvSessionStoreErrorFlagInteger 0
AdornOps=set DEG_SubProvSessionStoreKeyExistsFlagInteger 1
AdornOps=copy DEG_SubProvAPNSNotificationNameString DEG_ENTITLEMENT_NAME
AdornOps=copy DEG_SubProvIMSIString DEG_IMSI
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/200.ExecuteLookup]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_UNIQUE_ID,DEG_SubProvUniqueIdString
MapAttributes=DEG_APNS_TOKEN,DEG_SubProvAPNSTokenString
MapAttributes=DEG_PUSH_NOTIFICATION_STATUS,DEG_PUSH_NOTIFICATION_STATUS
NativeCondition=2.MatchByLastUpdateTime
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_DEVICE_DATA_SessionStore


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_SubProvSessionStoreErrorFlagInteger,=,1
Conditions=DEG_SubProvSessionStoreKeyExistsFlagInteger,=,1
DBError=170.SetErrorInfo
DBError=100.LogDBError
DBError=110.SetError
DBError=200.LogNoMatch
Operations=None
SetFlag=300.SetAPNSUniqueIDFlag
SetFlag=400.ValidateAPNSToken
SetFlag=500.ValidatePushNotificationStatus
TrueRuleChain=DBError
TrueRuleChain=SetFlag


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/100.LogDBError]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=WARNING
Message=Database Error:Unable to lookup UniqueID and APNS Token from DEG_DEVICE_DATA table
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/110.SetError]

AdornOps=set DEG_SubProvResponseCodeString "47"
AdornOps=set DEG_SubProvReturnCodeInteger 5
AdornOps=set DEG_OEMDevMessageString "APNS Token does not exist in DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1212"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/170.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Database Error:Unable to lookup UniqueID and APNS Token from DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.1211"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/200.LogNoMatch]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=APNS Token does not exist in DEG_DEVICE_DATA table..
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/300.SetAPNSUniqueIDFlag]

AdornOps=set DEG_SubProvAPNSExistsFlag 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/400.ValidateAPNSToken]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvAPNSTokenString,=,""
TrueRuleChain=NotificationDisabled
TrueRuleChain=LogRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/400.ValidateAPNSToken/LogRule]

Attributes=DEG_SubProvAPNSTokenString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=APNS Token is empty in DEG_DEVICE_DATA table 
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/400.ValidateAPNSToken/NotificationDisabled]

AdornOps=set DEG_SubProvResponseCodeString "03"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevMessageString "APNS Token is empty in DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1213"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/500.ValidatePushNotificationStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_PUSH_NOTIFICATION_STATUS,!=,6100
TrueRuleChain=NotificationDisabled
TrueRuleChain=LogRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/500.ValidatePushNotificationStatus/LogRule]

Attributes=DEG_PUSH_NOTIFICATION_STATUS
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Push notification status is disabled in DEG_DEVICE_DATA table..
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/140.LookUpAPNSTokenwithEntitlementName/LookupAPNSTokenUniqueID/300.CheckLookupStatus/500.ValidatePushNotificationStatus/NotificationDisabled]

AdornOps=set DEG_SubProvResponseCodeString "03"
AdornOps=set DEG_SubProvReturnCodeInteger 6
AdornOps=set DEG_OEMDevMessageString "Push notification status is disabled in DEG_DEVICE_DATA table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1214"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/150.SendAPNSNotification]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=000.CheckAPNSTokenStatus


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/150.SendAPNSNotification/000.CheckAPNSTokenStatus]

ClassName=ConditionalRule
Conditions=DEG_SubProvAPNSExistsFlag,=,1
Conditions=DEG_SubProvReturnCodeInteger,=,0
Operations=and
TrueRuleChain=100.SetAPNSPushParams
TrueRuleChain=200.SendMultiSIMPushNotification


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/150.SendAPNSNotification/000.CheckAPNSTokenStatus/100.SetAPNSPushParams]

AdornOps=copy DEG_SubProvIMSIString DEG_CarrIMSIString
AdornOps=copy DEG_SubProvMDNString DEG_CarrMDNLong
AdornOps=copy DEG_SubProvAPNSNotificationNameString DEG_APNSTopicString
AdornOps=copy DEG_SubProvAPNSTokenString APNS_TokenString
AdornOps=copy DEG_SubProvUniqueIdString DEG_APNSUniqueIdString 
AdornOps=set DEG_TriggerTypeString "multi-sim-signup-changed"
ClassName=AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/150.SendAPNSNotification/000.CheckAPNSTokenStatus/200.SendMultiSIMPushNotification]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=111.SendAPNSPushNotification
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/160.PostProcessCustomTemplate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=207.MultiSIMSignUpNotificationPostProcessCustomRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/170.SetPostProcessError]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvPostProcessErrorString,=,"1"
TrueRuleChain=100.SetErrorCode
TrueRuleChain=110.LogErrorCode


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/170.SetPostProcessError/100.SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "15"
AdornOps=set DEG_SubProvReturnCodeInteger 2
AdornOps=set DEG_OEMDevMessageString "Error in PostProcess Custom Template"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.1215"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/100.MultiSIMSignUpNotificationRuleChain/170.SetPostProcessError/110.LogErrorCode]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvResponseCodeString
Attributes=DEG_SubProvReturnCodeInteger
Attributes=DEG_SubProvPostProcessErrorString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Error in PostProcess Custom Template:
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CheckMandatoryFields
RuleNames=200.GetActiveMonitoringSessionsAndGenerateAuditData
RuleNames=300.CheckOptinalFields


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/100.CheckMandatoryFields]

AddInfoNMEAttrName=DEG_SubProNMEAddInfoString
AttributeCheck=DEG_SubProvPrimaryICCIDString,y,,
AttributeCheck=DEG_SubProvAPNSNotificationNameString,y,,Multi-SIM
ClassName=com.hp.usage.throttling.NMEAttributesValidationRule
Description= Rule for validating all the NMEs common for all operations, checking for mandatory, length, format and illegal characters
IllegalChars=DEG_SubProvIllegalCharsString
IllegalCharsResCodeAttrName=DEG_SubProvIllegalCharsResCodeString
IllegalCharsRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
LengthCheckResCodeAttrName=DEG_SubProvLengthCheckResCodeString
LengthCheckRetCodeAttrName=DEG_SubProvLengthCheckRetCodeInteger
MandOptCheckResCodeAttrName=DEG_SubProvMandOptCheckResCodeString
MandOptCheckRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
ResCodeNMEAttrName=DEG_SubProvResponseCodeString
RetCodeNMEAttrName=DEG_SubProvReturnCodeInteger
ThrowException=true
Trim=true
ValueCheckResCodeAttrName=DEG_SubProvValueCheckResCodeString
ValueCheckRetCodeAttrName=DEG_SubProvValueCheckRetCodeInteger


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
TrueRuleChain=100.GetActiveMonitoringSessionByMDN
TrueRuleChain=200.GetActiveMonitoringSessionByIMSI
TrueRuleChain=300.MultiSIMSignUpNotificationStartAuditData


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByMDN]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitVariables
RuleNames=200.CheckIfMonitoredSession


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByMDN/100.InitVariables]

AdornOps=copy DEG_SubProvMDNString DEG_MSESSIONKEY
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByMDN/200.CheckIfMonitoredSession]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/200.GetActiveMonitoringSessionByIMSI]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitVariables
RuleNames=200.CheckIfMonitoredSession


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/200.GetActiveMonitoringSessionByIMSI/100.InitVariables]

AdornOps=copy DEG_SubProvIMSIString DEG_MSESSIONKEY
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/200.GetActiveMonitoringSessionByIMSI/200.CheckIfMonitoredSession]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/200.GetActiveMonitoringSessionsAndGenerateAuditData/300.MultiSIMSignUpNotificationStartAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/205.MultiSIMSignUpNotificationValidateInputParametersRuleChain/300.CheckOptinalFields]

AddInfoNMEAttrName=DEG_SubProNMEAddInfoString
AttributeCheck=DEG_SubProvMDNString,n,${PROV_INTERFACE_MDN_LENGTH},REGEX:^([0-9]+)$
AttributeCheck=DEG_SubProvIMSIString,n,${PROV_INTERFACE_IMSI_LENGTH},REGEX:^([0-9]+)$
ClassName=com.hp.usage.throttling.NMEAttributesValidationRule
Description= Rule for validating all the NMEs common for all operations, checking for mandatory, length, format and illegal characters
IllegalChars=DEG_SubProvIllegalCharsString
IllegalCharsResCodeAttrName=DEG_SubProvIllegalCharsResCodeString
IllegalCharsRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
LengthCheckResCodeAttrName=DEG_SubProvLengthCheckResCodeString
LengthCheckRetCodeAttrName=DEG_SubProvLengthCheckRetCodeInteger
MandOptCheckResCodeAttrName=DEG_SubProvMandOptCheckResCodeString
MandOptCheckRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
ResCodeNMEAttrName=DEG_SubProvResponseCodeString
RetCodeNMEAttrName=DEG_SubProvReturnCodeInteger
ThrowException=true
Trim=true
ValueCheckResCodeAttrName=DEG_SubProvValueCheckResCodeString
ValueCheckRetCodeAttrName=DEG_SubProvValueCheckRetCodeInteger


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
RuleNames=200.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=copy DEG_SubProvProcessStartTimeLong DEG_AuditTimestampLong
AdornOps=set DEG_AuditDurationString 0
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString "0"
AdornOps=copy DEG_SubProvMDNString DEG_AuditMdnString
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "MultiSIMSignUpNotification"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "PROVSYSTEM TO DEG -> Received MultiSIMSignUpNotification: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_SubProvMDNString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvIMSIString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvPrimaryICCIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvPrimaryICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvAPNSNotificationNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvAPNSNotificationNameString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/500.GenerateMultiSIMSignUpNotificationStartAuditDataRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=- DEG_AuditTimestampLong DEG_SubProvProcessStartTimeLong DEG_AuditDurationString
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=copy DEG_SubProvOutResponseString DEG_AuditResultCodeString
AdornOps=copy DEG_SubProvMDNString DEG_AuditMdnString
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "MultiSIMSignUpNotification"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO PROVSYSTEM -> Sending MultiSIMSignUpNotification response (Error): "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_SubProvMDNString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvMDNString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvIMSIString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvPrimaryICCIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvPrimaryICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvAPNSNotificationNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvAPNSNotificationNameString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain/400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString]

AdornOps=set DEG_Tmp1String ", DEG_SubProvOutResponseString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOutResponseString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/501.GenerateMultiSIMSignUpNotificationEndErrorAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=500.PopulateAuditNRBMessageAttributeDependingOnOperationType
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=- DEG_AuditTimestampLong DEG_SubProvProcessStartTimeLong DEG_AuditDurationString
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=copy DEG_SubProvOutResponseString DEG_AuditResultCodeString
AdornOps=copy DEG_SubProvMDNString DEG_AuditMdnString
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "MultiSIMSignUpNotification"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
AdornOps=setifnull DEG_SubProvMDNListString ""
AdornOps=setifnull DEG_PROVCHANGETIME 0
AdornOps=setifnull DEG_PROVTIME 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO PROVSYSTEM -> Sending MultiSIMSignUpNotification response(Success): "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_SubProvMDNString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvIMSIString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvPrimaryICCIDString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvPrimaryICCIDString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvAPNSNotificationNameString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvAPNSNotificationNameString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString]

AdornOps=set DEG_Tmp1String ", DEG_SubProvOutResponseString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOutResponseString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttributeDependingOnOperationType]

AdornOps=set DEG_AuditNRBMessageString "Sending Successful MultiSIMSignUpNotification Response"
AdornOps=set DEG_SubProvOutResponseString "1001"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/MultiSIMSignUpNotification/RuleChains/502.GenerateMultiSIMSignUpNotificationEndOKAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true
