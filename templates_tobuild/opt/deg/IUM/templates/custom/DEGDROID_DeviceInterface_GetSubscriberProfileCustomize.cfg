

[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize]


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains]

RuleChainNames=000.CUST_SessionStoreDefaultErrorRuleChain
RuleChainNames=001.CUST_SessionStoreKeyNotExistsRuleChain


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/000.CUST_SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLookupErrorFlag
RuleNames=200.LogAlarming


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/000.CUST_SessionStoreDefaultErrorRuleChain/100.SetLookupErrorFlag]

AdornOps=set CUST_GSP_OUT_ErrorFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/000.CUST_SessionStoreDefaultErrorRuleChain/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/001.CUST_SessionStoreKeyNotExistsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.ClearDuplicateKeyFlag


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/001.CUST_SessionStoreKeyNotExistsRuleChain/100.ClearDuplicateKeyFlag]

AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=80.LogIncomingAttribute
RuleNames=100.CheckIfImsiOrMsisdn
RuleNames=200.DbLookupInServiceData


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/100.CheckIfImsiOrMsisdn]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=CUST_GSP_IN_IMSIString,!=,""
Conditions=CUST_GSP_IN_MDNString,!=,""
Operations=None
RetriveSubscriberDataByImsi=100.InitDbLookupByImsi
RetriveSubscriberDataByImsi=100.ExecuteInternalDBLookupByImsi
RetriveSubscriberDataByMsisdn=100.InitDbLookupByMsisdn
RetriveSubscriberDataByMsisdn=100.ExecuteInternalDBLookupByMsisdn
TrueRuleChain=RetriveSubscriberDataByImsi
TrueRuleChain=RetriveSubscriberDataByMsisdn


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/100.CheckIfImsiOrMsisdn/100.ExecuteInternalDBLookupByImsi]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.CUST_SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MDN,CUST_GSP_OUT_MDN
MapAttributes=DEG_IMSI,CUST_GSP_IN_IMSIString
MapAttributes=DEG_CUSTSTATUS,CUST_GSP_OUT_EntitlementStatus
MapAttributes=DEG_ENTITLEMENT_LIST,CUST_GSP_OUT_EntitlementStatus
NativeCondition=1.MatchingByImsi
NotExistsErrorRuleChain=001.CUST_SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SUBSCRIBERS_SessionStore


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/100.CheckIfImsiOrMsisdn/100.ExecuteInternalDBLookupByMsisdn]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.CUST_SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MDN,DEG_MDN
MapAttributes=DEG_IMSI,CUST_GSP_IN_IMSIString
MapAttributes=DEG_CUSTSTATUS,DEG_CUSTSTATUS
MapAttributes=DEG_ENTITLEMENT_LIST,CUST_GSP_OUT_EntitlementStatus
NativeCondition=2.MatchingByMsisdn
NotExistsErrorRuleChain=001.CUST_SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_SUBSCRIBERS_SessionStore


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/100.CheckIfImsiOrMsisdn/100.InitDbLookupByImsi]

AdornOps=set log_DB_Operation SELECT
AdornOps=set log_Table_Name DEG_SUBSCRIBERS
AdornOps=set CUST_GSP_OUT_ErrorFlagInteger 0
AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 1
AdornOps=copy CUST_GSP_IN_IMSIString DEG_IMSI
AdornOps=set DEG_CDevMobileNumberString 0
AdornOps=setifnull DEG_CUSTSTATUS ""
AdornOps=setifnull CUST_GSP_OUT_EntitlementStatus ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/100.CheckIfImsiOrMsisdn/100.InitDbLookupByMsisdn]

AdornOps=set log_DB_Operation SELECT
AdornOps=set log_Table_Name DEG_SUBSCRIBERS
AdornOps=set CUST_GSP_OUT_ErrorFlagInteger 0
AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 1
AdornOps=copy CUST_GSP_IN_MDNString DEG_MDN
AdornOps=set DEG_CDevMobileNumberString 0
AdornOps=setifnull DEG_CUSTSTATUS ""
AdornOps=setifnull CUST_GSP_OUT_EntitlementStatus ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GSP_OUT_EntitlementStatus,contains,"Android_VoWiFi"
Conditions=CUST_GSP_IN_IMSIString,!=,null
Operations=and
TrueRuleChain=LookUpServiceDataRuleChain


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GSP_OUT_ErrorFlagInteger,=,0
Conditions=CUST_GSP_OUT_SubscriberExistsFlagInteger,=,1
Operations=and
TrueRuleChain=10.ExecuteLookupInServiceData


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitVar
RuleNames=110.LookupProvServTable
RuleNames=120.CheckDBStatus


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/100.InitVar]

AdornOps=set log_DB_Operation SELECT
AdornOps=set log_Table_Name DEG_PROV_SERV_DATA
AdornOps=set CUST_GSP_OUT_ErrorFlagInteger 0
AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 1
AdornOps=copy CUST_GSP_IN_IMSIString DEG_IMSI
AdornOps=+ CUST_GSP_IN_IMSIString 00 DEG_OEMDevTmpDeviceIDString
AdornOps=copy DEG_OEMDevTmpDeviceIDString DEG_DEVICE_ID
AdornOps=set DEG_OEMDevTmpEntitlementString ${ANDROIDVOWIFI_ENTITLEMENT_NAME}
AdornOps=copy DEG_OEMDevTmpEntitlementString DEG_ENTITLEMENT_NAME
AdornOps=setifnull DEG_PROV_GATEWAY_ADDRESS ""
AdornOps=setifnull DEG_PROV_ADDR_UPDATE_POST_DATA ""
AdornOps=setifnull DEG_PROV_ADDR_UPDATE_URL ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/110.LookupProvServTable]

ClassName=com.hp.siu.sessionserver.rules.LookupSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.CUST_SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_IMSI,CUST_GSP_IN_IMSIString
MapAttributes=DEG_PROV_TC_STATUS,CUST_GSP_OUT_VoWiFi_TC_STATUS
MapAttributes=DEG_PROV_ADDRESS_STATUS,CUST_GSP_OUT_VoWiFi_ADDR_STATUS
MapAttributes=DEG_PROV_PROVISIONING_STATUS,CUST_GSP_OUT_VoWiFi_PROVISIONING_STATUS
MapAttributes=DEG_PROV_GATEWAY_ADDRESS,CUST_GSP_OUT_GatewayAddrString
MapAttributes=DEG_PROV_ADDR_UPDATE_POST_DATA,CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_POSTDATA
MapAttributes=DEG_PROV_ADDR_UPDATE_URL,CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_URL
NotExistsErrorRuleChain=001.CUST_SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_PROV_SERV_DATA_SessionStore


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GSP_OUT_ErrorFlagInteger,=,1
FalseRuleChain=200.CheckKeyExistsWithSessionStoreKeyExistsFlag
TrueRuleChain=100.SetHTTPErrorResponse
TrueRuleChain=110.ErrorLog


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus/100.SetHTTPErrorResponse]

AdornOps=set DEG_OEMDevRequestProcessedInteger 1
AdornOps=set DEG_SSL_REQUEST_STATE "500C"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to perform lookup or access DEG_PROV_SERV_DATA table"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus/110.ErrorLog]

Attributes=DEG_OEMDevSslSessionIdString
Attributes=CUST_GSP_IN_IMSIString
Attributes=DEG_OEMDevActionNameString
Attributes=DEG_OEMDevAuthTypeString
Attributes=DEG_OEMDevSubscriberIdString
Attributes=DEG_MDN
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: Unable to perform lookup or access DEG_PROV_SERV_DATA table
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus/200.CheckKeyExistsWithSessionStoreKeyExistsFlag]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=CUST_GSP_OUT_SubscriberExistsFlagInteger,=,0
TrueRuleChain=100.LogRule
TrueRuleChain=100.keyReInitialization


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus/200.CheckKeyExistsWithSessionStoreKeyExistsFlag/100.keyReInitialization]

AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/200.DbLookupInServiceData/LookUpServiceDataRuleChain/10.ExecuteLookupInServiceData/120.CheckDBStatus/200.CheckKeyExistsWithSessionStoreKeyExistsFlag/100.LogRule]

Attributes=CUST_GSP_OUT_SubscriberExistsFlagInteger
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=No row exists in DEG_PROV_SERV_DATA table::


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/RuleChains/CUSTRC_GetSubscriberProfile/80.LogIncomingAttribute]

Attributes=CUST_GSP_IN_MDNString
Attributes=CUST_GSP_IN_IMSIString
Attributes=CUST_GSP_IN_IMS_Count
Attributes=CUST_GSP_OUT_ErrorFlagInteger
Attributes=CUST_GSP_OUT_SubscriberExistsFlagInteger
Attributes=CUST_GSP_OUT_MDN
Attributes=CUST_GSP_OUT_CUSTACTFEATURELIST
Attributes=CUST_GSP_OUT_VoWiFi_PROVISIONING_STATUS
Attributes=CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_POSTDATA
Attributes=CUST_GSP_OUT_VoWiFi_ADDR_STATUS
Attributes=CUST_GSP_OUT_VoWiFi_TC_STATUS
Attributes=CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_URL
Attributes=CUST_GSP_OUT_EntitlementStatus
Attributes=CUST_GSP_OUT_GatewayAddrString
Attributes=CUST_GSP_OUT_COMPANIONDEVICE_COUNT
Attributes=CUST_GSP_OUT_SIP_USERNAME
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG2
Message=Attributes within custom GSPCustomTemplate :
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/SessionStores]

SessionStoreNames=DEG_SUBSCRIBERS_SessionStore
SessionStoreNames=DEG_PROV_SERV_DATA_SessionStore


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/SessionStores/DEG_PROV_SERV_DATA_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_DEVICE_ID,key
Attributes=DEG_ENTITLEMENT_NAME,key
Attributes=DEG_PROV_TC_STATUS
Attributes=DEG_PROV_ADDRESS_STATUS
Attributes=DEG_PROV_PROVISIONING_STATUS
Attributes=DEG_PROV_GATEWAY_ADDRESS
Attributes=DEG_PROV_ADDR_UPDATE_POST_DATA
Attributes=DEG_PROV_ADDR_UPDATE_URL
Attributes=DEG_PROV_LASTUPDATE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_PROV_SERV_DATA
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_DEG_SUBS}
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_DEVICE_ID,VARCHAR(64)
SQLTypeMap=DEG_ENTITLEMENT_NAME,VARCHAR(32)
SQLTypeMap=DEG_PROV_TC_STATUS,INTEGER
SQLTypeMap=DEG_PROV_ADDRESS_STATUS,INTEGER
SQLTypeMap=DEG_PROV_PROVISIONING_STATUS,INTEGER
SQLTypeMap=DEG_PROV_GATEWAY_ADDRESS,VARCHAR(256)
SQLTypeMap=DEG_PROV_ADDR_UPDATE_POST_DATA,VARCHAR(2048)
SQLTypeMap=DEG_PROV_ADDR_UPDATE_URL,VARCHAR(1024)
SQLTypeMap=DEG_PROV_LASTUPDATE,TIMESTAMP


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/SessionStores/DEG_SUBSCRIBERS_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_MDN,key
Attributes=DEG_MIN
Attributes=DEG_CustIdInt
Attributes=DEG_CustCatIdInt
Attributes=DEG_EVENTTIMESTAMPINTEGER
Attributes=DEG_ESN
Attributes=DEG_MEID
Attributes=DEG_IMEI
Attributes=DEG_ICCID
Attributes=DEG_CUSTSTATUS
Attributes=DEG_PROVTIME
Attributes=DEG_PROVCHANGETIME
Attributes=DEG_LASTUPDATE
Attributes=DEG_ENTITLEMENT_LIST
Attributes=DEG_COMPANION_DEVICE_COUNT
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_SUBSCRIBERS
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_DEG_SUBS}
NativeConditions=1.MatchingByImsi
NativeConditions=2.MatchingByMsisdn
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_MDN,BIGINT
SQLTypeMap=DEG_MIN,BIGINT
SQLTypeMap=DEG_CUSTIDINT,VARCHAR(64)
SQLTypeMap=DEG_CUSTCATIDINT,TINYINT
SQLTypeMap=DEG_EventTimeStampInteger,VARCHAR(64)
SQLTypeMap=DEG_ESN,VARCHAR(64)
SQLTypeMap=DEG_MEID,VARCHAR(64)
SQLTypeMap=DEG_IMEI,VARCHAR(64)
SQLTypeMap=DEG_ICCID,VARCHAR(64)
SQLTypeMap=DEG_CUSTSTATUS,VARCHAR(64)
SQLTypeMap=DEG_PROVTIME,TIMESTAMP
SQLTypeMap=DEG_PROVCHANGETIME,TIMESTAMP
SQLTypeMap=DEG_LASTUPDATE,TIMESTAMP
SQLTypeMap=DEG_ENTITLEMENT_LIST,VARCHAR(512)
SQLTypeMap=DEG_COMPANION_DEVICE_COUNT,VARCHAR(64)


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/SessionStores/DEG_SUBSCRIBERS_SessionStore/1.MatchingByImsi]

Condition=where DEG_IMSI = %DEG_IMSI and DEG_CustCatIdInt=3 and DEG_CustStatus in ('AE','RE')


[/templates/DEG/DEGDROID_DeviceInterface/GetSubscriberProfileCustomize/SessionStores/DEG_SUBSCRIBERS_SessionStore/2.MatchingByMsisdn]

Condition=where DEG_MDN = %DEG_MDN
