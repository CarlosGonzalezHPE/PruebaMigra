

[/templates/DEG/ProvisioningInterface/ManageIMSCredentials]


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/Connectors]


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/Connectors/140.StoredProcConnectorDEG]

StoredProcedures=DeleteByIMSI


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/Connectors/140.StoredProcConnectorDEG/DeleteByIMSI]

ClassName=com.hp.usage.connector.lookup.jdbc.storedproc.JDBCStoredProcedure
Parameters=DEG_IMSI,IN,VARCHAR
Parameters=DEG_SubProvReturnCodeInteger,OUT,NUMERIC
ProcedureName=DeleteByIMSI


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains]


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=001.Initialise
RuleNames=002.ResponseHandlerRule
RuleNames=003.ExtractIMSI
RuleNames=003.SetLogInfo
RuleNames=004.LogIMSI
RuleNames=004.ValidateMandatoryParams
RuleNames=004B.PreProcessCustomTemplate
RuleNames=004C.SetPreProcessError
RuleNames=004A.CalculateRowCounts
RuleNames=005.InvokeLoopRule
RuleNames=006.PostProcessCustomTemplate
RuleNames=007.SetPostProcessError


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/001.Initialise]

AdornOps=set DEG_SubProvIMSIString ""
AdornOps=set DEG_SubProvDeviceIdString ""
AdornOps=set DEG_SubProvOperationString ""
AdornOps=set DEG_OEMDevProvisioningArrayIndexInteger 0
AdornOps=set DEG_SubProvAddInfoString ""
AdornOps=set DEG_SubProNMEAddInfoString ""
AdornOps=set DEG_SubProvPRDIUMString "2"
AdornOps=set DEG_SubProvRespMessageString ""
AdornOps=set DEG_SubProvPRDString "1"
AdornOps=set DEG_SubProvResponseCodeString "01"
AdornOps=set DEG_SubProvReturnCodeInteger 0
AdornOps=set DEG_SubProvSCPErrorAttributeString ""
AdornOps=set DEG_SubProvPRDSCPString "1"
AdornOps=set DEG_SubProvSoapErrorAttributeString ""
AdornOps=set DEG_SubProvSuccessRespCodeString "01"
AdornOps=set DEG_SubProvSuccessRetCodeInteger 0
AdornOps=set DEG_SubProvNumFormatExpRespCodeString "06"
AdornOps=set DEG_SubProvNumFormatExpRetCodeInteger 1
AdornOps=set DEG_SubProvNullPointerExpRespCodeString "07"
AdornOps=set DEG_SubProvNullPointerExpRetCodeInteger 1
AdornOps=set DEG_SubProvMandOptCheckResCodeString "01"
AdornOps=set DEG_SubProvMandOptCheckRetCodeInteger 1
AdornOps=set DEG_SubProvIllegalCharsResCodeString "04"
AdornOps=set DEG_SubProvIllegalCharsRetCodeInteger 1
AdornOps=set DEG_SubProvIllegalCharsString '<>&!?$%^*`~(){}[]
AdornOps=set DEG_SubProvLengthCheckResCodeString "02"
AdornOps=set DEG_SubProvLengthCheckRetCodeInteger 1
AdornOps=set DEG_SubProvLookupFailResCodeString "05"
AdornOps=set DEG_SubProvLookupFailRetCodeInteger 1
AdornOps=set DEG_SubProvValueCheckResCodeString "03"
AdornOps=set DEG_SubProvValueCheckRetCodeInteger 1
AdornOps=set DEG_AuditProcessingNodeString ${HOST_NAME}
AdornOps=set DEG_SubProvOutResponseInteger 1001
AdornOps=set DEG_SubProvRequestErrorCodeString ""
AdornOps=set DEG_SubProvRequestErrorMesageString ""
AdornOps=setsystime DEG_SubProvProcessStartTimeLong
AdornOps=set DEG_UNIQUE_ID ""
AdornOps=set DEG_IMS_PRIVATE_ID ""
AdornOps=set DEG_IMS_PUBLIC_ID ""
AdornOps=set DEG_SIP_USERNAME ""
AdornOps=set DEG_SIP_PASSWORD ""
AdornOps=set DEG_PROVTIME 0
AdornOps=set RowCount 0
AdornOps=set CompanionCount 0
AdornOps=set DEG_SubProvDeviceCountInteger 0
AdornOps=set DEG_SubProvsrvtkString ""
AdornOps=set DEG_SubProvDeviceCountInteger 0
AdornOps=setsystime DEG_LASTUPDATE
AdornOps=setsystime DEG_SubProvEVENTTIMESTAMPLong
AdornOps=set DEG_SubProvFeatureListString ""
AdornOps=set DEG_SubProvOperationIDNMEString ""
AdornOps=set DEG_SubProvProvisioningTimeString ""
AdornOps=set DEG_SubProvTmpString " : "
AdornOps=set DEG_SubProvPreProcessErrorString ""
AdornOps=set DEG_SubProvPostProcessErrorString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/002.ResponseHandlerRule]

AddInfoAttributeName=DEG_SubProvAddInfoString
ClassName=com.hp.usage.throttling.ResponseHandlerRule
Description= This Rule will catch the exceptions both defined and other runtime excpetions, this will be active while other rule chains running
Description= The ResponseHandlerRule is present to have a "catch-all" at the top of rule chains so that a single exception handler catches
Description= system and application exceptions, as well as understands whether a success, failure or exception was returned.
Description= It then makes calls to the appropriate child rule chain
ExceptionResponseRuleName=004.ExceptionRespHandlerRuleChain
FaultResponseName=005.FaultRespHandlerRuleChain
IUMPRDAttributeName=DEG_SubProvPRDIUMString
MessageAttributeName=DEG_SubProvRespMessageString
NormalResponseRuleName=006.SuccessRespHandlerRuleChain
OtherExceptions=NumberFormatException,DEG_SubProvNumFormatExpRespCodeString,DEG_SubProvNumFormatExpRetCodeInteger
OtherExceptions=NullPointerException,DEG_SubProvNullPointerExpRespCodeString,DEG_SubProvNullPointerExpRetCodeInteger
OtherExceptions=RuleException,DEG_SubProvResponseCodeString,DEG_SubProvReturnCodeInteger
PRDAttributeName=DEG_SubProvPRDString
ResponseAttributeName=DEG_SubProvResponseCodeString
ReturnAttributeName=DEG_SubProvReturnCodeInteger
SCPErrorAttributeName=DEG_SubProvSCPErrorAttributeString
SCPPRDAttributeName=DEG_SubProvPRDSCPString
SoapErrorAttributeName=DEG_SubProvSoapErrorAttributeString
SuccessResponseValue=DEG_SubProvSuccessRespCodeString
SuccessReturnValue=DEG_SubProvSuccessRetCodeInteger
TimeAttributeName=DEG_SubProvRespHandlerTimeString


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/003.ExtractIMSI]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=Provisioning:Body
StructuredNMEToNMEMap=ManageIMSCredentials.IMSI.CData,DEG_SubProvIMSIString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.Operation.CData,DEG_SubProvOperationString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.ProvisioningTime.CData,DEG_SubProvProvisioningTimeString,""
StructuredNMEToNMEMap=DEG_SubProvOperationIDString,DEG_SubProvOperationIDNMEString


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/003.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "Incoming IMSI :"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0201"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.LogIMSI]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvOperationString
Attributes=DEG_SubProvDeviceIdString
Attributes=DEG_SubProvProvisioningTimeString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Incoming IMSI :
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CheckMandatoryFields
RuleNames=200.GetActiveMonitoringSessionsAndGenerateAuditData


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/100.CheckMandatoryFields]

AddInfoNMEAttrName=DEG_SubProNMEAddInfoString
AttributeCheck=DEG_SubProvIMSIString,y,${PROV_INTERFACE_IMSI_LENGTH},REGEX:^([0-9]+)$
AttributeCheck=DEG_SubProvOperationString,y,1,A|U|D
ClassName=com.hp.usage.throttling.NMEAttributesValidationRule
Description= Rule for validating all the NMEs common for all operations, checking for mandatory, length, format and illegal characters
IllegalChars=DEG_SubProvIllegalCharsString
IllegalCharsResCodeAttrName=DEG_SubProvIllegalCharsResCodeString
IllegalCharsRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
LengthCheckResCodeAttrName=DEG_SubProvLengthCheckResCodeString
LengthCheckRetCodeAttrName=DEG_SubProvLengthCheckRetCodeInteger
MandOptCheckResCodeAttrName=DEG_SubProvMandOptCheckResCodeString
MandOptCheckRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
ResCodeNMEAttrName=DEG_SubProvResponseCodeString
RetCodeNMEAttrName=DEG_SubProvReturnCodeInteger
ThrowException=true
Trim=true
ValueCheckResCodeAttrName=DEG_SubProvValueCheckResCodeString
ValueCheckRetCodeAttrName=DEG_SubProvValueCheckRetCodeInteger


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
TrueRuleChain=090.SetErrorInfo
TrueRuleChain=001.LogValidMandatoryParams
TrueRuleChain=100.GetActiveMonitoringSessionByIMSI
TrueRuleChain=110.ManageIMSCredentialstartAuditData


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/001.LogValidMandatoryParams]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvOperationString
Attributes=DEG_SubProvDeviceIdString
Attributes=DEG_SubProvProvisioningTimeString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Incoming Mandatory Parameters Validated Successfully :
NullAlso=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/090.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "Incoming Mandatory Parameters Validated Successfully"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0202"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByIMSI]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitVariables
RuleNames=200.CheckIfMonitoredSession


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByIMSI/100.InitVariables]

AdornOps=copy DEG_SubProvIMSIString DEG_MSESSIONKEY
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/100.GetActiveMonitoringSessionByIMSI/200.CheckIfMonitoredSession]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ActiveSessions


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004.ValidateMandatoryParams/200.GetActiveMonitoringSessionsAndGenerateAuditData/110.ManageIMSCredentialstartAuditData]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=500.GenerateManageIMSCredentialstartAuditDataRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004A.CalculateRowCounts]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvOperationString,=,"A"
TrueRuleChain=100.FindCompanionCount
TrueRuleChain=101.FindRowCount
TrueRuleChain=200.DeleteIMSData


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004A.CalculateRowCounts/100.FindCompanionCount]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=100.FindCompanionCountRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004A.CalculateRowCounts/101.FindRowCount]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=100.FindRowCountRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004A.CalculateRowCounts/200.DeleteIMSData]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=RowCount,>,0
Conditions=RowCount,<,CompanionCount
Operations=and
TrueRuleChain=100.InvokeDeleteStoredProcRuleChain


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004A.CalculateRowCounts/200.DeleteIMSData/100.InvokeDeleteStoredProcRuleChain]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=100.InvokeDeleteIMSRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004B.PreProcessCustomTemplate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=204.ManageIMSCredentialsPreProcessCustomRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004C.SetPreProcessError]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvPreProcessErrorString,=,"1"
TrueRuleChain=100.SetErrorCode
TrueRuleChain=110.LogErrorCode


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004C.SetPreProcessError/100.SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "14"
AdornOps=set DEG_SubProvReturnCodeInteger 2
AdornOps=set DEG_OEMDevErrorMessageString "Error in PreProcess Custom template"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.PI.0203"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/004C.SetPreProcessError/110.LogErrorCode]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvResponseCodeString
Attributes=DEG_SubProvReturnCodeInteger
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Error in PreProcess Custom template 
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule]

ClassName=com.hp.usage.nme.rules.SplitArrayRule
SplitAttribute=ManageIMSCredentials.IMSCredentials
SplitRules=100.ExtractIMSCredentials


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=001.SetErrorInfo
RuleNames=001.LogEnterIntoSplitArrayRule
RuleNames=100.InitParameter
RuleNames=200.DecodeSNME
RuleNames=400.CheckValidationResult
RuleNames=006.ProcessManageIMSCredentials


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/001.LogEnterIntoSplitArrayRule]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG4
Message=Enter into SplitArrayRule :
NullAlso=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/001.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "Enter into SplitArrayRule"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0204"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
TrueRuleChain=090.SetErrorInfo
TrueRuleChain=110.LogProcessedIncomingRequest
TrueRuleChain=200.ProcessAccordingToOperationType


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/090.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "PROVSYSTEM TO DEG -> Received ManageIMSCredentials request:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0206"
ClassName=com.hp.siu.collector.rules.AdornmentRule 


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/110.LogProcessedIncomingRequest]

Attributes=DEG_IMSI
Attributes=DEG_DEVICE_ID
Attributes=DEG_UNIQUE_ID
Attributes=DEG_IMS_PRIVATE_ID
Attributes=DEG_IMS_PUBLIC_ID
Attributes=DEG_SIP_USERNAME
Attributes=DEG_SIP_PASSWORD
Attributes=DEG_SubProvProvisioningTimeString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=PROVSYSTEM TO DEG -> Received ManageIMSCredentials request:
NullAlso=true
PropertyName=LogRequestInOutLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/200.ProcessAccordingToOperationType]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_SubProvOperationString,=,"A"
Conditions=DEG_SubProvOperationString,=,"U"
Conditions=DEG_SubProvOperationString,=,"D"
InvokeAddIMSCredentialsRuleChain=100.InvokeAddIMSCredentialsRuleChain
InvokeDeleteIMSCredentialsRuleChain=300.InvokeDeleteIMSCredentialsRuleChain
InvokeUpdateIMSCredentialsRuleChain=200.InvokeUpdateIMSCredentialsRuleChain
Operations=None
TrueRuleChain=InvokeAddIMSCredentialsRuleChain
TrueRuleChain=InvokeUpdateIMSCredentialsRuleChain
TrueRuleChain=InvokeDeleteIMSCredentialsRuleChain


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/200.ProcessAccordingToOperationType/100.InvokeAddIMSCredentialsRuleChain]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=703.ManageIMSCreateSessionRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/200.ProcessAccordingToOperationType/200.InvokeUpdateIMSCredentialsRuleChain]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=202.ManageIMSCredentialsUpdateOperationRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/006.ProcessManageIMSCredentials/200.ProcessAccordingToOperationType/300.InvokeDeleteIMSCredentialsRuleChain]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=203.ManageIMSCredentialsDeleteOperationRuleChain
UseRuleChainManagerPool=true 


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/100.InitParameter]

AdornOps=set DEG_SubProvDeviceIdString ""
AdornOps=set DEG_SubProvUniqueIdString ""
AdornOps=set DEG_SubProvIMSPrivateIdString ""
AdornOps=set DEG_SubProvIMSPublicIdString ""
AdornOps=set DEG_SubProvSipUserNameString ""
AdornOps=set DEG_SubProvSipPasswordString ""
AdornOps=set DEG_TimeZoneString "UTC"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/200.DecodeSNME]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SNMETONMEConversion
RuleNames=101.CopyNMEToTableNME
RuleNames=005.SetErrorInfo
RuleNames=110.DecodeSNMELog


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/200.DecodeSNME/005.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "After decoding IMS Credentials :"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0205"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/200.DecodeSNME/100.SNMETONMEConversion]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
SNMEType=Provisioning:Body
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].DeviceId.CData,DEG_SubProvDeviceIdString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].UniqueId.CData,DEG_SubProvUniqueIdString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].IMSPrivateId.CData,DEG_SubProvIMSPrivateIdString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].IMSPublicId.CData,DEG_SubProvIMSPublicIdString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].SipUserName.CData,DEG_SubProvSipUserNameString,NotInRequest
StructuredNMEToNMEMap=ManageIMSCredentials.IMSCredentials[0].SipPassword.CData,DEG_SubProvSipPasswordString,NotInRequest


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/200.DecodeSNME/101.CopyNMEToTableNME]

AdornOps=copy DEG_SubProvIMSIString DEG_IMSI
AdornOps=copy DEG_SubProvDeviceIdString  DEG_DEVICE_ID
AdornOps=copy DEG_SubProvUniqueIdString  DEG_UNIQUE_ID
AdornOps=copy DEG_SubProvIMSPrivateIdString  DEG_IMS_PRIVATE_ID
AdornOps=copy DEG_SubProvIMSPublicIdString  DEG_IMS_PUBLIC_ID
AdornOps=copy DEG_SubProvSipUserNameString  DEG_SIP_USERNAME
AdornOps=copy DEG_SubProvSipPasswordString  DEG_SIP_PASSWORD
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/200.DecodeSNME/110.DecodeSNMELog]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvDeviceIdString
Attributes=DEG_SubProvUniqueIdString
Attributes=DEG_SubProvIMSPrivateIdString
Attributes=DEG_SubProvIMSPublicIdString
Attributes=DEG_SubProvSipUserNameString
Attributes=DEG_SubProvSipPasswordString
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG4
Message=After decoding IMS Credentials :
NullAlso=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/300.ValidateInputParameters]

AddInfoNMEAttrName=DEG_SubProNMEAddInfoString
AttributeCheck=DEG_SubProvDeviceIdString,y,15,REGEX:^\d{15}$
AttributeCheck=DEG_SubProvUniqueIdString,y,15,REGEX:^\d{15}$
ClassName=com.hp.usage.throttling.NMEAttributesValidationRule
Description= Rule for validating all the NMEs common for all operations, checking for mandatory, length, format and illegal characters
IllegalChars=DEG_SubProvIllegalCharsString
IllegalCharsResCodeAttrName=DEG_SubProvIllegalCharsResCodeString
IllegalCharsRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
LengthCheckResCodeAttrName=DEG_SubProvLengthCheckResCodeString
LengthCheckRetCodeAttrName=DEG_SubProvLengthCheckRetCodeInteger
MandOptCheckResCodeAttrName=DEG_SubProvMandOptCheckResCodeString
MandOptCheckRetCodeAttrName=DEG_SubProvMandOptCheckRetCodeInteger
ResCodeNMEAttrName=DEG_SubProvResponseCodeString
RetCodeNMEAttrName=DEG_SubProvReturnCodeInteger
ThrowException=true
Trim=true
ValueCheckResCodeAttrName=DEG_SubProvValueCheckResCodeString
ValueCheckRetCodeAttrName=DEG_SubProvValueCheckRetCodeInteger


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/400.CheckValidationResult]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
TrueRuleChain=100.SetEventTime


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/005.InvokeLoopRule/100.ExtractIMSCredentials/400.CheckValidationResult/100.SetEventTime]

ClassName=com.hp.siu.collector.rules.IntegerToDateTime
DstAttributeName=DEG_EVENTTIMESTAMPINTEGER
IntegerAttributeName=DEG_SubProvEVENTTIMESTAMPLong
TimeFormat=yyyy-MM-dd HH:mm:ss
TimeZoneAttributeName=DEG_TimeZoneString


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/006.PostProcessCustomTemplate]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=205.ManageIMSCredentialsPostProcessCustomRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/007.SetPostProcessError]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvPostProcessErrorString,=,"1"
TrueRuleChain=100.SetErrorCode
TrueRuleChain=110.LogErrorCode


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/007.SetPostProcessError/100.SetErrorCode]

AdornOps=set DEG_SubProvResponseCodeString "15"
AdornOps=set DEG_SubProvReturnCodeInteger 2
AdornOps=set DEG_OEMDevMessageString "Error in PostProcess Custom template"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0207"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/200.ManageIMSCredentialsOpertations/007.SetPostProcessError/110.LogErrorCode]

Attributes=DEG_SubProvIMSIString
Attributes=DEG_SubProvResponseCodeString
Attributes=DEG_SubProvReturnCodeInteger
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Error in PostProcess Custom template 
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/202.ManageIMSCredentialsUpdateOperationRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.ManageIMSCredentialsUpdateOperation_Process


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/202.ManageIMSCredentialsUpdateOperationRuleChain/100.ManageIMSCredentialsUpdateOperation_Process]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=300.UpdateSession


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/202.ManageIMSCredentialsUpdateOperationRuleChain/100.ManageIMSCredentialsUpdateOperation_Process/300.UpdateSession]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=704.ManageIMSCredentialsUpdateSessionRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/203.ManageIMSCredentialsDeleteOperationRuleChain]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_SubProvReturnCodeInteger,=,0
RuleNames=100.DeleteWithIMSI


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/203.ManageIMSCredentialsDeleteOperationRuleChain/100.DeleteWithIMSI]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=701.InvokeDeleteStoredProc
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.CreateAuditRecord
RuleNames=200.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/100.CreateAuditRecord]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditNRBMessageAttribute


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/100.CreateAuditRecord/100.PopulateCommonAuditAttributes]

AdornOps=copy DEG_SubProvProcessStartTimeLong DEG_AuditTimestampLong
AdornOps=set DEG_AuditDurationString 0
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "IN"
AdornOps=set DEG_AuditResultCodeString "0"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "ManageIMSCredentials"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/100.CreateAuditRecord/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "PROVSYSTEM TO DEG -> Received ManageIMSCredentials: "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/100.CreateAuditRecord/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_SubProvIMSIString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvOperationString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOperationString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvDeviceIdString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvDeviceIdString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvProvisioningTimeString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvProvisioningTimeString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/100.CreateAuditRecord/400.PopulateAuditNRBMessageAttribute]

AdornOps=set DEG_AuditNRBMessageString ""
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/500.GenerateManageIMSCredentialstartAuditDataRuleChain/200.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=- DEG_AuditTimestampLong DEG_SubProvProcessStartTimeLong DEG_AuditDurationString
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=copy DEG_SubProvOutResponseString DEG_AuditResultCodeString
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "ManageIMSCredentials"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO PROVSYSTEM -> Sending ManageIMSCredentials response (Error): "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_SubProvIMSIString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvIMSIString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String " DEG_SubProvOperationString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOperationString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvRequestErrorCodeString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvRequestErrorCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvRequestErrorMesageString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvRequestErrorMesageString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvSOAPFaultCodeString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvSOAPFaultCodeString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvSOAPFaultMessageString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvSOAPFaultMessageString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain/400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString]

AdornOps=set DEG_Tmp1String ", DEG_SubProvOutResponseString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOutResponseString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/501.GenerateManageIMSCredentialsEndErrorAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetErrorInfo
RuleNames=000.PopulateCommonAuditLog
RuleNames=500.PopulateAuditNRBMessageAttributeDependingOnOperationType
RuleNames=100.PopulateCommonAuditAttributes
RuleNames=200.PopulateAuditMessageAttribute_Header
RuleNames=300.PopulateAuditMessageAttribute_Append_Attributes
RuleNames=400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString
RuleNames=600.GenerateAuditAndNRBEvents


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/000.PopulateCommonAuditLog]

Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=DEBUG
Message=Entering into 502.GenerateRule..
NullAlso=true
PropertyName=LogRequestFlowLevel1
UseProperty=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/100.PopulateCommonAuditAttributes]

AdornOps=setsystime DEG_AuditTimestampLong
AdornOps=- DEG_AuditTimestampLong DEG_SubProvProcessStartTimeLong DEG_AuditDurationString
AdornOps=set DEG_AuditInterfaceString "SOAP"
AdornOps=set DEG_AuditInOutString "OUT"
AdornOps=copy DEG_SubProvOutResponseString DEG_AuditResultCodeString
AdornOps=copy DEG_SubProvIMSIString DEG_AuditIMSIString
AdornOps=set DEG_AuditTransactionTypeString "ManageIMSCredentials"
AdornOps=set DEG_AuditSourceDestinationString "PROVSYSTEM"
AdornOps=copy DEG_SubProvIMSIString DEG_AuditChannelNameString
AdornOps=setifnull DEG_PROVTIME 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/100.SetErrorInfo]

AdornOps=set DEG_OEMDevMessageString "Entering into 502.GenerateRule"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.PI.0208"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/200.PopulateAuditMessageAttribute_Header]

AdornOps=set DEG_AuditMessageString "DEG TO PROVSYSTEM -> Sending ManageIMSCredentials response(Success): "
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/300.PopulateAuditMessageAttribute_Append_Attributes]

AdornOps=set DEG_Tmp1String "DEG_IMSI="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_IMSI DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_SubProvOperationString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOperationString DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_PROVTIME="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_PROVTIME DEG_AuditMessageString
AdornOps=set DEG_Tmp1String ", DEG_LASTUPDATE="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_LASTUPDATE DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/400.PopulateAuditMessageAttribute_Append_DEG_SubProvOutResponseString]

AdornOps=set DEG_Tmp1String ", DEG_SubProvOutResponseString="
AdornOps=+ DEG_AuditMessageString DEG_Tmp1String DEG_AuditMessageString
AdornOps=+ DEG_AuditMessageString DEG_SubProvOutResponseString DEG_AuditMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttributeDependingOnOperationType]

AddSubscriber=100.AddSubscriber
ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_SubProvOperationString,=,"A"
Conditions=DEG_SubProvOperationString,=,"U"
Conditions=DEG_SubProvOperationString,=,"D"
DeleteSubscriber=300.DeleteSubscriber
Operations=None
TrueRuleChain=AddSubscriber
TrueRuleChain=UpdateSubscriber
TrueRuleChain=DeleteSubscriber
UpdateSubscriber=200.UpdateSubscriber


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttributeDependingOnOperationType/100.AddSubscriber]

AdornOps=set DEG_AuditNRBMessageString "Successful ManageIMSCredentials Add Operation,Return code is "
AdornOps=set DEG_SubProvOutResponseString "1001"
AdornOps=+ DEG_AuditNRBMessageString DEG_SubProvOutResponseString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttributeDependingOnOperationType/200.UpdateSubscriber]

AdornOps=set DEG_AuditNRBMessageString "Successful ManageIMSCredentials Update Operation,Return code is "
AdornOps=set DEG_SubProvOutResponseString "1003"
AdornOps=+ DEG_AuditNRBMessageString DEG_SubProvOutResponseString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/500.PopulateAuditNRBMessageAttributeDependingOnOperationType/300.DeleteSubscriber]

AdornOps=set DEG_AuditNRBMessageString "Successful ManageIMSCredentials Delete Operation,Return code is "
AdornOps=set DEG_SubProvOutResponseString "1002"
AdornOps=+ DEG_AuditNRBMessageString DEG_SubProvOutResponseString DEG_AuditNRBMessageString
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/RuleChains/502.GenerateManageIMSCredentialsEndOKAuditDataRuleChain/600.GenerateAuditAndNRBEvents]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=600.GenerateAuditAndNRBEventsRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/SessionStores]

ClassName=com.hp.siu.sessionserver.SessionStoreManager
SessionStoreNames=DEG_IMS_DATA_SessionStore
SessionStoreNames=DEG_COMPANION_TOKENS_SessionStore


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/SessionStores/DEG_COMPANION_TOKENS_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_DEVICE_ID
Attributes=DEG_UNIQUE_ID
Attributes=DEG_SERVICE_TOKEN
Attributes=DEG_SERVICETOKEN_STATUS
Attributes=DEG_AUTH_TIMESTAMP
Attributes=DEG_TOKENCREATE_TIMESTAMP
Attributes=DEG_AUTH_COUNT
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_COMPANION_TOKENS
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_TOKENS}
NativeConditions=2.MatchByPrimaryIMSI
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_DEVICE_ID,VARCHAR(64)
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_SERVICE_TOKEN,VARCHAR(64)
SQLTypeMap=DEG_SERVICETOKEN_STATUS,CHAR(2)
SQLTypeMap=DEG_AUTH_TIMESTAMP,BIGINT
SQLTypeMap=DEG_TOKENCREATE_TIMESTAMP,BIGINT
SQLTypeMap=DEG_AUTH_COUNT,BIGINT


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/SessionStores/DEG_COMPANION_TOKENS_SessionStore/2.MatchByPrimaryIMSI]

Condition=where  DEG_IMSI=%DEG_IMSI


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/SessionStores/DEG_IMS_DATA_SessionStore]

Attributes=DEG_IMSI,key
Attributes=DEG_DEVICE_ID
Attributes=DEG_UNIQUE_ID
Attributes=DEG_IMS_PRIVATE_ID
Attributes=DEG_IMS_PUBLIC_ID
Attributes=DEG_SIP_USERNAME
Attributes=DEG_SIP_PASSWORD
Attributes=DEG_PROVTIME
Attributes=DEG_LASTUPDATE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_IMS_DATA
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${PROV_MAX_DBCONN_DEG_SUBS}
NativeConditions=1.MatchByPrimaryIMSI
SQLTypeMap=DEG_IMSI,VARCHAR(64)
SQLTypeMap=DEG_DEVICE_ID,VARCHAR(64)
SQLTypeMap=DEG_UNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_IMS_PRIVATE_ID,VARCHAR(64)
SQLTypeMap=DEG_IMS_PUBLIC_ID,VARCHAR(64)
SQLTypeMap=DEG_SIP_USERNAME,VARCHAR(64)
SQLTypeMap=DEG_SIP_PASSWORD,VARCHAR(64)
SQLTypeMap=DEG_PROVTIME,TIMESTAMP
SQLTypeMap=DEG_LASTUPDATE,DATE


[/templates/DEG/ProvisioningInterface/ManageIMSCredentials/SessionStores/DEG_IMS_DATA_SessionStore/1.MatchByPrimaryIMSI]

Condition=where DEG_IMSI = %DEG_IMSI
