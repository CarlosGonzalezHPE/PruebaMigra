[/templates/DEG/JobsInterface/Jobs_Common_Core]

[/templates/DEG/JobsInterface/Jobs_Common_Core/Connectors]

ClassName=com.hp.siu.serverutils.ConnectorManager
ConnectorNames=001.RefreshCacheConnector
##ConnectorNames=003.RefDataDbConnectorNRB


[/templates/DEG/JobsInterface/Jobs_Common_Core/Connectors/001.RefreshCacheConnector]

ClassName=com.hp.siu.plugins.dna.collector.rules.SocketConnector
ListenPort=${JOBSINTERFACE_LISTEN_PORT}



[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService]

ClassName=com.hp.siu.serverutils.RefDataServiceManager
QueryNames=DEG_MONITORING_SESSIONS_ToDeactivate
QueryNames=DEG_MONITORING_SESSIONS_ToDelete
QueryNames=DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete
QueryNames=LookUpExpiredSessions

[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
##JDBCDataSourceConnectorName=003.RefDataDbConnectorNRB
CommonPolicyID=Policy2
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_SESSIONS WHERE DEG_MSESSIONSTATUS='AE' AND DEG_EVENTTIMESTAMP<%DEG_JobsCurrSysTimeLong AND DEG_MSESSIONPROCID=%DEG_MSESSIONPROCID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule/100.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0201"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_MSESSIONID ""
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set DEG_MSESSIONPROCID ${HOST_NAME}
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitUpdate
RuleNames=110.Update
RuleNames=200.CheckUpdateStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/100.InitUpdate]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set DEG_MSESSIONSTATUS "DE"
AdornOps=setsystime DEG_EVENTTIMESTAMP
AdornOps=set log_DB_Operation "UPDATE"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/110.Update]

ClassName=com.hp.siu.sessionserver.rules.UpdateSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
MapAttributes=DEG_MSESSIONID,DEG_MSESSIONID
MapAttributes=DEG_MSESSIONSTATUS,DEG_MSESSIONSTATUS
MapAttributes=DEG_EVENTTIMESTAMP,DEG_EVENTTIMESTAMP
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_SESSIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/200.CheckUpdateStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRueChain=100.ErrorLog


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDeactivate/ResultRowRule/200.CheckUpdateStatus/100.ErrorLog]

Attributes=DEG_MSESSIONID
ClassName=com.hp.siu.collector.rules.LogNMERule
ClassName=LogNMERule
Message=Unable to deactivate monitoring session: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
##JDBCDataSourceConnectorName=003.RefDataDbConnectorNRB
CommonPolicyID=Policy2
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_SESSIONS WHERE DEG_MSESSIONSTATUS!='AE' AND DEG_EVENTTIMESTAMP<%DEG_JobsCurrSysTimeLong AND DEG_MSESSIONPROCID=%DEG_MSESSIONPROCID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule/100.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0202"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_MSESSIONID ""
AdornOps=set DEG_MSESSIONPROCID ${HOST_NAME}
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.DeleteMonitoringTransactions
RuleNames=200.InitDelete_MonitoringSessions
RuleNames=210.Delete_MonitoringSession
RuleNames=300.CheckDeleteStatus_MonitoringSession


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/100.DeleteMonitoringTransactions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/200.InitDelete_MonitoringSessions]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set log_DB_Operation "DELETE"
AdornOps=set log_Table_Name "DEG_MONITORING_SESSIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/210.Delete_MonitoringSession]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_SESSIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=200.ErrorLogs


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule/100.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0203"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete monitoring session"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_SESSIONS_ToDelete/ResultRowRule/300.CheckDeleteStatus_MonitoringSession/TrueRule/200.ErrorLogs]


Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
Attributes=DEG_MSESSIONID
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=Unable to delete monitoring session: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_MSESSIONID,DEG_MSESSIONID
FieldExtracted=DEG_MSESSIONTRANSID,DEG_MSESSIONTRANSID
FieldExtracted=DEG_MSESSIONPROCID,DEG_MSESSIONPROCID
FieldExtracted=DEG_MSESSIONTIMESTAMP,DEG_MSESSIONTIMESTAMP
FieldExtracted=DEG_MSESSIONINTERFACE,DEG_MSESSIONINTERFACE
FieldExtracted=DEG_MSESSIONINOUT,DEG_MSESSIONINOUT
FieldExtracted=DEG_MSESSIONRESULTCODE,DEG_MSESSIONRESULTCODE
FieldExtracted=DEG_MSESSIONMDN,DEG_MSESSIONMDN
FieldExtracted=DEG_MSESSIONIMSI,DEG_MSESSIONIMSI
FieldExtracted=DEG_MSESSIONUNIQUE_ID,DEG_MSESSIONUNIQUE_ID
FieldExtracted=DEG_MSESSIONTRANSACTIONTYPE,DEG_MSESSIONTRANSACTIONTYPE
FieldExtracted=DEG_MSESSIONSOURCEDESTINATION,DEG_MSESSIONSOURCEDESTINATION
FieldExtracted=DEG_MSESSIONMESSAGE,DEG_MSESSIONMESSAGE
##JDBCDataSourceConnectorName=003.RefDataDbConnectorNRB
CommonPolicyID=Policy2
QueryString=SELECT %FIELDS  FROM DEG_MONITORING_TRANSACTIONS WHERE DEG_MSESSIONID=%DEG_MSESSIONID
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=100.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule/100.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0204"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ErrorRule/100.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/FinalRule]

AdornOps=copy DEG_JobsSigMatchFoundInteger DEG_JobsSigMatchFoundInteger
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/InitialRule]

AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsOutputIndexInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_MONITORING_TRANSACTIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.InitDelete
RuleNames=210.Delete
RuleNames=300.CheckDeleteStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/100.Set_MatchFound]

AdornOps=set DEG_JobsSigMatchFoundInteger 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/200.InitDelete]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 0
AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 1
AdornOps=set log_DB_Operation "DELETE"
AdornOps=set log_Table_Name "DEG_MONITORING_TRANSACTIONS"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/210.Delete]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
ContinueAfterErrorFixed=true
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain
SessionStore=DEG_MONITORING_TRANSACTIONS_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRueChain=100.SetLogInfo
TrueRuleChain=100.ErrorLog


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus/100.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0205"
AdornOps=set DEG_OEMDevErrorMessageString "Unable to delete monitoring transaction"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/DEG_MONITORING_TRANSACTIONS_BySessionId_ToDelete/ResultRowRule/300.CheckDeleteStatus/100.ErrorLog]

Attributes=DEG_MSESSIONID
Attributes=DEG_MSESSIONTRANSID
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=ERROR
Message=Unable to delete monitoring transaction: 



[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions]

ClassName=com.hp.usage.refdatasrv.JDBCQuery
FieldExtracted=DEG_SSL_ID,DEG_SSL_ID
FieldExtracted=DEG_SSL_NAI,DEG_SSL_NAI
FieldExtracted=DEG_SSL_IMSI,DEG_SSL_IMSI
FieldExtracted=DEG_SSL_UNIQUE_ID,DEG_SSL_UNIQUE_ID
FieldExtracted=DEG_SSL_STATE,DEG_SSL_STATE
FieldExtracted=DEG_SSL_AAA_STATE,DEG_SSL_AAA_STATE
FieldExtracted=DEG_SSL_AAA_SESSIONID,DEG_SSL_AAA_SESSIONID
FieldExtracted=DEG_STR_FLAG,DEG_STR_FLAG
CommonPolicyID=Policy1
QueryString=SELECT %FIELDS  FROM DEG_SSL_SESSION WHERE DEG_SSL_CREATETIMESTAMP <= %DEG_SSL_CREATETIMESTAMP
ResultAttribute=DEG_JobsSigMatchFoundInteger
ResultIndexAttribute=DEG_JobsSigIndexInteger


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=080.SetLogInfo
RuleNames=100.LogAlarming
RuleNames=200.SetErrorMessage

[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/080.SetLogInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Database Error:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0206"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/100.LogAlarming]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
LogLevel=CRITICAL
Message=Database Error:
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ErrorRule/200.SetErrorMessage]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_JobsDatabaseErrorFlagInteger 1
AdornOps=set DEG_JobsReturnCodeString "-1"
AdornOps=set DEG_JobsErrorMessageString "Unable to access DEG_SSL_SESSION table"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/InitialRule]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_JobsSigMatchFoundInteger 0
AdornOps=set DEG_JobsDatabaseErrorFlagInteger 0
AdornOps=set log_DB_Operation "QUERY"
AdornOps=set log_Table_Name "DEG_SSL_SESSION"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.Set_MatchFound
RuleNames=200.LogExpiredSessions
RuleNames=300.DeleteExpiredSessions
RuleNames=400.CheckDeleteStatus


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/100.Set_MatchFound]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=set DEG_JobsSigMatchFoundInteger 1
AdornOps=set DEG_OEMDevMessageString "JobsInterface - ExpiredSessions:"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0207"


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/200.LogExpiredSessions]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_STR_FLAG
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
Message=JobsInterface - ExpiredSessions:


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/300.DeleteExpiredSessions]

ClassName=com.hp.siu.sessionserver.rules.DeleteSessionRule
SessionStore=DEG_SSL_SESSION_SessionStore
DefaultErrorRuleChain=000.SessionStoreDefaultErrorRuleChain
NativeCondition=MatchingSession
ContinueAfterErrorFixed=true
LogInvalidSession=false
NotExistsErrorRuleChain=001.SessionStoreKeyNotExistsRuleChain


[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=DEG_JobsSessionStoreErrorFlagInteger,!=,0
TrueRuleChain=010.SetLogInfo
TrueRuleChain=100.ErrorLog

[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus/010.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "Session does not exists in DEG_SSL_SESSION Table"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0208"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/JobsInterface/Jobs_Common_Core/ReferenceDataService/LookUpExpiredSessions/ResultRowRule/400.CheckDeleteStatus/100.ErrorLog]

ClassName=com.hp.siu.collector.rules.LogNMERule
Attributes=DEG_SSL_ID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_CDevProcessingMessageIdString
Attributes=DEG_OEMDevMessageString
LogLevel=INFO
Message=Session does not exists in DEG_SSL_SESSION Table:


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains]

ClassName=com.hp.siu.collector.rules.RuleChainManager
MaxPoolSize=${JOBS_RULECHAIN_MAX_POOL_SIZE}
MinPoolSize=${JOBS_RULECHAIN_MIN_POOL_SIZE}
RuleChainNames=000.SessionStoreDefaultErrorRuleChain
RuleChainNames=001.SessionStoreKeyNotExistsRuleChain
RuleChainNames=200.DeleteExpiredSSLSessionsRuleChain
RuleChainNames=210.DeactivateMonitoringSessionRuleChain
RuleChainNames=220.DeleteMonitoringSessionRuleChain




[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.SetLogInfo
RuleNames=200.LogAlarming


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/100.SetLogInfo]

AdornOps=set DEG_JobsSessionStoreErrorFlagInteger 1
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0209"
AdornOps=set DEG_OEMDevErrorMessageString "Database Error"
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/000.SessionStoreDefaultErrorRuleChain/200.LogAlarming]

Attributes=log_DB_Operation
Attributes=log_Table_Name
Attributes=DEG_CDevProcessingErrorIdString
Attributes=DEG_OEMDevErrorMessageString
ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=CRITICAL
Message=Database Error:


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain]

ClassName=RuleChain
RuleNames=100.ClearDuplicateKeyFlag


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/001.SessionStoreKeyNotExistsRuleChain/100.ClearDuplicateKeyFlag]

AdornOps=set DEG_JobsSessionStoreKeyExistsFlagInteger 0
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=050.SetLogInfo
RuleNames=100.LogStart
RuleNames=200.CalculateTimestampOfSessionsToDeactivate
RuleNames=210.DeactivateMonitoringSessions
RuleNames=220.SetLogInfo
RuleNames=300.LogEnd


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/050.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0210"
AdornOps=set DEG_OEMDevMessageString "Starting monitoring session deactivation job"


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting monitoring session deactivation job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/200.CalculateTimestampOfSessionsToDeactivate]

AdornOps=setsystime DEG_JobsCurrSysTimeLong
AdornOps=- DEG_JobsCurrSysTimeLong 900000 DEG_JobsCurrSysTimeLong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/210.DeactivateMonitoringSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ToDeactivate


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/220.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0211"
AdornOps=set DEG_OEMDevMessageString "Stopping current monitoring session deactivation job"


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/210.DeactivateMonitoringSessionRuleChain/300.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping current monitoring session deactivation job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=050.SetLogInfo
RuleNames=100.LogStart
RuleNames=200.CalculateTimestampOfSessionsToDeactivate
RuleNames=210.DeleteMonitoringSessions
RuleNames=220.SetLogInfo
RuleNames=300.LogEnd


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/050.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0212"
AdornOps=set DEG_OEMDevMessageString "Starting monitoring session removal job"


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting monitoring session removal job: 


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/200.CalculateTimestampOfSessionsToDeactivate]

AdornOps=setsystime DEG_JobsCurrSysTimeLong
AdornOps=- DEG_JobsCurrSysTimeLong 900000 DEG_JobsCurrSysTimeLong
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/210.DeleteMonitoringSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=DEG_MONITORING_SESSIONS_ToDelete


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/220.SetLogInfo]

ClassName=AdornmentRule
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0213"
AdornOps=set DEG_OEMDevErrorMessageString "Starting current monitoring session removal job"


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/220.DeleteMonitoringSessionRuleChain/300.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping current monitoring session removal job: 

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=010.SetErrorInfo
RuleNames=100.LogStart
RuleNames=200.InitExpiredTimestamp
RuleNames=300.DeleteExpiredSessions
RuleNames=300.SetLogInfo
RuleNames=400.LogEnd

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/010.SetErrorInfo]

AdornOps=set DEG_OEMDevErrorMessageString "Starting SSL session deletion job:"
AdornOps=set DEG_CDevProcessingErrorIdString "DEG.JOB.0214"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/100.LogStart]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Starting Expired SSL session deletion job: 

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/200.InitExpiredTimestamp]

AdornOps=setsystime DEG_SSL_CREATETIMESTAMP
AdornOps=- DEG_SSL_CREATETIMESTAMP 86400000 DEG_SSL_CREATETIMESTAMP
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/300.DeleteExpiredSessions]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=LookUpExpiredSessions

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/400.LogEnd]

ClassName=com.hp.siu.collector.rules.LogNMERule
LogLevel=INFO
Message=Stopping Expired SSL session deletion job:

[/templates/DEG/JobsInterface/Jobs_Common_Core/RuleChains/200.DeleteExpiredSSLSessionsRuleChain/300.SetLogInfo]

AdornOps=set DEG_OEMDevMessageString "Stopping current SSL session deletion job"
AdornOps=set DEG_CDevProcessingMessageIdString "DEG.JOB.0215"
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores]

ClassName=com.hp.siu.sessionserver.SessionStoreManager
SessionStoreNames=DEG_MONITORING_SESSIONS_SessionStore
SessionStoreNames=DEG_MONITORING_TRANSACTIONS_SessionStore
SessionStoreNames=DEG_SSL_SESSION_SessionStore


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_MONITORING_SESSIONS_SessionStore]

Attributes=DEG_MSESSIONID,key
Attributes=DEG_MSESSIONTYPE
Attributes=DEG_MSESSIONKEY
Attributes=DEG_MSESSIONSTATUS
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_EVENTTIMESTAMP
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
DatabaseId=DEG_MONITORING_SESSIONS
DbSchema=${DBSCHEMA_NRB}
MaxDatabaseConnections=50
CommonPolicyID=Policy2
SQLTypeMap=DEG_MSESSIONID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTYPE,CHAR(4)
SQLTypeMap=DEG_MSESSIONKEY,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONSTATUS,CHAR(2)
SQLTypeMap=DEG_MSESSIONPROCID,VARCHAR(32)
SQLTypeMap=DEG_EVENTTIMESTAMP,BIGINT



[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_MONITORING_TRANSACTIONS_SessionStore]

Attributes=DEG_MSESSIONID,key
Attributes=DEG_MSESSIONTRANSID,key
Attributes=DEG_MSESSIONPROCID
Attributes=DEG_MSESSIONTIMESTAMP
Attributes=DEG_MSESSIONINTERFACE
Attributes=DEG_MSESSIONINOUT
Attributes=DEG_MSESSIONRESULTCODE
Attributes=DEG_MSESSIONMDN
Attributes=DEG_MSESSIONIMSI
Attributes=DEG_MSESSIONUNIQUE_ID
Attributes=DEG_MSESSIONTRANSACTIONTYPE
Attributes=DEG_MSESSIONSOURCEDESTINATION
Attributes=DEG_MSESSIONMESSAGE
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
DatabaseId=DEG_MONITORING_TRANSACTIONS
DbSchema=${DBSCHEMA_NRB}
MaxDatabaseConnections=50
CommonPolicyID=Policy2
SQLTypeMap=DEG_MSESSIONID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTRANSID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONPROCID,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONTIMESTAMP,BIGINT
SQLTypeMap=DEG_MSESSIONINTERFACE,VARCHAR(10)
SQLTypeMap=DEG_MSESSIONINOUT,VARCHAR(3)
SQLTypeMap=DEG_MSESSIONRESULTCODE,VARCHAR(15)
SQLTypeMap=DEG_MSESSIONMDN,BIGINT
SQLTypeMap=DEG_MSESSIONIMSI,VARCHAR(64)
SQLTypeMap=DEG_MSESSIONUNIQUE_ID,VARCHAR(64)
SQLTypeMap=DEG_MSESSIONTRANSACTIONTYPE,VARCHAR(50)
SQLTypeMap=DEG_MSESSIONSOURCEDESTINATION,VARCHAR(32)
SQLTypeMap=DEG_MSESSIONMESSAGE,VARCHAR(512)


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_SSL_SESSION_SessionStore]

Attributes=DEG_SSL_ID,key
Attributes=DEG_SSL_STATE
Attributes=DEG_SSL_AAA_STATE
Attributes=DEG_SSL_AAA_SESSIONID
Attributes=DEG_SSL_NAI
Attributes=DEG_SSL_IMSI
Attributes=DEG_SSL_MDN
Attributes=DEG_SSL_UNIQUE_ID
Attributes=DEG_SSL_CREATETIMESTAMP
Attributes=DEG_STR_FLAG
ClassName=com.hp.siu.sessionserver.JDBCSessionStore
CommonPolicyID=Policy1
DatabaseId=DEG_SSL_SESSION
DbSchema=${DBSCHEMA_DEG}
MaxDatabaseConnections=${DEVICE_MAX_DBCONN_SSL_SESSION}
NativeConditions=MatchingSession
SQLTypeMap=DEG_SSL_ID,VARCHAR(256)
SQLTypeMap=DEG_SSL_STATE,VARCHAR(256)
SQLTypeMap=DEG_SSL_AAA_SESSIONID,VARCHAR(100)
SQLTypeMap=DEG_SSL_AAA_STATE,VARBINARY(8)
SQLTypeMap=DEG_SSL_NAI,VARCHAR(256)
SQLTypeMap=DEG_SSL_IMSI,VARCHAR(256)
SQLTypeMap=DEG_SSL_MDN,VARCHAR(256)
SQLTypeMap=DEG_SSL_UNIQUE_ID,VARCHAR(256)

SQLTypeMap=DEG_SSL_CREATETIMESTAMP,BIGINT
SQLTypeMap=DEG_STR_FLAG,TINYINT


[/templates/DEG/JobsInterface/Jobs_Common_Core/SessionStores/DEG_SSL_SESSION_SessionStore/MatchingSession]

Condition=where DEG_SSL_ID = %DEG_SSL_ID
