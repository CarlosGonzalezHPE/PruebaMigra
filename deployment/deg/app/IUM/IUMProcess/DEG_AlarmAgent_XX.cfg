[/deployment/SIU_DEG01/DEG_AlarmAgent_01]

AdminInterface=
ClassName=com.hp.siu.adminagent.procmgr.CollectorProcess
QueryInterface=
JDBCConnectionPoolService=PoolService

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator]

ClassName=Aggregator
SchemeNames=S1
SchemeNames=S2


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1]

ClassName=DataTableAggregationScheme
KeepActive=true
RuleNames=100.Filter
RuleNames=101.SetEmptyMessage
RuleNames=105.Log
RuleNames=110.Initialize
RuleNames=120.QueryDB
RuleNames=130.CheckPattern
RuleNames=200.SessionHandling
RuleNames=210.Aggregate


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/100.Filter]

ClassName=FilterRule
Conditions=log_EventLevelSeverity,=,Informational
Conditions=log_EventLevelSeverity,=,WARNING
Conditions=log_EventId,contains,SearchRequestHandler
Conditions=log_EventId,contains,BindOperationHandler
OnMatch=drop
Operations=or,or,or


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/101.SetEmptyMessage]

ClassName=ConditionalRule
Conditions=log_EventMessage,=,""
TrueRuleChain=100.SetEventMessage

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/101.SetEmptyMessage/100.SetEventMessage]

ClassName=AdornmentRule
AdornOps=set log_EventMessage "Encountered run-time exception"


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/105.Log]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
ClassName=LogNMERule
LogLevel=INFO
Message=Incoming Record:


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/110.Initialize]

AdornOps=setifnull log_EventId ""
AdornOps=setifnull log_EventLevelSeverity ""
AdornOps=setifnull log_EventMessage ""
AdornOps=set log_SequenceNumber 0
AdornOps=set log_seqconstant 1
AdornOps=set log_EventNumber 1
AdornOps=set log_HostName ${HOST_NAME}
AdornOps=copy log_HostName log_HostNameHeartBeat
AdornOps=set log_EventSuggestedAction "No specific action is necessary. Follow the information provided in the log message and take corrective measures as indicated. Contact support team if required."
AdornOps=set log_EventId DEGAlarm0.1
AdornOps=set log_EventPattern UNKNOWN
AdornOps=setsystime log_SystemTime
AdornOps=set log_StartTimeDiff 0
AdornOps=set log_StartTimeDiffAF 0
AdornOps=setifnull log_StartTimeAF 0
#AdornOps=set AlarmFrequency 1200
AdornOps=set log_EventClearAlarm ${ALARM_AGENT_STALETIME}
AdornOps=set DEG_AlarmSNMPVersionInteger ${SNMP_VERSION}
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/120.QueryDB]

ClassName=com.hp.usage.refdatasrv.RefDataLookupRule
QueryName=ALARM_TBL_Query

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/120.QueryDB/ErrorRule]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_EventSuggestedAction
Attributes=log_SequenceNumber
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: SELECT on DEG_ALARM_DEF table
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/120.QueryDB/NoMatchRule]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_EventSuggestedAction
Attributes=log_SequenceNumber
ClassName=LogNMERule
LogLevel=INFO
Message=No Match found:
NullAlso=true


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern]

ClassName=ConditionalRule
Conditions=log_EventPattern,=,UNKNOWN
Description=The Alarm is unknown from DEG_ALARM_DEF, set severity based on IUM severity and get part of message as the pattern.
TrueRuleChain=100.SetEventPattern
TrueRuleChain=110.SetSeverity


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/FalseRule]

ClassName=ConditionalRule
Conditions=log_EventPattern,contains,CMDR_CRASH


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/FalseRule/TrueRule]

AdornOps=copy log_EventMessage log_EventPattern
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/100.SetEventPattern]

AdornOps=substr 0 10 log_EventMessage log_EventPattern
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/110.SetSeverity]

ClassName=SwitchConditionRule
Conditions=log_EventLevelSeverity,=,CRITICAL
Conditions=log_EventLevelSeverity,=,ERROR
Conditions=log_EventLevelSeverity,=,ACCOUNTING
Critical=100.SetCriticalSeverity
Major=200.SetMajorSeverity
Minor=300.SetMinorSeverity
TrueRuleChain=Critical
TrueRuleChain=Major
TrueRuleChain=Minor


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/110.SetSeverity/100.SetCriticalSeverity]

AdornOps=set log_EventLevelSeverity Critical
AdornOps=set AlarmFrequency ${ALARM_FREQUENCY_CRITICAL}
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/110.SetSeverity/200.SetMajorSeverity]

AdornOps=set log_EventLevelSeverity Major
AdornOps=set AlarmFrequency ${ALARM_FREQUENCY_MAJOR}
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/130.CheckPattern/110.SetSeverity/300.SetMinorSeverity]

AdornOps=set log_EventLevelSeverity Minor
AdornOps=set AlarmFrequency ${ALARM_FREQUENCY_MINOR}
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/200.SessionHandling]

ClassName=com.hp.usage.tablehash.rules.DataTableSessionMatchRule
MatchKeyNames=log_EventId
MatchKeyNames=log_EventLevelSeverity
MatchKeyNames=log_EventPattern
MatchKeyNames=log_IUMProcessName


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/200.SessionHandling/SessionState]

ClassName=com.hp.siu.collector.aggregator.NewSessionState


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate]

Attributes=log_SystemTime
Attributes=log_EventMessage
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventLevelSeverity
Attributes=log_EventPattern
Attributes=log_HostName
Attributes=log_EventSuggestedAction
Attributes=EndTime
Attributes=log_SequenceNumber
Attributes=log_StartTimeDiffAF
Attributes=log_StartTimeAF
Attributes=DEG_AlarmSNMPVersionInteger
Attributes=log_EventClearAlarm
ClassName=com.hp.siu.collector.rules.SessionAggregationRule
EventAttributeName=log_EventNumber
PostProcessRules=SequenceNME
PostProcessRules=SetStartTimeAF
PostProcessRules=SetStartTime
PostProcessRules=updateTree
PostProcessRules=updateClearAlarmFrequency


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateClearAlarmFrequency]

#AdornOps=copy tree.log_EventClearAlarm log_EventClearAlarm
AdornOps=copy log_EventClearAlarm tree.log_EventClearAlarm
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/SequenceNME]

AdornOps=+ tree.log_SequenceNumber log_seqconstant tree.log_SequenceNumber
AdornOps=copy tree.log_SequenceNumber log_SequenceNumber
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/SetStartTimeAF]

ClassName=ConditionalRule
Conditions=log_SequenceNumber,=,1
TrueRuleChain=100.SetStartTimeAF


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/SetStartTimeAF/100.SetStartTimeAF]

AdornOps=copy EndTime tree.log_StartTimeAF
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/SetStartTime]

AdornOps=copy tree.EndTime log_StartTime
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree]

ClassName=ConditionalRule
Conditions=tree.log_EventPattern,=,log_EventPattern
TrueRuleChain=100.checkStartTimeNull
TrueRuleChain=200.updateEndTime
TrueRuleChain=300.CheckAFStartTime
NullAlso=true


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/100.checkStartTimeNull]

ClassName=ConditionalRule
Conditions=log_StartTime,=,0
TrueRuleChain=110.copytreeEndTime


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/100.checkStartTimeNull/110.copytreeEndTime]

AdornOps=copy tree.EndTime log_StartTime
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/200.updateEndTime]

AdornOps=copy EndTime tree.EndTime
AdornOps=copy EndTime log_EndTimeLong
AdornOps=- log_EndTimeLong log_StartTime log_StartTimeDiff
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/300.CheckAFStartTime]

ClassName=ConditionalRule
Conditions=tree.log_StartTimeAF,!=,0
TrueRuleChain=100.CalculateAFWindow
TrueRuleChain=200.CheckForAF


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/300.CheckAFStartTime/100.CalculateAFWindow]

AdornOps=copy tree.log_StartTimeAF log_StartTimeAF
AdornOps=- EndTime log_StartTimeAF log_StartTimeDiffAF
AdornOps=copy log_StartTimeDiffAF tree.log_StartTimeDiffAF
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/300.CheckAFStartTime/200.CheckForAF]

ClassName=ConditionalRule
Conditions=log_StartTimeDiffAF,>,AlarmFrequency
TrueRuleChain=SetStartTime

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/210.Aggregate/updateTree/300.CheckAFStartTime/200.CheckForAF/SetStartTime]

ClassName=com.hp.siu.collector.rules.AdornmentRule
AdornOps=copy EndTime tree.log_StartTimeAF


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor]

ClassName=com.hp.siu.collector.aggregator.FlushProcessor
FlushTesters=StaleTester
RuleNames=100.LogMsg
RuleNames=115.SetValues
RuleNames=120.CheckSNMPVersion

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/StaleTester]

ClassName=com.hp.siu.collector.aggregator.StaleFlushTester
StaleTimeout=${ALARM_AGENT_STALETIME}
StaleTimeoutAttribute=log_EventClearAlarm


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/100.LogMsg]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_SequenceNumber
Attributes=log_StartTime
Attributes=log_EndTimeLong
Attributes=log_StartTimeDiff
Attributes=DEG_AlarmSNMPVersionInteger
ClassName=LogNMERule
LogLevel=INFO
Message=This is CLEARTRAP:Before sending SNMPTrap:
NullAlso=true


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/115.SetValues]

AdornOps=set log_EventSuggestedAction "This is CLEARTRAP,No Action Required,last Occurance at "
AdornOps=copy EndTime log_EndTimeString
AdornOps=+ log_EventSuggestedAction log_EndTimeString log_EventSuggestedAction
AdornOps=setsystime log_SystemTime
ClassName=com.hp.siu.collector.rules.AdornmentRule

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_AlarmSNMPVersionInteger,=,1
Conditions=DEG_AlarmSNMPVersionInteger,=,2
Conditions=DEG_AlarmSNMPVersionInteger,=,3
Operations=None
TrueRuleChain=SNMPVersion1
TrueRuleChain=SNMPVersion2
TrueRuleChain=SNMPVersion3
SNMPVersion1=120.SendSNMPTrapVersion1
SNMPVersion1=LogNMERuleVersion1
SNMPVersion2=120.SendSNMPTrapVersion2
SNMPVersion2=LogNMERuleVersion2
SNMPVersion3=120.SendSNMPTrapVersion3
SNMPVersion3=LogNMERuleVersion3

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/LogNMERuleVersion1]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending Clear Alarm Traps for SNMP Version 1:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/120.SendSNMPTrapVersion1]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=log_SystemTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
EnterpriseOID=1.3.6.1.4.1.11.14.4
GenericTrapType=6
SpecificTrapType=1002
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/LogNMERuleVersion2]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending Clear Alarm Traps for SNMP Version 2:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/120.SendSNMPTrapVersion2]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=log_SystemTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
TrapOID=1.3.6.1.4.1.11.14.4.1002
SnmpVersion=2
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/LogNMERuleVersion3]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending Clear Alarm Traps for SNMP Version 3:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S1/FlushProcessor/120.CheckSNMPVersion/120.SendSNMPTrapVersion3]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=log_SystemTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
TrapOID=1.3.6.1.4.1.11.14.4.1002
SnmpVersion=3
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2]

ClassName=DataTableAggregationScheme
RuleNames=100.Filter
RuleNames=110.FirstAlarm
RuleNames=200.Store

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/100.Filter]

ClassName=FilterRule
Conditions=log_EventLevelSeverity,=,Informational
Conditions=log_EventLevelSeverity,=,WARNING
Conditions=log_EventId,contains,SearchRequestHandler
Conditions=log_EventId,contains,BindOperationHandler
OnMatch=drop
Operations=or,or,or


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm]

ClassName=ConditionalRule
Conditions=log_SequenceNumber,=,1
Conditions=log_StartTimeDiffAF,>,AlarmFrequency
Operations=or
TrueRuleChain=100.LogMsg
TrueRuleChain=120.CheckSNMPVersion

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/100.LogMsg]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_EventSuggestedAction
Attributes=log_SequenceNumber
Attributes=log_StartTime
Attributes=log_StartTimeDiff
Attributes=AlarmFrequency
Attributes=log_StartTimeDiffAF
Attributes=log_StartTimeAF
Attributes=log_HostNameHeartBeat
ClassName=LogNMERule
LogLevel=INFO
Message=FirstAlarm:Before sending SNMPTrap:


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion]


ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_AlarmSNMPVersionInteger,=,1
Conditions=DEG_AlarmSNMPVersionInteger,=,2
Conditions=DEG_AlarmSNMPVersionInteger,=,3
Operations=None
TrueRuleChain=SNMPVersion1
TrueRuleChain=SNMPVersion2
TrueRuleChain=SNMPVersion3
SNMPVersion1=120.SendSNMPTrapVersion1
SNMPVersion1=LogNMERuleVersion1
SNMPVersion2=120.SendSNMPTrapVersion2
SNMPVersion2=LogNMERuleVersion2
SNMPVersion3=120.SendSNMPTrapVersion3
SNMPVersion3=LogNMERuleVersion3


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/LogNMERuleVersion1]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending First Alarm Traps for SNMP Version 1:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/120.SendSNMPTrapVersion1]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=EndTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
EnterpriseOID=1.3.6.1.4.1.11.14.4
GenericTrapType=6
SpecificTrapType=1001
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/LogNMERuleVersion2]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending First Alarm Traps for SNMP Version 2:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/120.SendSNMPTrapVersion2]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=EndTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
TrapOID=1.3.6.1.4.1.11.14.4.1001
SnmpVersion=2
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/LogNMERuleVersion3]

ClassName=LogNMERule
LogLevel=INFO
Message=Sending First Alarm Traps for SNMP Version 3:
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
Attributes=DEG_AlarmSNMPVersionInteger

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/110.FirstAlarm/120.CheckSNMPVersion/120.SendSNMPTrapVersion3]

AgentAddress=${ALARM_AGENT_ADDRESS_PORT}
AgentTimeOID=1.3.6.1.4.1.11.14.4.1
AttributeOID=EndTime,1.3.6.1.4.1.11.14.4.2
AttributeOID=log_EventLevelSeverity,1.3.6.1.4.1.11.14.4.3
AttributeOID=log_HostName,1.3.6.1.4.1.11.14.4.4
AttributeOID=log_IUMProcessName,1.3.6.1.4.1.11.14.4.5
AttributeOID=log_EventId,1.3.6.1.4.1.11.14.4.6
AttributeOID=log_EventMessage,1.3.6.1.4.1.11.14.4.7
AttributeOID=log_EventSuggestedAction,1.3.6.1.4.1.11.14.4.8
BufferSize=65536
ClassName=com.hp.usage.snmp.NMETrapRule
DateTimeFormat=yyyy.MM.dd 'at' HH:mm:ss z
TrapOID=1.3.6.1.4.1.11.14.4.1001
SnmpVersion=3
TrapDestinations=${TRAP_DESTINATION1}
TrapDestinations=${TRAP_DESTINATION2}



[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Aggregator/S2/200.Store]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_EventSuggestedAction
Attributes=DEG_AlarmSNMPVersionInteger
ClassName=StoreRule
Description=Stores sent SNMP traps


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Connectors]

ClassName=ConnectorManager
##ConnectorNames=100.RefDataDbConnector
ConnectorNames=200.SocketConn




[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Connectors/200.SocketConn]

ClassName=com.hp.siu.plugins.dna.collector.rules.SocketConnector
ListenPort=${DEG_ALARMAGENT_LISTEN_PORT}

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore]

ClassName=MuxDatastore
Database=${ALARM_STRING_CONNECTION}
DatabaseClass=${ALARM_JDBC_DRIVER}
Description=Multi Datastore
FilterMap=S2,T,filterAlarms
Password=${PASSWD_MGR_DSN}
SchemeMap=S1,C
SchemeMap=S2,T
SchemeMap=S2,A
TableAgeLimit=${ALARM_AGENT_CLEANUP_TIME}
TableAgingPolicy=NME_Flushtime
TableRollLimit=1d0h0m0s
User=${USER_MGR_DSN}


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore/A]

ClassName=com.hp.siu.collector.datastore.IDRJDBCDatastore
DisplayHeader=false
FileNameTemplate='READY/AllAlarms/alarm_DEG.txt'
IDRType=Delimiter
TableAgeLimit=${ALARM_AGENT_CLEANUP_TIME}
TableAgingPolicy=NME_Flushtime
TableRollLimit=1d0h0m0s


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore/C]

ClassName=IDRJDBCDatastore
Description=Stores event records in binary format to a file
DisplayHeader=false
FileNameTemplate='READY/ClearAlarms/alarm_DEG.txt'
IDRType=Delimiter
TableAgeLimit=${ALARM_AGENT_CLEANUP_TIME}
TableAgingPolicy=NME_Flushtime
TableRollLimit=1d0h0m0s


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore/C/Body]

Attributes=log_SystemTime
Attributes=log_EventMessage
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_EventSuggestedAction


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore/filterAlarms]

ClassName=FilterRule
Conditions=log_SequenceNumber,=,1
Conditions=log_StartTimeDiffAF,>,AlarmFrequency
OnMatch=keep
Operations=or


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Datastore/T]

ClassName=IDRJDBCDatastore
Description=Stores event records in binary format to a file
DisplayHeader=false
FileNameTemplate='READY/Traps/traps_DEG.txt'
IDRType=Delimiter
TableAgeLimit=${ALARM_AGENT_CLEANUP_TIME}
TableAgingPolicy=NME_Flushtime
TableRollLimit=1d0h0m0s


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Encapsulator]

ClassName=PollingRecordEncapsulator
RetryCountOnNoData=1
@Include(pattern="**")
@Include(pattern="#EncapsulatorName", merge=true)
Link=/templates/DEG/DEG_AlarmAgent/Encapsulator_Pools
Link=/templates/DEG/DEG_AlarmAgent/CUSTRC_Alarm_Customize_Encapsulator_Pools
Link=/templates/DEG/DEG_AlarmAgent/Apple_Encapsulator_Pools
Link=/templates/DEG/DEG_AlarmAgent/Android_Encapsulator_Pools

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Encapsulator/FlushPolicy]

ClassName=com.hp.siu.collector.encapsulator.PollingRecordTimeFlushPolicy
ClockInterval=${DEG_ALARM_FLUSH_TIME}
InactivityFlushTimeout=120


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/License]

#RFE 86 : Include Bell Changes into Product. Introduced new Environment variable to define timezone.
[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Properties]

JVMOPTS=${ALARMAGENT_MIN_HEAP_SIZE}
JVMOPTS=${ALARMAGENT_MAX_HEAP_SIZE}
JVMOPTS=%DEFAULTS%
JVMPROPERTIES=%DEFAULTS%
JVMOPTS=-Duser.timezone=${SYSTIMEZONE}
JVMPROPERTIES=LogRequestIssueLevel1=true
PROCESSARGS=-l 4
STARTUPMODE=${STARTUPMODE}

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/Logging]

ClassName=com.hp.siu.serverutils.SvrLogManager
Loggers=org.jsmpp,INFO,false
COMPRESS=true
FILECOUNT=50
LOGLINELIMIT=500000

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService]

ClassName=RefDataServiceManager
QueryNames=ALARM_TBL_Query


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query]

ClassName=com.hp.usage.refdatasrv.CachedQuery
ResultIndexAttribute=log_AlarmIndexInteger


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/Cache]

CacheAttributes=DEG_EVENTSUGGESTEDACTION
CacheAttributes=DEG_EVENTLEVELSEVERITY
CacheAttributes=DEG_EVENTID
CacheAttributes=DEG_PATTERN
CacheAttributes=DEG_EVENTFREQUENCY
CacheAttributes=DEG_CLEAR_FREQUENCY
CacheKeyAttributes=DEG_TEMP
ClassName=com.hp.usage.refdatasrv.HashMapLookupCache
NMEKeyAttributes=log_Temp


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ErrorRule]

ClassName=RuleChain
RuleNames=100.LogAlarming


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ErrorRule/100.LogAlarming]

Attributes=EndTime
Attributes=log_EventLevelSeverity
Attributes=log_HostName
Attributes=log_IUMProcessName
Attributes=log_EventId
Attributes=log_EventMessage
Attributes=log_EventSuggestedAction
Attributes=log_SequenceNumber
ClassName=LogNMERule
LogLevel=ERROR
Message=Database Error: SELECT on DEG_ALARM_DEF table
NullAlso=true
PropertyName=LogRequestIssueLevel1
UseProperty=true
#Action=Bring up TimesTen if it is down.  If it is up and healthy and still this error is encountered, DEG DB objects or data may be corrupt.  Contact HP Support.


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/InitialRule]

ClassName=RuleChain
RuleNames=SetIntialValue


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/InitialRule/SetIntialValue]

AdornOps=set log_AlarmIndexInteger 0
AdornOps=set log_Temp 1
ClassName=com.hp.siu.collector.rules.AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/Loader]

ClassName=com.hp.usage.refdatasrv.JDBCLoader
FieldExtracted=DEG_EVENTSUGGESTEDACTION,DEG_EVENTSUGGESTEDACTION
FieldExtracted=DEG_EVENTLEVELSEVERITY,DEG_EVENTLEVELSEVERITY
FieldExtracted=DEG_EVENTID,DEG_EVENTID
FieldExtracted=DEG_PATTERN,DEG_PATTERN
FieldExtracted=DEG_TEMP,DEG_TEMP
FieldExtracted=DEG_EVENTFREQUENCY,DEG_EVENTFREQUENCY
FieldExtracted=DEG_CLEAR_FREQUENCY,DEG_CLEAR_FREQUENCY
##JDBCDataSourceConnectorName=100.RefDataDbConnector
CommonPolicyID=Policy3
QueryString=select %FIELDS from DEG_ALARM_DEF

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/PoolService]

ClassName=com.hp.usage.jdbc.poolservice.JDBCConnectionPoolService
ConnectionPools=SIU_MANAGER_TT_Pool

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/PoolService/CommonConnectionPolicies]

ClassName=com.hp.usage.jdbc.poolservice.client.ConnectionPolicies
Policies=Policy3

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/PoolService/CommonConnectionPolicies/Policy3]

ClassName=com.hp.usage.jdbc.poolservice.client.SimpleConnectionPolicy
Pools=SIU_MANAGER_TT_Pool

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/PoolService/SIU_MANAGER_TT_Pool]

ClassName=com.hp.usage.jdbc.poolservice.pool.JDBCConnectionPool
ConnectionTestQuery=select 1 from dual
Database=${ALARM_STRING_CONNECTION}
DatabaseClass=${ALARM_JDBC_DRIVER}
Password=${PASSWD_MGR_DSN}
User=${USER_MGR_DSN}
MaxIdleTime=0


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ResultRowRule]

ClassName=RuleChain
RuleNames=100.CopyVal
RuleNames=110.CheckPattern


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ResultRowRule/100.CopyVal]

AdornOps=copy DEG_PATTERN log_Pattern
ClassName=AdornmentRule


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ResultRowRule/110.CheckPattern]

ClassName=com.hp.siu.collector.rules.ConditionalRule
Conditions=log_EventMessage,contains,log_Pattern
Conditions=log_IUMProcessName,starts,log_Pattern
Operations=or

TrueRuleChain=100.SetValues

[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/ResultRowRule/110.CheckPattern/100.SetValues]

ClassName=AdornmentRule
AdornOps=copy DEG_EVENTSUGGESTEDACTION log_EventSuggestedAction
AdornOps=copy DEG_EVENTLEVELSEVERITY log_EventLevelSeverity
AdornOps=copy DEG_PATTERN log_EventPattern
AdornOps=copy DEG_EVENTID log_EventId
AdornOps=copy DEG_EVENTFREQUENCY AlarmFrequency
AdornOps=copy DEG_CLEAR_FREQUENCY log_EventClearAlarm


[/deployment/SIU_DEG01/DEG_AlarmAgent_01/ReferenceDataService/ALARM_TBL_Query/RefreshPolicy]

ClassName=com.hp.siu.plugins.dna.collector.rules.CronIntervalRefreshPolicy
RefreshCronInterval=0 * * * *