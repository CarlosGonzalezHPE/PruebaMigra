

[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize]



[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors]

ConnectorNames=100.GetSubscriberDetailsSOAPClientConnector
ConnectorNames=200.CorbaConnector


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/100.GetSubscriberDetailsSOAPClientConnector]

ClassName=HttpClientConnector
Requests=GetSubscriberDetailsRequest


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/100.GetSubscriberDetailsSOAPClientConnector/EndPoints]

#ClassName=com.hp.usage.connector.DynamicEndPointSelector
#KeyAttributeName=RemoteHostURL

ClassName=com.hp.usage.connector.lookup.RoundRobinEndPointSelector
EndPoints=EndPointREAL
#EndPoints=EndPointSIMULATOR
ReconnectRetryInterval=30
ReconnectRetryLimit=3
FailOnFirstConnectionError=false


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/100.GetSubscriberDetailsSOAPClientConnector/EndPoints/EndPointREAL]

ClassName=HttpEndPoint
CloseConnectionAfterEachRequest=true
KeyStoreFile=${PGWSERVER_KEYSTORE_FILE}
KeyStorePassword=${PGWSERVER_KEYSTORE_PASS}
KeyStoreType=${PGWSERVER_KEYSTORE_TYPE}
NumConnections=${PGWSERVER_NUMCONNECTIONS}

RemoteHostURL=${PGWSERVER_HTTP_REMOTE_HOST_URL}

TrustStoreFile=${PGWSERVER_TRUSTSTORE_FILE}
TrustStorePassword=${PGWSERVER_TRUSTSTORE_PASS}
TrustStoreType=${PGWSERVER_TRUSTSTORE_TYPE}


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/100.GetSubscriberDetailsSOAPClientConnector/EndPoints/EndPointSIMULATOR]

ClassName=HttpEndPoint
CloseConnectionAfterEachRequest=true
NumConnections=${PGWSERVER_NUMCONNECTIONS}
RemoteHostURL=http://10.192.153.194:8194/GetSubscriberDetails.1/servlet/IUMServlet


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/100.GetSubscriberDetailsSOAPClientConnector/GetSubscriberDetailsRequest]

ClassName=SoapHttpRequest
FaultCodeField=DEG_SubscribDetailsFaultcodeString
FaultStringField=DEG_SubscribDetailsFaultString
HeaderTag=Header
NMENamespace=Umbrella
OperationIdField=DEG_SubscribDetailsOperationIDString
Operations=GetSubscriberDetailsRequest
Operations=searchResponse
RequestHeaderMap=SOAPAction,DEG_SubscribDetailsHDRtransactionIdString,searchRequest
WSDLFile=${PGWSERVER_INTERFACE_WSDL_FILE}


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/Connectors/200.CorbaConnector]

ClassName=CorbaConnector


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains]

RuleChainNames=100T.SendSubscriberProfileSoapRequestRuleChain
RuleChainNames=200T.SendNotificationTokensSoapRequestRuleChain


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=100.InitCustom
RuleNames=130.InitSubscriberProfileSoapRequest
RuleNames=140.LogAttributesRequest
RuleNames=150.SendSubscriberRequest_CreateSNMEBody
RuleNames=160.ExecuteSendSubscriberRequest
RuleNames=180.CheckSoapResponse
RuleNames=190.CheckListOfEntitlementsStatus
#RuleNames=190.SetDummyEntitlementsTEMPORAL
RuleNames=195.TRAZAfinal
RuleNames=200.LogAttributesResponse


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/100.InitCustom]

AdornOps=setifnull CUST_GSP_OUT_EntitlementStatus ""
AdornOps=setifnull CUST_GSP_OUT_CUSTACTFEATURELIST ""
AdornOps=set DEG_CDevMobileNumberString 0
AdornOps=set CUST_GSP_OUT_SubscriberExistsFlagInteger 1
AdornOps=set CUST_GSP_OUT_ErrorFlagInteger 0
AdornOps=set DEG_OEMDevtempGatewayAddressString ${GATEWAY_ADDRESS_PRIMARY}
AdornOps=lower DEG_OEMDevtempGatewayAddressString CUST_GSP_OUT_GatewayAddrString
AdornOps=set CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_POSTDATA ""
AdornOps=set CUST_GSP_OUT_VoWiFi_ADDR_UPDATE_URL ""
AdornOps=setifnull CUST_GSP_OUT_VoWiFi_TC_STATUS ${DEG_DEFAULT_TC_STATUS}
AdornOps=setifnull CUST_GSP_OUT_VoWiFi_ADDR_STATUS ${DEG_DEFAULT_ADDRESS_STATUS}
AdornOps=setifnull CUST_GSP_OUT_VoWiFi_PROVISIONING_STATUS ${DEG_DEFAULT_PROVISIONING_STATUS}
AdornOps=set CUST_GSP_OUT_EAPAKAAuthRequiredFlagString "Y"
AdornOps=copy CUST_GSP_IN_IMSIString DEG_IMSI
AdornOps=set CUST_GSP_OUT_COMPANIONDEVICE_COUNT 0
AdornOps=set DEG_GetSubscribDetailsSoapResponseDelimiterString "<service>"
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/130.InitSubscriberProfileSoapRequest]

AdornOps=set DEG_GetSubscribDetailsSoapVersionString SUBSCRIBER_v10
AdornOps=set DEG_GetSubscribDetailsSoapObjectClassString Subscriber
AdornOps=set DEG_GetSubscribDetailsSoapContextIdString ContextId
AdornOps=set DEG_GetSubscribDetailsSoapReturnAttributeString hss
AdornOps=set DEG_GetSubscribDetailsSoapAliasNameString imsi
AdornOps=copy CUST_GSP_IN_IMSIString DEG_GetSubscribDetailsSoapAliasValueString
AdornOps=set DEG_GetSubscribDetailsSoapOperationString "searchRequest"
AdornOps=set DEG_OEMDevGetSubscribDetailsErrorString 0
AdornOps=set DEG_GetSubscribDetailsSoapResponseEntitlements ""
AdornOps=set DEG_GetSubscribDetailsSoapResponseListOfEntitlements null
AdornOps=set DEG_GetSubscribDetailsSoapResponseCounterInteger 0
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/140.LogAttributesRequest]

Attributes=DEG_GetSubscribDetailsSoapVersionString
Attributes=DEG_GetSubscribDetailsSoapObjectClassString
#Attributes=DEG_GetSubscribDetailsSoapContextIdString
Attributes=DEG_GetSubscribDetailsSoapAliasNameString
Attributes=DEG_GetSubscribDetailsSoapAliasValueString
Attributes=DEG_GetSubscribDetailsSoapReturnAttributeString
#Attributes=DEG_OEMDevGetSubscribDetailsErrorString
ClassName=LogNMERule
LogLevel=INFO
Message=DEG TO PGW -> Sending GetSubscriberDetails Soap Request:


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/150.SendSubscriberRequest_CreateSNMEBody]

ClassName=NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapOperationString,DEG_SubscribDetailsOperationIDString
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapVersionString,searchRequest.version.CData
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapObjectClassString,searchRequest.base.objectclass.CData
#NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapContextIdString,searchRequest.base.contextID.CData
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapAliasNameString,searchRequest.base.alias.name
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapAliasValueString,searchRequest.base.alias.value
#NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapReturnAttributeString,searchRequest.returnAttribute.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/160.ExecuteSendSubscriberRequest]

ClassName=SynchronousLookupRule
ConnectorName=100.GetSubscriberDetailsSOAPClientConnector
ErrorCodeAttribute=DEG_GetSubscribDetailsSoapErrorCodeString
ErrorMessageAttribute=DEG_GetSubscribDetailsSoapErrorMessageString
ErrorRule=16010.SynchronousErrorRule
NoMatchRule=16020.SynchronousNoMatchRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/160.ExecuteSendSubscriberRequest/16010.SynchronousErrorRule]

Attributes=DEG_GetSubscribDetailsSoapErrorCodeString
Attributes=DEG_GetSubscribDetailsSoapErrorMessageString
Attributes=DEG_SubscribDetailsFaultcodeString
Attributes=DEG_SubscribDetailsFaultString
ClassName=LogNMERule
LogLevel=INFO
Message=16010.SynchronousErrorRule: 


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/160.ExecuteSendSubscriberRequest/16020.SynchronousNoMatchRule]

Attributes=DEG_GetSubscribDetailsSoapErrorCodeString
Attributes=DEG_GetSubscribDetailsSoapErrorMessageString
Attributes=DEG_SubscribDetailsFaultcodeString
Attributes=DEG_SubscribDetailsFaultString
ClassName=LogNMERule
LogLevel=INFO
Message=16020.SynchronousNoMatchRule: 


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/160.ExecuteSendSubscriberRequest/ErrorRule]

AdornOps=set DEG_OEMDevGetSubscribDetailsErrorString 1
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse]

ClassName=ConditionalRule
Conditions=DEG_OEMDevGetSubscribDetailsErrorString,=,0
TrueRuleChain=18010.GetErrorMessage
TrueRuleChain=18020.CheckErrorMessage


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18010.GetErrorMessage]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.errorMessage.CData,DEG_GetSubscribDetailsSoapResponseErrorMessageString,NOERROR


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage]

ClassName=ConditionalRule
Conditions=DEG_GetSubscribDetailsSoapResponseErrorMessageString,=,NOERROR
TrueRuleChain=1802010.SuccessSNMEToNMEConversion
TrueRuleChain=1802020.SuccessSNMEToNMEConversionAliasRepositoryData
TrueRuleChain=1802030.SuccessGetMSISDN


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802010.SuccessSNMEToNMEConversion]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.version.CData,DEG_GetSubscribDetailsSoapResponseVersionString
StructuredNMEToNMEMap=searchResponse.errorMessage.CData,DEG_GetSubscribDetailsSoapResponseErrorMessageString,NOERROR
StructuredNMEToNMEMap=searchResponse.objects.auc.imsi.CData,DEG_GetSubscribDetailsSoapResponseImsiString
StructuredNMEToNMEMap=searchResponse.objects.hlr.eps.msisdn.CData,DEG_GetSubscribDetailsSoapResponseMsisdnString,""
StructuredNMEToNMEMap=searchResponse.objects.hlr.routingCategory.CData,DEG_GetSubscribDetailsSoapResponseRoutingCategoryInteger,-1
StructuredNMEToNMEMap=searchResponse.objects.hlr.imeisv.CData,DEG_GetSubscribDetailsSoapResponseImeiString,""
#StructuredNMEToNMEMap=searchResponse.objects.hss.subscriptionId.CData,DEG_GetSubscribDetailsSoapResponseSubscriptionIdString
#StructuredNMEToNMEMap=searchResponse.objects.hss.profileType.CData,DEG_GetSubscribDetailsSoapResponseProfileTypeString
#StructuredNMEToNMEMap=searchResponse.objects.hss.adminBlocked.CData,DEG_GetSubscribDetailsSoapResponseAdminBlockedString
#StructuredNMEToNMEMap=searchResponse.objects.hss.defaultScscfRequired.CData,DEG_GetSubscribDetailsSoapResponsedefaultScscfRequiredString
#StructuredNMEToNMEMap=searchResponse.objects.hss.maximumPublicIds.CData,DEG_GetSubscribDetailsSoapResponseMaximumPublicIdsString
#StructuredNMEToNMEMap=searchResponse.objects.hss.sharedIFCSupport.CData,DEG_GetSubscribDetailsSoapResponseSharedIFCSupportString
#StructuredNMEToNMEMap=searchResponse.objects.hss.ccfPrimary.CData,DEG_GetSubscribDetailsSoapResponseCcfPrimaryString
#StructuredNMEToNMEMap=searchResponse.objects.hss.ccfSecondary.CData,DEG_GetSubscribDetailsSoapResponseCcfSecondaryString


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData]

ClassName=com.hp.usage.bulkcm.LoopRule
ExitConditions=DEG_GetSubscribDetailsSoapResponseCounterInteger,=,-1
RetryCount=50
RetryDelay=0
RuleNames=100.GetAliasRepoFromStructuredNME
RuleNames=200.CheckIfEmptyAliasRepo


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/100.GetAliasRepoFromStructuredNME]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].serviceIndId.CData,DEG_GetSubscribDetailsSoapResponseServiceIndIdString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].version.CData,DEG_GetSubscribDetailsSoapResponseDataVersionString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].aliasId.CData,DEG_GetSubscribDetailsSoapResponseAliasIdString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].asData.CData,DEG_GetSubscribDetailsSoapResponseAsDataChorizoString,EMPTY


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,EMPTY
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,MultiServiceActivatorServices
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,DEG_GetSubscribDetailsSoapResponseServiceIndIdString
Operations=None
SetLoopEnd=30.SetLoopEndAliasRepo
GetEntitlements=00.SplitPRUEBAS
GetEntitlements=01.TokenizeEntitlements
GetEntitlements=30.SetLoopEndAliasRepo
IncreaseCounter=20.IncreaseCounter
TrueRuleChain=SetLoopEnd
TrueRuleChain=GetEntitlements
TrueRuleChain=IncreaseCounter


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/00.SplitPRUEBAS]

AdornOps=substr "<service-states>" "</service-states>" DEG_GetSubscribDetailsSoapResponseAsDataChorizoString DEG_GetSubscribDetailsSoapResponseAsDataChorizoString
AdornOps=replace "<service>" "$" DEG_GetSubscribDetailsSoapResponseAsDataChorizoString DEG_GetSubscribDetailsSoapResponseTempString
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements]

ClassName=com.hp.siu.collector.rules.StringTokenizerRule
Delimiter=$
SourceAttribute=DEG_GetSubscribDetailsSoapResponseTempString
TokenAttribute=DEG_GetSubscribDetailsSoapResponseTemp2String


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule]

ClassName=ConditionalRule
Conditions=DEG_GetSubscribDetailsSoapResponseTemp2String,starts,"<service-name>"
TrueRuleChain=10.AdornService
TrueRuleChain=20.AddEntitlementToList


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule/10.AdornService]

AdornOps=replace "</service-name><status>" "=" DEG_GetSubscribDetailsSoapResponseTemp2String DEG_GetSubscribDetailsSoapResponseTemp2String
AdornOps=substr "<service-name>" "</status>" DEG_GetSubscribDetailsSoapResponseTemp2String DEG_GetSubscribDetailsSoapResponseTemp2String
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule/20.AddEntitlementToList]

ClassName=AddToListAttributeRule
InputAttribute=DEG_GetSubscribDetailsSoapResponseTemp2String
ListAttribute=DEG_GetSubscribDetailsSoapResponseListOfEntitlements


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/20.IncreaseCounter]

AdornOps=+ DEG_GetSubscribDetailsSoapResponseCounterInteger 1 DEG_GetSubscribDetailsSoapResponseCounterInteger
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/30.SetLoopEndAliasRepo]

AdornOps=set DEG_GetSubscribDetailsSoapResponseCounterInteger -1
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/180.CheckSoapResponse/18020.CheckErrorMessage/1802030.SuccessGetMSISDN]

AdornOps=setifnull DEG_GetSubscribDetailsSoapResponseMsisdnString ""
#AdornOps=copy DEG_GetSubscribDetailsSoapResponseMsisdnString DEG_MDN
AdornOps=copy DEG_GetSubscribDetailsSoapResponseMsisdnString CUST_GSP_OUT_MDN
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.SetDummyEntitlementsTEMPORAL]

AdornOps=set CUST_GSP_OUT_EntitlementStatus "VoWiFi=6101,VoLTE=6101"
AdornOps=set CUST_GSP_OUT_CUSTACTFEATURELIST "VoWiFi,VoLTE"
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus]

ClassName=ConditionalRule
Conditions=DEG_OEMDevGetSubscribDetailsErrorString,=,1
Conditions=DEG_OEMDevGetSubscribDetailsErrorString,=,SoapFault
Operations=or

#TrueRuleChain=16030.FailureResponse
#TrueRuleChain=16040.AuditRIG2DEG_FailureResponse
#TrueRuleChain=16050.SetHTTPErrorResponse

FalseRuleChain=19010.IterateListOfEntitlements
FalseRuleChain=19015.CleanFirstCommaFromListOfEntitlements
FalseRuleChain=19020.CleanFirstCommaFromFeatureList
#FalseRuleChain=16030.SuccessResponse
#FalseRuleChain=16060.AuditRIG2DEG_SuccessResponse


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19010.IterateListOfEntitlements]

ClassName=ListAttributeIterator
ListAttributeName=DEG_GetSubscribDetailsSoapResponseListOfEntitlements
RuleChain=100.BuildEntitlementsCustOut
RuleChain=200.CheckToAutoprovision
TmpAttributeName=DEG_GetSubscribDetailsSoapResponseEntitlements


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19010.IterateListOfEntitlements/100.BuildEntitlementsCustOut]

AdornOps=+ CUST_GSP_OUT_EntitlementStatus , CUST_GSP_OUT_EntitlementStatus
AdornOps=+ CUST_GSP_OUT_EntitlementStatus DEG_GetSubscribDetailsSoapResponseEntitlements CUST_GSP_OUT_EntitlementStatus

AdornOps=+ CUST_GSP_OUT_CUSTACTFEATURELIST , CUST_GSP_OUT_CUSTACTFEATURELIST
AdornOps=substr 0 "=" DEG_GetSubscribDetailsSoapResponseEntitlements DEG_GetSubscribDetailsSoapResponseEntitlements
AdornOps=+ CUST_GSP_OUT_CUSTACTFEATURELIST DEG_GetSubscribDetailsSoapResponseEntitlements CUST_GSP_OUT_CUSTACTFEATURELIST
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19010.IterateListOfEntitlements/200.CheckToAutoprovision]

ClassName=ConditionalRule
Conditions=DEG_GetSubscribDetailsSoapResponseRoutingCategoryInteger,=,61
Conditions=CUST_GSP_OUT_EntitlementStatus,contains,"VoWiFi=6101"
Conditions=CUST_GSP_OUT_EntitlementStatus,contains,"VoLTE=6106"
Operations=and,or
TrueRuleChain=SetAutoProvisionValues
TrueRuleChain=InvokeAutoProvision
#Temporal:
FalseRuleChain=SetAutoProvisionValues
FalseRuleChain=InvokeAutoProvision


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19010.IterateListOfEntitlements/200.CheckToAutoprovision/SetAutoProvisionValues]

AdornOps=setifnull DEG_CDevProcessStartTimeLong 0
AdornOps=copy DEG_CDevProcessStartTimeLong DEG_AutoProvisionTimeStampEvent
AdornOps=copy DEG_IMSI DEG_AutoProvisionUsernameString
AdornOps=setifnull DEG_OEMDevActionNameString ""
AdornOps=copy DEG_OEMDevActionNameString DEG_AutoProvisionCommandString
AdornOps=copy DEG_GetSubscribDetailsSoapResponseImeiString DEG_AutoProvisionUniqueIdString
AdornOps=setifnull DEG_OEMDevSubscriberIdString ""
AdornOps=substr "@" length DEG_OEMDevSubscriberIdString DEG_AutoProvisionRealmString
AdornOps=copy DEG_GetSubscribDetailsSoapResponseEntitlements DEG_AutoProvisionDetailsString
AdornOps=setifnull DEG_OEMDevRequestIdString 0
AdornOps=copy DEG_OEMDevRequestIdString DEG_AutoProvisionRequestIdString
AdornOps=substr "=" length DEG_GetSubscribDetailsSoapResponseTemp2String DEG_AutoProvisionResultCodeString
ClassName=AdornmentRule



[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19010.IterateListOfEntitlements/200.CheckToAutoprovision/InvokeAutoProvision]

ClassName=com.hp.siu.sessionserver.rules.LocalRuleChainInvoker
RuleChain=100U.AutoProvisionSubscriberRuleChain
UseRuleChainManagerPool=true


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19015.CleanFirstCommaFromListOfEntitlements]

ClassName=PerlRegExStringRule
Operation=substitute
RegExPattern=s/^\,//g
SourceAttribute=CUST_GSP_OUT_EntitlementStatus


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/190.CheckListOfEntitlementsStatus/19020.CleanFirstCommaFromFeatureList]

ClassName=PerlRegExStringRule
Operation=substitute
RegExPattern=s/^\,//g
SourceAttribute=CUST_GSP_OUT_CUSTACTFEATURELIST


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/195.TRAZAfinal]

Attributes=CUST_GSP_OUT_EntitlementStatus
Attributes=CUST_GSP_OUT_CUSTACTFEATURELIST
Attributes=DEG_GetSubscribDetailsSoapResponseRoutingCategoryInteger
Attributes=DEG_GetSubscribDetailsSoapResponseErrorMessageString
ClassName=LogNMERule
LogLevel=INFO
Message=<<< TRAZAfinal >>>: 
NullAlso=true


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/100T.SendSubscriberProfileSoapRequestRuleChain/200.LogAttributesResponse]

Attributes=DEG_IMSI
Attributes=DEG_GetSubscribDetailsSoapResponseMsisdnString
Attributes=DEG_MDN
Attributes=DEG_SSL_MDN
Attributes=DEG_GetSubscribDetailsSoapResponseAsDataChorizoString
Attributes=DEG_GetSubscribDetailsSoapResponseRoutingCategoryInteger
Attributes=DEG_GetSubscribDetailsSoapResponseImeiString
ClassName=LogNMERule
LogLevel=INFO
Message=PGW TO DEG -> GetSubscriberDetails Soap Answer received: 


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain]

ClassName=com.hp.siu.collector.rules.RuleChain
RuleNames=210.InitSubscriberProfileSoapRequest
RuleNames=220.LogAttributesRequest
RuleNames=230.SendNotificationTokensRequest_CreateSNMEBody
RuleNames=240.ExecuteNotificationTokensRequest
RuleNames=250.CheckSoapResponse
RuleNames=260.LogSoapResponse


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/210.InitSubscriberProfileSoapRequest]

AdornOps=set DEG_GetSubscribDetailsSoapOperationString "searchRequest"
AdornOps=set DEG_GetSubscribDetailsSoapVersionString SUBSCRIBER_v10
AdornOps=set DEG_GetSubscribDetailsSoapObjectClassString Subscriber
AdornOps=set DEG_GetSubscribDetailsSoapAliasNameString imsi
AdornOps=setifnull DEG_IMSI ""
AdornOps=copy DEG_IMSI DEG_GetSubscribDetailsSoapAliasValueString
AdornOps=set DEG_OEMDevGetSubscribDetailsErrorString 0
AdornOps=set DEG_GetSubscribDetailsSoapResponseCounterInteger 0
AdornOps=set DEG_EntNotificationTokensList null
AdornOps=set DEG_GetSubscribDetailsSoapReturnAttributeString hss
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/220.LogAttributesRequest]

Attributes=DEG_GetSubscribDetailsSoapOperationString
Attributes=DEG_GetSubscribDetailsSoapVersionString
Attributes=DEG_GetSubscribDetailsSoapObjectClassString
Attributes=DEG_GetSubscribDetailsSoapAliasNameString
Attributes=DEG_GetSubscribDetailsSoapAliasValueString
ClassName=LogNMERule
LogLevel=INFO
Message=DEG TO PGW -> Sending Notification Tokens Soap Request:


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/230.SendNotificationTokensRequest_CreateSNMEBody]

ClassName=NMEConversionRule
CreateMissingAttributeInSNME=false
CreateSNMEIfNeeded=true
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapOperationString,DEG_SubscribDetailsOperationIDString
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapVersionString,searchRequest.version.CData
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapObjectClassString,searchRequest.base.objectclass.CData
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapAliasNameString,searchRequest.base.alias.name
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapAliasValueString,searchRequest.base.alias.value
NMEToStructuredNMEMap=DEG_GetSubscribDetailsSoapReturnAttributeString,searchRequest.returnAttribute.CData
SNMEType=Umbrella:Body


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/240.ExecuteNotificationTokensRequest]

ClassName=SynchronousLookupRule
ConnectorName=100.GetSubscriberDetailsSOAPClientConnector
ErrorCodeAttribute=DEG_GetSubscribDetailsSoapErrorCodeString
ErrorMessageAttribute=DEG_GetSubscribDetailsSoapErrorMessageString
ErrorRule=24010.SynchronousErrorRule
NoMatchRule=24020.SynchronousNoMatchRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/240.ExecuteNotificationTokensRequest/24010.SynchronousErrorRule]

Attributes=DEG_GetSubscribDetailsSoapErrorCodeString
Attributes=DEG_GetSubscribDetailsSoapErrorMessageString
Attributes=DEG_SubscribDetailsFaultcodeString
Attributes=DEG_SubscribDetailsFaultString
ClassName=LogNMERule
LogLevel=INFO
Message=24010.SynchronousErrorRule: 


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/240.ExecuteNotificationTokensRequest/24020.SynchronousNoMatchRule]

Attributes=DEG_GetSubscribDetailsSoapErrorCodeString
Attributes=DEG_GetSubscribDetailsSoapErrorMessageString
Attributes=DEG_SubscribDetailsFaultcodeString
Attributes=DEG_SubscribDetailsFaultString
ClassName=LogNMERule
LogLevel=INFO
Message=24020.SynchronousNoMatchRule: 


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/240.ExecuteNotificationTokensRequest/ErrorRule]

AdornOps=set DEG_OEMDevGetSubscribDetailsErrorString 1
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse]

ClassName=ConditionalRule
Conditions=DEG_OEMDevGetSubscribDetailsErrorString,=,0
TrueRuleChain=25010.GetErrorMessage
TrueRuleChain=25020.CheckErrorMessage


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25010.GetErrorMessage]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.errorMessage.CData,DEG_GetSubscribDetailsSoapResponseErrorMessageString,NOERROR


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage]

ClassName=ConditionalRule
Conditions=DEG_GetSubscribDetailsSoapResponseErrorMessageString,=,NOERROR
TrueRuleChain=2502010.SuccessSNMEToNMEConversion
TrueRuleChain=2502020.SuccessSNMEToNMEConversionAliasRepositoryData


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502010.SuccessSNMEToNMEConversion]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.objects.auc.imsi.CData,DEG_GetSubscribDetailsSoapResponseImsiString


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData]

ClassName=com.hp.usage.bulkcm.LoopRule
ExitConditions=DEG_GetSubscribDetailsSoapResponseCounterInteger,=,-1
RetryCount=50
RetryDelay=0
RuleNames=100.GetAliasRepoFromStructuredNME
RuleNames=200.CheckIfEmptyAliasRepo


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/100.GetAliasRepoFromStructuredNME]

ClassName=NMEConversionRule
SNMEType=Umbrella:Body
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].serviceIndId.CData,DEG_GetSubscribDetailsSoapResponseServiceIndIdString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].version.CData,DEG_GetSubscribDetailsSoapResponseDataVersionString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].asData.CData,DEG_GetSubscribDetailsSoapResponseAsDataChorizoString,EMPTY
StructuredNMEToNMEMap=searchResponse.objects.hss.aliasRepositoryData[DEG_GetSubscribDetailsSoapResponseCounterInteger].aliasId.CData,DEG_GetSubscribDetailsSoapResponseAliasIdString,EMPTY


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo]

ClassName=com.hp.siu.collector.rules.SwitchConditionRule
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,EMPTY
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,MultiServiceActivatorNotifications
Conditions=DEG_GetSubscribDetailsSoapResponseServiceIndIdString,=,DEG_GetSubscribDetailsSoapResponseServiceIndIdString
Operations=None
SetLoopEnd=30.SetLoopEndAliasRepo
GetEntitlements=00.SplitPRUEBAS
GetEntitlements=01.TokenizeEntitlements
GetEntitlements=10.TRAZAGetNotificationTokens
GetEntitlements=30.SetLoopEndAliasRepo
IncreaseCounter=20.IncreaseCounter
TrueRuleChain=SetLoopEnd
TrueRuleChain=GetEntitlements
TrueRuleChain=IncreaseCounter


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/00.SplitPRUEBAS]

AdornOps=substr "</user-name>" "</device>" DEG_GetSubscribDetailsSoapResponseAsDataChorizoString DEG_GetSubscribDetailsSoapResponseAsDataChorizoString
AdornOps=replace "<notification>" "$" DEG_GetSubscribDetailsSoapResponseAsDataChorizoString DEG_GetSubscribDetailsSoapResponseTempString
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements]

ClassName=com.hp.siu.collector.rules.StringTokenizerRule
Delimiter=$
SourceAttribute=DEG_GetSubscribDetailsSoapResponseTempString
TokenAttribute=DEG_GetSubscribDetailsSoapResponseTemp2String


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule]

ClassName=ConditionalRule
Conditions=DEG_GetSubscribDetailsSoapResponseTemp2String,starts,"<notification-name>"
TrueRuleChain=10.AdornService
TrueRuleChain=20.AddEntitlementToList


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule/10.AdornService]

AdornOps=replace "</notification-name><apns-token>" ":" DEG_GetSubscribDetailsSoapResponseTemp2String DEG_GetSubscribDetailsSoapResponseTemp2String
AdornOps=substr "<notification-name>" "</apns-token>" DEG_GetSubscribDetailsSoapResponseTemp2String DEG_GetSubscribDetailsSoapResponseTemp2String
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/01.TokenizeEntitlements/IterationRule/20.AddEntitlementToList]

ClassName=AddToListAttributeRule
InputAttribute=DEG_GetSubscribDetailsSoapResponseTemp2String
ListAttribute=DEG_EntNotificationTokensList


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/10.TRAZAGetNotificationTokens]

Attributes=DEG_GetSubscribDetailsSoapResponseAsDataChorizoString
Attributes=DEG_GetSubscribDetailsSoapResponseTempString
Attributes=DEG_GetSubscribDetailsSoapResponseTemp2String
Attributes=DEG_EntNotificationTokensList
ClassName=LogNMERule
LogLevel=INFO
Message=<<< TRAZA >>> 10.TRAZAGetNotificationTokens: 
NullAlso=true


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/20.IncreaseCounter]

AdornOps=+ DEG_GetSubscribDetailsSoapResponseCounterInteger 1 DEG_GetSubscribDetailsSoapResponseCounterInteger
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/250.CheckSoapResponse/25020.CheckErrorMessage/2502020.SuccessSNMEToNMEConversionAliasRepositoryData/200.CheckIfEmptyAliasRepo/30.SetLoopEndAliasRepo]

AdornOps=set DEG_GetSubscribDetailsSoapResponseCounterInteger -1
ClassName=AdornmentRule


[/templates/DEG/DeviceInterface/GetSubscriberProfileSoapCustomize/RuleChains/200T.SendNotificationTokensSoapRequestRuleChain/260.LogSoapResponse]

Attributes=DEG_GetSubscribDetailsSoapResponseMsisdnString
Attributes=DEG_GetSubscribDetailsSoapResponseAsDataChorizoString
Attributes=DEG_GetSubscribDetailsSoapResponseRoutingCategoryInteger
Attributes=DEG_GetSubscribDetailsSoapResponseTempString
Attributes=DEG_GetSubscribDetailsSoapResponseTemp2String
Attributes=DEG_EntNotificationTokensList
ClassName=LogNMERule
LogLevel=INFO
Message=PGW TO DEG -> GetNotificationTokens Soap Answer received: 



